{"_properties":{"isServerWorkflow":true},"components":[{"id":2,"steps":[{"id":3,"inputs":{},"position":"10,-100","purpose":"start","title":"Start","transitions":[{"id":941,"inputs":{},"position":"100,-40 100,130 130,130 130,150","sourceConnector":"bottom","target":{"id":4548},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Initialize","id":4548,"inputs":{},"name":"InitializationContainer","position":"10,150","title":"Container","transitions":[{"id":4564,"inputs":{},"position":"130,300 130,350","sourceConnector":"bottom","target":{"id":4552}}]},{"action":"gcx:wf:core::TryCatch","id":4550,"inputs":{},"name":"tryCatchGenerateReport","position":"10,540","title":"Try Catch"},{"action":"gcx:wf:core::TryCatch","id":4552,"inputs":{},"name":"tryCatchSendConfirmationEmail","position":"10,350","title":"Try Catch","transitions":[{"id":4566,"inputs":{},"position":"130,470 130,540","sourceConnector":"bottom","target":{"id":4550}}]}]},{"id":849,"steps":[{"id":850,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":854,"inputs":{},"position":"90,60 90,100 100,100 100,120","target":{"id":853}}]},{"action":"gcx:wf:core::CreateValue","id":853,"inputs":{},"name":"PerfOutcomes","position":"-20,120","title":"Create Value","transitions":[{"id":856,"inputs":{},"position":"100,190 100,290","sourceConnector":"bottom","target":{"id":855},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":855,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":32,"kind":"idref"},{"count":13,"index":72,"kind":"idref"}],"code":"$reportConfig.result != null && $reportConfig.result.reports != null && $reportConfig.result.reports.length > 0","source":"$reportConfig.result != null && $reportConfig.result.reports != null && $reportConfig.result.reports.length > 0 "}},"position":"40,290","title":"If","transitions":[{"branch":"true","id":858,"inputs":{},"position":"40,320 -60,320 -60,440","sourceConnector":"left","target":{"id":857},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":857,"inputs":{"expression":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports.map(function (x) { return x.name; })","source":"$reportConfig.result.reports.map(x => x.name)"}},"name":"subReportNames","position":"-180,440","title":"Create Value","transitions":[{"id":860,"inputs":{},"position":"-60,510 -60,590","sourceConnector":"bottom","target":{"id":859},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":859,"inputs":{"object":{"accessors":["$PerfOutcomes"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$PerfOutcomes","source":"$PerfOutcomes"},"propertyName":"result","propertyValue":{"accessors":["$subReportNames"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$subReportNames.result.join(\"; \")","source":"$subReportNames.result.join(\"; \")"}},"position":"-180,590","title":"Set Property","transitions":[{"id":862,"inputs":{},"position":"-60,620 -60,670","sourceConnector":"bottom","target":{"id":861},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":861,"inputs":{"message":{"accessors":["$PerfOutcomes"],"annotations":[{"count":13,"index":26,"kind":"idref"}],"code":"\"Set PerfOutcomes to: \" + $PerfOutcomes.result","source":"\"Set PerfOutcomes to: \" + $PerfOutcomes.result "}},"position":"-180,670","title":"Log"}]},{"id":957,"steps":[{"id":958,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":1142,"inputs":{},"position":"90,60 90,230 670,230 670,250","sourceConnector":"bottom","target":{"id":1076},"targetConnector":"top"}]},{"action":"gcx:wf:core::ConvertToJson","id":1062,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.error","source":"$currentReportToCheckFinish.result.error"}},"name":"gpErrorJson1","position":"90,660","title":"Convert To JSON","transitions":[{"id":1102,"inputs":{},"position":"210,730 210,760","sourceConnector":"bottom","target":{"id":1064}}]},{"action":"gcx:wf:core::Log","id":1064,"inputs":{"message":{"accessors":["$currentReportToCheckFinish","$gpErrorJson1"],"annotations":[{"count":27,"index":44,"kind":"idref"},{"count":13,"index":117,"kind":"idref"}],"code":"\"Error received checking GP task from: \" + $currentReportToCheckFinish.result.dataUrl + \" with json response: {\" + $gpErrorJson1.json + \"}\"","source":" \"Error received checking GP task from: \" + $currentReportToCheckFinish.result.dataUrl + \" with json response: {\" +  $gpErrorJson1.json + \"}\""}},"position":"90,760","title":"Log"},{"action":"gcx:wf:core::ConvertToJson","id":1066,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"}},"name":"gpErrorJson2","position":"50,1160","title":"Convert To JSON","transitions":[{"id":1106,"inputs":{},"position":"170,1230 170,1260","sourceConnector":"bottom","target":{"id":1068}}]},{"action":"gcx:wf:core::Log","id":1068,"inputs":{"message":{"accessors":["$currentReportToCheckFinish","$gpErrorJson2"],"annotations":[{"count":27,"index":60,"kind":"idref"},{"count":13,"index":133,"kind":"idref"}],"code":"\"Error received checking GP task (esriJobFailed) from: \" + $currentReportToCheckFinish.result.dataUrl + \" with json response: {\" + $gpErrorJson2.json + \"}\"","source":" \"Error received checking GP task (esriJobFailed) from: \" + $currentReportToCheckFinish.result.dataUrl + \" with json response: {\" +  $gpErrorJson2.json + \"}\""}},"position":"50,1260","title":"Log"},{"action":"gcx:wf:core::ConvertToJson","id":1070,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"}},"name":"gpErrorJson3","position":"810,1430","title":"Convert To JSON","transitions":[{"id":1110,"inputs":{},"position":"930,1500 930,1530","sourceConnector":"bottom","target":{"id":1072}}]},{"action":"gcx:wf:core::Log","id":1072,"inputs":{"message":{"accessors":["$currentReportToCheckFinish","$gpErrorJson3"],"annotations":[{"count":27,"index":82,"kind":"idref"},{"count":13,"index":155,"kind":"idref"}],"code":"\"Error received checking GP task (GP job finished without json output) from: \" + $currentReportToCheckFinish.result.dataUrl + \" with json response: {\" + $gpErrorJson3.json + \"}\"","source":" \"Error received checking GP task (GP job finished without json output) from: \" + $currentReportToCheckFinish.result.dataUrl + \" with json response: {\" +  $gpErrorJson3.json + \"}\""}},"position":"810,1530","title":"Log"},{"action":"gcx:wf:core::If","id":1076,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish","$currentReportToCheckFinish","$currentReportToCheckFinish","$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"},{"count":27,"index":38,"kind":"idref"},{"count":27,"index":84,"kind":"idref"},{"count":27,"index":139,"kind":"idref"}],"code":"$currentReportToCheckFinish != null && $currentReportToCheckFinish.result != null && $currentReportToCheckFinish.result.dataUrl !== null && $currentReportToCheckFinish.result.dataUrl !== undefined","source":"$currentReportToCheckFinish!= null && $currentReportToCheckFinish.result != null && $currentReportToCheckFinish.result.dataUrl !== null && $currentReportToCheckFinish.result.dataUrl !== undefined"}},"position":"610,250","title":"If","transitions":[{"branch":"false","id":1134,"inputs":{},"position":"730,280 850,280 850,305 870,305","sourceConnector":"right","target":{"id":1098},"targetConnector":"left"},{"branch":"true","id":1136,"inputs":{},"position":"610,280 530,280 530,340 380,340 380,360","sourceConnector":"left","target":{"id":1078},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1078,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish","$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"},{"count":27,"index":53,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.error !== null && $currentReportToCheckFinish.result.error !== undefined","source":"$currentReportToCheckFinish.result.error !== null && $currentReportToCheckFinish.result.error !== undefined"}},"position":"320,360","title":"If","transitions":[{"branch":"true","id":1116,"inputs":{},"position":"320,390 210,390 210,530","sourceConnector":"left","target":{"id":1080},"targetConnector":"top"},{"branch":"false","id":1118,"inputs":{},"position":"440,390 480,390 480,780","sourceConnector":"right","target":{"id":1082},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1080,"inputs":{"object":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished","source":"$numberOfGPFinished"},"propertyName":"result","propertyValue":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished.result + 1","source":"$numberOfGPFinished.result + 1"}},"position":"90,530","title":"Set Property","transitions":[{"id":1104,"inputs":{},"position":"210,560 210,660","sourceConnector":"bottom","target":{"id":1062},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1082,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.gpJob.jobStatus == \"esriJobFailed\"","source":"$currentReportToCheckFinish.result.gpJob.jobStatus == \"esriJobFailed\""}},"position":"420,780","title":"If","transitions":[{"branch":"true","id":1120,"inputs":{},"position":"420,810 400,810 400,930 430,930 430,950","sourceConnector":"left","target":{"id":1084},"targetConnector":"top"},{"branch":"false","id":1122,"inputs":{},"position":"540,810 730,810 730,1000","sourceConnector":"right","target":{"id":1086},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1084,"inputs":{"object":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished","source":"$numberOfGPFinished"},"propertyName":"result","propertyValue":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished.result + 1","source":"$numberOfGPFinished.result + 1"}},"position":"310,950","title":"Set Property","transitions":[{"id":1124,"inputs":{},"position":"430,980 430,1050","sourceConnector":"bottom","target":{"id":1088}}]},{"action":"gcx:wf:core::If","id":1086,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.gpJob.jobStatus == \"esriJobSucceeded\"","source":"$currentReportToCheckFinish.result.gpJob.jobStatus == \"esriJobSucceeded\""}},"position":"670,1000","title":"If","transitions":[{"branch":"true","id":1126,"inputs":{},"position":"670,1030 630,1030 630,1210","sourceConnector":"left","target":{"id":1090},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1088,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"esriJobFailed\"\n}","source":"{\n  \"error\": \"esriJobFailed\"\n}"}},"position":"310,1050","title":"Set Property","transitions":[{"id":1108,"inputs":{},"position":"430,1080 430,1140 170,1140 170,1160","sourceConnector":"bottom","target":{"id":1066},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1090,"inputs":{"object":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished","source":"$numberOfGPFinished"},"propertyName":"result","propertyValue":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished.result + 1","source":"$numberOfGPFinished.result + 1"}},"position":"510,1210","title":"Set Property","transitions":[{"id":1128,"inputs":{},"position":"630,1240 630,1320","sourceConnector":"bottom","target":{"id":1092},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1092,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish","$currentReportToCheckFinish","$currentReportToCheckFinish","$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"},{"count":27,"index":60,"kind":"idref"},{"count":27,"index":132,"kind":"idref"},{"count":27,"index":214,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.gpJob.results != null && $currentReportToCheckFinish.result.gpJob.results.Output_JSON != null && $currentReportToCheckFinish.result.gpJob.results.Output_JSON.paramUrl !== null && $currentReportToCheckFinish.result.gpJob.results.Output_JSON.paramUrl !== undefined","source":"$currentReportToCheckFinish.result.gpJob.results != null && $currentReportToCheckFinish.result.gpJob.results.Output_JSON != null && $currentReportToCheckFinish.result.gpJob.results.Output_JSON.paramUrl !== null && $currentReportToCheckFinish.result.gpJob.results.Output_JSON.paramUrl !== undefined"}},"position":"570,1320","title":"If","transitions":[{"branch":"false","id":1130,"inputs":{},"position":"690,1350 790,1350 790,1365 810,1365","sourceConnector":"right","target":{"id":1094}},{"branch":"true","id":1132,"inputs":{},"position":"570,1350 550,1350 550,1410 560,1410 560,1500 540,1500","sourceConnector":"left","target":{"id":1096}}]},{"action":"gcx:wf:core::SetProperty","id":1094,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"GP job finished without json output\"\n}","source":"{\n  \"error\": \"GP job finished without json output\"\n}"}},"position":"810,1350","title":"Set Property","transitions":[{"id":1112,"inputs":{},"position":"930,1380 930,1430","sourceConnector":"bottom","target":{"id":1070}}]},{"action":"gcx:wf:core::Container","description":"Collect gp result data json for report","id":1096,"inputs":{},"position":"300,1430","title":"Container"},{"action":"gcx:wf:core::SetProperty","id":1098,"inputs":{"object":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished","source":"$numberOfGPFinished"},"propertyName":"result","propertyValue":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished.result + 1","source":"$numberOfGPFinished.result + 1"}},"position":"870,290","title":"Set Property"}]},{"id":960,"steps":[{"id":961,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":1148,"inputs":{},"position":"90,60 90,80 80,80 80,100","target":{"id":1149},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1147,"inputs":{"message":{"accessors":["$currentReportToCheckFinish","$errorJsonCheckReportFinished"],"annotations":[{"count":27,"index":60,"kind":"idref"},{"count":29,"index":124,"kind":"idref"}],"code":"\"Temporary error caught when trying to check result of \" + $currentReportToCheckFinish.result.name + \" and the error is \" + $errorJsonCheckReportFinished.json","source":" \"Temporary error caught when trying to check result of \" + $currentReportToCheckFinish.result.name + \" and the error is \" +$errorJsonCheckReportFinished.json"}},"position":"-40,240","title":"Log"},{"action":"gcx:wf:core::ConvertToJson","id":1149,"inputs":{"object":{"accessors":["$tryCatchCheckIfReportFinished"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$tryCatchCheckIfReportFinished.error","source":"$tryCatchCheckIfReportFinished.error"}},"name":"errorJsonCheckReportFinished","position":"-40,100","title":"Convert To JSON","transitions":[{"id":1150,"inputs":{},"position":"80,170 80,240","sourceConnector":"bottom","target":{"id":1147}}]}]},{"id":966,"steps":[{"id":968,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":974,"inputs":{},"position":"90,60 90,130 80,130 80,150","sourceConnector":"bottom","target":{"id":970}}]},{"action":"gcx:wf:core::Container","description":"Get GP job json infor","id":970,"inputs":{},"position":"-40,150","title":"Container","transitions":[{"id":976,"inputs":{},"position":"80,270 80,350","sourceConnector":"bottom","target":{"id":972}}]},{"action":"gcx:wf:core::Container","description":"Download json data for report","id":972,"inputs":{},"position":"-40,350","title":"Container"}]},{"id":978,"steps":[{"action":"gcx:wf:core::Log","id":980,"inputs":{"message":{"accessors":[],"code":" \"error: Gp json output does not have a valid url to download json data \"","source":" \"error: Gp json output does not have a valid url to download json data \""}},"position":"420,510","title":"Log"},{"action":"gcx:wf:core::Log","id":982,"inputs":{"message":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":45,"kind":"idref"}],"code":"\"Error: Can not download json data from \" + $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url","source":" \"Error: Can not download json data from \" + $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url"}},"position":"330,900","title":"Log"},{"action":"gcx:wf:core::Log","id":984,"inputs":{"message":{"accessors":["$currentReportToCheckFinish","$webRequestGetReportData"],"annotations":[{"count":27,"index":39,"kind":"idref"},{"count":24,"index":114,"kind":"idref"}],"code":"\"Raw data response collected from \" + $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url + \": \" + $webRequestGetReportData.text","source":" \"Raw data response collected from \" + $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url + \": \" + $webRequestGetReportData.text"}},"position":"-240,800","title":"Log","transitions":[{"id":1002,"inputs":{},"position":"-120,830 -120,870 150,870 150,890","sourceConnector":"bottom","target":{"id":986},"targetConnector":"top"}]},{"action":"gcx:wf:core::ParseJson","id":986,"inputs":{"json":{"accessors":["$webRequestGetReportData"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$webRequestGetReportData.text","source":"$webRequestGetReportData.text"}},"name":"parseJobJson3","position":"30,890","title":"Parse JSON","transitions":[{"id":1020,"inputs":{},"position":"150,960 150,1070","sourceConnector":"bottom","target":{"id":1000},"targetConnector":"top"}]},{"id":988,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1004,"inputs":{},"position":"90,60 90,290 290,290 290,310","sourceConnector":"bottom","target":{"id":990},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":990,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish","$currentReportToCheckFinish","$currentReportToCheckFinish","$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"},{"count":27,"index":67,"kind":"idref"},{"count":27,"index":140,"kind":"idref"},{"count":27,"index":218,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.gpJob.outputJsonInfo != null && $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value != null && $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url !== null && $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url !== undefined","source":"$currentReportToCheckFinish.result.gpJob.outputJsonInfo != null && $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value != null && $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url !== null && $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url !== undefined"}},"position":"230,310","title":"If","transitions":[{"branch":"true","id":1006,"inputs":{},"position":"230,340 160,340 160,530","sourceConnector":"left","target":{"id":992},"targetConnector":"top"},{"branch":"false","id":1008,"inputs":{},"position":"350,340 540,340 540,430","sourceConnector":"right","target":{"id":994},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":992,"inputs":{"method":"POST","query":{"accessors":[],"annotations":[],"code":"{\n    \"f\": \"json\"\n}","source":"{\n  \"f\":\"json\"\n}"},"url":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url","source":"$currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url"}},"name":"webRequestGetReportData","position":"40,530","title":"Send Web Request","transitions":[{"id":1010,"inputs":{},"position":"160,600 160,660 150,660 150,680","sourceConnector":"bottom","target":{"id":996},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":994,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Gp json output does not have a valid url to download json data \"\n}","source":"{\n  \"error\": \"Gp json output does not have a valid url to download json data \"\n}"}},"position":"420,430","title":"Set Property","transitions":[{"id":1012,"inputs":{},"position":"540,460 540,510","sourceConnector":"bottom","target":{"id":980},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":996,"inputs":{"condition":{"accessors":["$webRequestGetReportData","$webRequestGetReportData"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":42,"kind":"idref"}],"code":"$webRequestGetReportData.text !== null && $webRequestGetReportData.text !== undefined","source":"$webRequestGetReportData.text !== null && $webRequestGetReportData.text !== undefined"}},"position":"90,680","title":"If","transitions":[{"branch":"true","id":1014,"inputs":{},"position":"90,710 -120,710 -120,800","sourceConnector":"left","target":{"id":984},"targetConnector":"top"},{"branch":"false","id":1016,"inputs":{},"position":"210,710 310,710 310,835 330,835","sourceConnector":"right","target":{"id":998},"targetConnector":"left"}]},{"action":"gcx:wf:core::SetProperty","id":998,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"},"propertyName":"error","propertyValue":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":50,"kind":"idref"}],"code":"{\n    \"error\": \"Can not download json data from \" + $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url\n}","source":"{\n  \"error\": \"Can not download json data from \" + $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url\n}"}},"position":"330,820","title":"Set Property","transitions":[{"id":1018,"inputs":{},"position":"450,850 450,900","sourceConnector":"bottom","target":{"id":982},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1000,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"},"propertyName":"data","propertyValue":{"accessors":["$parseJobJson3"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson3.result","source":"$parseJobJson3.result"}},"position":"30,1070","title":"Set Property"}]},{"id":1022,"steps":[{"action":"gcx:wf:core::ConvertToJson","id":1024,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"}},"name":"gpErrorJson4","position":"350,830","title":"Convert To JSON","transitions":[{"id":1044,"inputs":{},"position":"470,900 470,940","sourceConnector":"bottom","target":{"id":1026}}]},{"action":"gcx:wf:core::Log","id":1026,"inputs":{"message":{"accessors":["$reportJsonUrl","$gpErrorJson4"],"annotations":[{"count":14,"index":42,"kind":"idref"},{"count":13,"index":111,"kind":"idref"}],"code":"\"Can not get report json result from \" + $reportJsonUrl.result + \" with original response from GP task: {\" + $gpErrorJson4.json + \"}\"","source":" \"Can not get report json result from \" + $reportJsonUrl.result + \" with original response from GP task: {\" +  $gpErrorJson4.json + \"}\""}},"position":"350,940","title":"Log"},{"action":"gcx:wf:core::Log","id":1028,"inputs":{"message":{"accessors":["$reportJsonUrl","$webRequestGetReportJson"],"annotations":[{"count":14,"index":47,"kind":"idref"},{"count":24,"index":78,"kind":"idref"}],"code":"\"Raw outputJsonInfo Result collected from \" + $reportJsonUrl.result + \": \" + $webRequestGetReportJson.text","source":" \"Raw outputJsonInfo Result collected from \" + $reportJsonUrl.result + \": \" + $webRequestGetReportJson.text"}},"position":"-200,700","title":"Log","transitions":[{"id":1046,"inputs":{},"position":"-80,730 -80,800 170,800 170,820","sourceConnector":"bottom","target":{"id":1030},"targetConnector":"top"}]},{"action":"gcx:wf:core::ParseJson","id":1030,"inputs":{"json":{"accessors":["$webRequestGetReportJson"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$webRequestGetReportJson.text","source":"$webRequestGetReportJson.text"}},"name":"parseJobJson2","position":"50,820","title":"Parse JSON","transitions":[{"id":1060,"inputs":{},"position":"170,890 170,1000","sourceConnector":"bottom","target":{"id":1042},"targetConnector":"top"}]},{"id":1032,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1048,"inputs":{},"position":"90,60 90,240 210,240 210,260","sourceConnector":"bottom","target":{"id":1034},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1034,"inputs":{"expression":{"accessors":["$currentReportToCheckFinish","$currentReportToCheckFinish","$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"},{"count":27,"index":56,"kind":"idref"},{"count":27,"index":111,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.dataUrl + \"/jobs/\" + $currentReportToCheckFinish.result.gpJob.jobId + \"/\" + $currentReportToCheckFinish.result.gpJob.results.Output_JSON.paramUrl","source":"$currentReportToCheckFinish.result.dataUrl + \"/jobs/\" + $currentReportToCheckFinish.result.gpJob.jobId + \"/\" + $currentReportToCheckFinish.result.gpJob.results.Output_JSON.paramUrl"}},"name":"reportJsonUrl","position":"90,260","title":"Create Value","transitions":[{"id":1050,"inputs":{},"position":"210,330 210,440 180,440 180,460","sourceConnector":"bottom","target":{"id":1036},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":1036,"inputs":{"method":"POST","query":{"accessors":[],"annotations":[],"code":"{\n    \"f\": \"json\"\n}","source":"{\n  \"f\":\"json\"\n}"},"url":{"accessors":["$reportJsonUrl"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$reportJsonUrl.result","source":"$reportJsonUrl.result"}},"name":"webRequestGetReportJson","position":"60,460","title":"Send Web Request","transitions":[{"id":1052,"inputs":{},"position":"180,530 180,590 170,590 170,610","sourceConnector":"bottom","target":{"id":1038},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1038,"inputs":{"condition":{"accessors":["$webRequestGetReportJson","$webRequestGetReportJson"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":42,"kind":"idref"}],"code":"$webRequestGetReportJson.text !== null && $webRequestGetReportJson.text !== undefined","source":"$webRequestGetReportJson.text !== null && $webRequestGetReportJson.text !== undefined"}},"position":"110,610","title":"If","transitions":[{"branch":"true","id":1054,"inputs":{},"position":"110,640 -80,640 -80,700","sourceConnector":"left","target":{"id":1028},"targetConnector":"top"},{"branch":"false","id":1056,"inputs":{},"position":"230,640 330,640 330,765 350,765","sourceConnector":"right","target":{"id":1040},"targetConnector":"left"}]},{"action":"gcx:wf:core::SetProperty","id":1040,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"},"propertyName":"error","propertyValue":{"accessors":["$reportJsonUrl"],"annotations":[{"count":14,"index":54,"kind":"idref"}],"code":"{\n    \"error\": \"Can not get report json result from \" + $reportJsonUrl.result\n}","source":"{\n  \"error\": \"Can not get report json result from \" + $reportJsonUrl.result\n}"}},"position":"350,750","title":"Set Property","transitions":[{"id":1058,"inputs":{},"position":"470,780 470,830","sourceConnector":"bottom","target":{"id":1024}}]},{"action":"gcx:wf:core::SetProperty","id":1042,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.gpJob","source":"$currentReportToCheckFinish.result.gpJob"},"propertyName":"outputJsonInfo","propertyValue":{"accessors":["$parseJobJson2"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson2.result","source":"$parseJobJson2.result"}},"position":"50,1000","title":"Set Property"}]},{"id":2988,"steps":[{"action":"gcx:wf:core::Exit","id":2990,"inputs":{},"position":"30,710","title":"Exit"},{"id":2992,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":3002,"inputs":{},"position":"90,60 90,120 120,120 120,140","sourceConnector":"bottom","target":{"id":2994},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetWorkflowOutput","id":2994,"inputs":{"name":"output","value":{"accessors":["$tryCatchSendConfirmationEmail"],"annotations":[{"count":30,"index":12,"kind":"idref"}],"code":"{\n    \"error\": $tryCatchSendConfirmationEmail.error\n}","source":"{\n  \"error\":$tryCatchSendConfirmationEmail.error\n}"}},"position":"0,140","title":"Set Workflow Output","transitions":[{"id":3010,"inputs":{},"position":"120,170 120,220","sourceConnector":"bottom","target":{"id":3000},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"send error email to admin","id":2996,"inputs":{},"position":"0,490","title":"Container","transitions":[{"id":3004,"inputs":{},"position":"120,610 120,710","sourceConnector":"bottom","target":{"id":2990}}]},{"action":"gcx:wf:core::Log","id":2998,"inputs":{"message":{"accessors":["$errorJson1"],"annotations":[{"count":11,"index":31,"kind":"idref"}],"code":"\"Error generating report: \" + $errorJson1.json","source":" \"Error generating report: \" + $errorJson1.json"}},"position":"0,360","title":"Log","transitions":[{"id":3006,"inputs":{},"position":"120,390 120,490","sourceConnector":"bottom","target":{"id":2996}}]},{"action":"gcx:wf:core::ConvertToJson","id":3000,"inputs":{"object":{"accessors":["$tryCatchSendConfirmationEmail"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$tryCatchSendConfirmationEmail.error","source":"$tryCatchSendConfirmationEmail.error"}},"name":"errorJson1","position":"0,220","title":"Convert To JSON","transitions":[{"id":3008,"inputs":{},"position":"120,290 120,360","sourceConnector":"bottom","target":{"id":2998},"targetConnector":"top"}]}]},{"id":3012,"steps":[{"id":3014,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3026,"inputs":{},"position":"90,60 90,110 100,110 100,130","target":{"id":3016}}]},{"action":"gcx:wf:core::CreateValue","id":3016,"inputs":{"expression":{"accessors":["$tryCatchSendConfirmationEmail"],"annotations":[{"count":30,"index":83,"kind":"idref"}],"code":"\"Can not send report comnfirmation email to user, report not generated. Error: \" + $tryCatchSendConfirmationEmail.error.message","source":"\"Can not send report comnfirmation email to user, report not generated. Error: \" + $tryCatchSendConfirmationEmail.error.message"}},"name":"errorMessage5","position":"-20,130","title":"Create Value","transitions":[{"id":3028,"inputs":{},"position":"100,200 100,260","sourceConnector":"bottom","target":{"id":3018},"targetConnector":"top"}]},{"action":"gcx:wf:core::FormatDate","id":3018,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate8","position":"-20,260","title":"Format Date","transitions":[{"id":3030,"inputs":{},"position":"100,330 100,390","sourceConnector":"bottom","target":{"id":3020},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":3020,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate8","$errorMessage5","$reportConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"}],"code":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate8.formatted).replace(\"{errorMessage}\", $errorMessage5.result).replace(\"{userEmail}\", $reportConfig.result.email)","source":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate8.formatted).replace(\"{errorMessage}\", $errorMessage5.result).replace(\"{userEmail}\", $reportConfig.result.email)"}},"name":"errorEmailSubject5","position":"-20,390","title":"Create Value","transitions":[{"id":3032,"inputs":{},"position":"100,460 100,530","sourceConnector":"bottom","target":{"id":3022}}]},{"action":"gcx:wf:core::CreateValue","id":3022,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate8","$errorMessage5","$reportConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"}],"code":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate8.formatted).replace(\"{errorMessage}\", $errorMessage5.result).replace(\"{userEmail}\", $reportConfig.result.email)","source":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate8.formatted).replace(\"{errorMessage}\", $errorMessage5.result).replace(\"{userEmail}\", $reportConfig.result.email)"}},"name":"errorEmailBody5","position":"-20,530","title":"Create Value","transitions":[{"id":3034,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":3024}}]},{"action":"gcx:wf:server::SendEmail","id":3024,"inputs":{"body":{"accessors":["$errorEmailBody5"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$errorEmailBody5.result","source":"$errorEmailBody5.result"},"from":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.fromEmail","source":"$AdminEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$errorEmailSubject5"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$errorEmailSubject5.result","source":"$errorEmailSubject5.result"},"to":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.adminEmail","source":"$AdminEmailConfig.result.adminEmail"}},"position":"-20,650","title":"Send Email"}]},{"id":3036,"steps":[{"action":"gcx:wf:core::If","id":949,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":25,"kind":"idref"},{"count":13,"index":58,"kind":"idref"},{"count":13,"index":94,"kind":"idref"},{"count":13,"index":135,"kind":"idref"},{"count":13,"index":181,"kind":"idref"}],"code":"$reportConfig == null || $reportConfig.result === null || $reportConfig.undefined === null || $reportConfig.result.reports === null || $reportConfig.result.reports === undefined || $reportConfig.result.reports.length <= 0","source":"$reportConfig == null || $reportConfig.result === null || $reportConfig.undefined === null || $reportConfig.result.reports === null || $reportConfig.result.reports === undefined || $reportConfig.result.reports.length <= 0"}},"position":"-130,360","title":"If","transitions":[{"branch":"true","id":953,"inputs":{},"position":"-130,390 -350,390 -350,450","sourceConnector":"left","target":{"id":951},"targetConnector":"top"},{"branch":"false","id":954,"inputs":{},"position":"-10,390 40,390 40,510","sourceConnector":"right","target":{"id":3052},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":951,"inputs":{"message":"Null reportConfig or reportConfig.result, or empty/empty reportConfig.result.reports found before loop forEachReportsForEstimateTime1"},"position":"-470,450","title":"Log","transitions":[{"id":955,"inputs":{},"position":"-350,480 -350,500 -100,500 -100,490 40,490 40,510","sourceConnector":"bottom","target":{"id":3052},"targetConnector":"top"}]},{"id":3038,"inputs":{},"position":"-30,-90","purpose":"start","title":"Try","transitions":[{"id":3054,"inputs":{},"position":"60,-30 60,30","sourceConnector":"bottom","target":{"id":3040},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3040,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":44,"kind":"idref"},{"count":13,"index":118,"kind":"idref"}],"code":"$reportConfig.result.titleReport != null && $reportConfig.result.titleReport.maxProcessingTimeInMins !== undefined && $reportConfig.result.titleReport.maxProcessingTimeInMins !== null","source":"$reportConfig.result.titleReport != null && $reportConfig.result.titleReport.maxProcessingTimeInMins !== undefined && $reportConfig.result.titleReport.maxProcessingTimeInMins !== null"}},"position":"0,30","title":"If","transitions":[{"branch":"true","id":3062,"inputs":{},"position":"0,60 -20,60 -20,205 -40,205","sourceConnector":"left","target":{"id":3050}},{"branch":"false","id":3064,"inputs":{},"position":"120,60 140,60 140,340 -70,340 -70,360","sourceConnector":"right","target":{"id":949},"targetConnector":"top"}]},{"action":"gcx:wf:core::FormatDate","id":3042,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate7","position":"-70,730","title":"Format Date","transitions":[{"id":3056,"inputs":{},"position":"50,800 50,860","sourceConnector":"bottom","target":{"id":3044},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":3044,"inputs":{"expression":{"accessors":["$confirmationEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate7","$estimatedProcessingTime"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":13,"index":71,"kind":"idref"},{"count":13,"index":128,"kind":"idref"},{"count":13,"index":187,"kind":"idref"},{"count":13,"index":246,"kind":"idref"},{"count":13,"index":302,"kind":"idref"},{"count":13,"index":358,"kind":"idref"},{"count":24,"index":420,"kind":"idref"}],"code":"$confirmationEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate7.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$confirmationEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate7.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"confirmationEmailSubject1","position":"-70,860","title":"Create Value","transitions":[{"id":3058,"inputs":{},"position":"50,930 50,1000","sourceConnector":"bottom","target":{"id":3046}}]},{"action":"gcx:wf:core::CreateValue","id":3046,"inputs":{"expression":{"accessors":["$confirmationEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate7","$estimatedProcessingTime"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":13,"index":71,"kind":"idref"},{"count":13,"index":128,"kind":"idref"},{"count":13,"index":187,"kind":"idref"},{"count":13,"index":246,"kind":"idref"},{"count":13,"index":302,"kind":"idref"},{"count":13,"index":358,"kind":"idref"},{"count":24,"index":420,"kind":"idref"}],"code":"$confirmationEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate7.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$confirmationEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate7.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"confirmationEmailBody1","position":"-70,1000","title":"Create Value","transitions":[{"id":3060,"inputs":{},"position":"50,1070 50,1120","sourceConnector":"bottom","target":{"id":3048}}]},{"action":"gcx:wf:server::SendEmail","id":3048,"inputs":{"body":{"accessors":["$confirmationEmailBody1"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$confirmationEmailBody1.result","source":"$confirmationEmailBody1.result"},"from":{"accessors":["$confirmationEmailConfig"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$confirmationEmailConfig.result.fromEmail","source":"$confirmationEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$confirmationEmailSubject1"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$confirmationEmailSubject1.result","source":"$confirmationEmailSubject1.result"},"to":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.email","source":"$reportConfig.result.email"}},"position":"-70,1120","title":"Send Email"},{"action":"gcx:wf:core::SetProperty","id":3050,"inputs":{"object":{"accessors":["$estimatedProcessingTime"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$estimatedProcessingTime","source":"$estimatedProcessingTime"},"propertyName":"result","propertyValue":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport.maxProcessingTimeInMins","source":"$reportConfig.result.titleReport.maxProcessingTimeInMins"}},"position":"-280,190","title":"Set Property","transitions":[{"id":3066,"inputs":{},"position":"-160,220 -160,340 -70,340 -70,360","sourceConnector":"bottom","target":{"id":949},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":3052,"inputs":{"items":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports","source":"$reportConfig.result.reports"}},"name":"forEachReportsForEstimateTime1","position":"-80,510","title":"For Each","transitions":[{"id":3068,"inputs":{},"position":"40,630 40,710 50,710 50,730","sourceConnector":"bottom","target":{"id":3042}}]}]},{"id":3070,"steps":[{"id":3072,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":3078,"inputs":{},"position":"90,60 90,100 100,100 100,120","target":{"id":3074}}]},{"action":"gcx:wf:core::If","id":3074,"inputs":{"condition":{"accessors":["$forEachReportsForEstimateTime1","$forEachReportsForEstimateTime1"],"annotations":[{"count":31,"index":0,"kind":"idref"},{"count":31,"index":73,"kind":"idref"}],"code":"$forEachReportsForEstimateTime1.item.maxProcessingTimeInMins !== null && $forEachReportsForEstimateTime1.item.maxProcessingTimeInMins !== undefined","source":"$forEachReportsForEstimateTime1.item.maxProcessingTimeInMins !== null && $forEachReportsForEstimateTime1.item.maxProcessingTimeInMins !== undefined"}},"position":"40,120","title":"If","transitions":[{"branch":"true","id":3080,"inputs":{},"position":"40,150 10,150 10,280","sourceConnector":"left","target":{"id":3076}}]},{"action":"gcx:wf:core::SetProperty","id":3076,"inputs":{"object":{"accessors":["$estimatedProcessingTime"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$estimatedProcessingTime","source":"$estimatedProcessingTime"},"propertyName":"result","propertyValue":{"accessors":["$estimatedProcessingTime","$forEachReportsForEstimateTime1"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":31,"index":34,"kind":"idref"}],"code":"$estimatedProcessingTime.result + $forEachReportsForEstimateTime1.item.maxProcessingTimeInMins","source":"$estimatedProcessingTime.result + $forEachReportsForEstimateTime1.item.maxProcessingTimeInMins"}},"position":"-110,280","title":"Set Property"}]},{"id":3082,"steps":[{"id":3084,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":3096,"inputs":{},"position":"90,60 90,120 100,120 100,140","sourceConnector":"bottom","target":{"id":3086},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetWorkflowOutput","id":3086,"inputs":{"name":"output","value":{"accessors":["$tryCatchGenerateReport"],"annotations":[{"count":23,"index":12,"kind":"idref"}],"code":"{\n    \"error\": $tryCatchGenerateReport.error\n}","source":"{\n  \"error\":$tryCatchGenerateReport.error\n}"}},"position":"-20,140","title":"Set Workflow Output","transitions":[{"id":3100,"inputs":{},"position":"100,170 100,220","sourceConnector":"bottom","target":{"id":3092},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"send error email to user","id":3088,"inputs":{},"position":"-20,460","title":"Container","transitions":[{"id":3098,"inputs":{},"position":"100,580 100,630","sourceConnector":"bottom","target":{"id":3090}}]},{"action":"gcx:wf:core::Container","description":"send error email to admin","id":3090,"inputs":{},"position":"-20,630","title":"Container"},{"action":"gcx:wf:core::ConvertToJson","id":3092,"inputs":{"object":{"accessors":["$tryCatchGenerateReport"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$tryCatchGenerateReport.error","source":"$tryCatchGenerateReport.error"}},"name":"errorJson","position":"-20,220","title":"Convert To JSON","transitions":[{"id":3104,"inputs":{},"position":"100,290 100,360","sourceConnector":"bottom","target":{"id":3094},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":3094,"inputs":{"message":{"accessors":["$errorJson"],"annotations":[{"count":10,"index":31,"kind":"idref"}],"code":"\"Error generating report: \" + $errorJson.json","source":" \"Error generating report: \" + $errorJson.json"}},"position":"-20,360","title":"Log","transitions":[{"id":3102,"inputs":{},"position":"100,390 100,460","sourceConnector":"bottom","target":{"id":3088}}]}]},{"id":3106,"steps":[{"id":3108,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3120,"inputs":{},"position":"90,60 90,110 100,110 100,130","target":{"id":3110}}]},{"action":"gcx:wf:core::CreateValue","id":3110,"inputs":{"expression":{"accessors":["$tryCatchGenerateReport"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$tryCatchGenerateReport.error.message","source":"$tryCatchGenerateReport.error.message"}},"name":"errorMessage2","position":"-20,130","title":"Create Value","transitions":[{"id":3122,"inputs":{},"position":"100,200 100,260","sourceConnector":"bottom","target":{"id":3112},"targetConnector":"top"}]},{"action":"gcx:wf:core::FormatDate","id":3112,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate4","position":"-20,260","title":"Format Date","transitions":[{"id":3124,"inputs":{},"position":"100,330 100,390","sourceConnector":"bottom","target":{"id":3114},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":3114,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate4","$errorMessage2","$reportConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"}],"code":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate4.formatted).replace(\"{errorMessage}\", $errorMessage2.result).replace(\"{userEmail}\", $reportConfig.result.email)","source":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate4.formatted).replace(\"{errorMessage}\", $errorMessage2.result).replace(\"{userEmail}\", $reportConfig.result.email)"}},"name":"errorEmailSubject2","position":"-20,390","title":"Create Value","transitions":[{"id":3126,"inputs":{},"position":"100,460 100,530","sourceConnector":"bottom","target":{"id":3118}}]},{"action":"gcx:wf:server::SendEmail","id":3116,"inputs":{"body":{"accessors":["$errorEmailBody2"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$errorEmailBody2.result","source":"$errorEmailBody2.result"},"from":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.fromEmail","source":"$AdminEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$errorEmailSubject2"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$errorEmailSubject2.result","source":"$errorEmailSubject2.result"},"to":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.adminEmail","source":"$AdminEmailConfig.result.adminEmail"}},"position":"-20,650","title":"Send Email"},{"action":"gcx:wf:core::CreateValue","id":3118,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate4","$errorMessage2","$reportConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"}],"code":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate4.formatted).replace(\"{errorMessage}\", $errorMessage2.result).replace(\"{userEmail}\", $reportConfig.result.email)","source":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate4.formatted).replace(\"{errorMessage}\", $errorMessage2.result).replace(\"{userEmail}\", $reportConfig.result.email)"}},"name":"errorEmailBody2","position":"-20,530","title":"Create Value","transitions":[{"id":3128,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":3116}}]}]},{"id":3130,"steps":[{"action":"gcx:wf:core::Log","id":939,"inputs":{"message":{"accessors":["$reportConfig","$tryCatchGenerateReport"],"annotations":[{"count":13,"index":22,"kind":"idref"},{"count":23,"index":94,"kind":"idref"}],"code":"\"Error generating \" + $reportConfig.result.reportName + \" report. with message collected: \" + $tryCatchGenerateReport.error.message","source":"\"Error generating \" + $reportConfig.result.reportName + \" report. with message collected: \" + $tryCatchGenerateReport.error.message"}},"position":"-300,10","title":"Log","transitions":[{"id":940,"inputs":{},"position":"-180,40 -180,110 100,110 100,130","sourceConnector":"bottom","target":{"id":3134},"targetConnector":"top"}]},{"id":3132,"inputs":{},"position":"0,-140","purpose":"start","title":"Container","transitions":[{"id":3144,"inputs":{},"position":"0,-110 -180,-110 -180,10","target":{"id":939},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":3134,"inputs":{"expression":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":22,"kind":"idref"}],"code":"\"Error generating \" + $reportConfig.result.reportName + \" report. Please contact your system administrator for more details.\"","source":"\"Error generating \" + $reportConfig.result.reportName + \" report. Please contact your system administrator for more details.\""}},"name":"errorMessage","position":"-20,130","title":"Create Value","transitions":[{"id":3146,"inputs":{},"position":"100,200 100,260","sourceConnector":"bottom","target":{"id":3136},"targetConnector":"top"}]},{"action":"gcx:wf:core::FormatDate","id":3136,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate1","position":"-20,260","title":"Format Date","transitions":[{"id":3148,"inputs":{},"position":"100,330 100,390","sourceConnector":"bottom","target":{"id":3140},"targetConnector":"top"}]},{"action":"gcx:wf:server::SendEmail","id":3138,"inputs":{"body":{"accessors":["$errorEmailBody"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$errorEmailBody.result","source":"$errorEmailBody.result"},"from":{"accessors":["$ErrorEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$ErrorEmailConfig.result.fromEmail","source":"$ErrorEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$errorEmailSubject"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$errorEmailSubject.result","source":"$errorEmailSubject.result"},"to":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.email","source":"$reportConfig.result.email"}},"position":"-20,650","title":"Send Email"},{"action":"gcx:wf:core::CreateValue","id":3140,"inputs":{"expression":{"accessors":["$ErrorEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate1","$errorMessage"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":13,"index":402,"kind":"idref"}],"code":"$ErrorEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate1.formatted).replace(\"{errorMessage}\", $errorMessage.result)","source":"$ErrorEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate1.formatted).replace(\"{errorMessage}\", $errorMessage.result)"}},"name":"errorEmailSubject","position":"-20,390","title":"Create Value","transitions":[{"id":3150,"inputs":{},"position":"100,460 100,530","sourceConnector":"bottom","target":{"id":3142}}]},{"action":"gcx:wf:core::CreateValue","id":3142,"inputs":{"expression":{"accessors":["$ErrorEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate1","$errorMessage"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":13,"index":402,"kind":"idref"}],"code":"$ErrorEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate1.formatted).replace(\"{errorMessage}\", $errorMessage.result)","source":"$ErrorEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate1.formatted).replace(\"{errorMessage}\", $errorMessage.result)"}},"name":"errorEmailBody","position":"-20,530","title":"Create Value","transitions":[{"id":3152,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":3138}}]}]},{"id":3154,"steps":[{"id":3156,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":3170,"inputs":{},"position":"90,60 90,140 100,140 100,160","sourceConnector":"bottom","target":{"id":3158}}]},{"action":"gcx:wf:core::Log","id":3158,"inputs":{"message":"Start collect sub reports"},"position":"-20,160","title":"Log","transitions":[{"id":3176,"inputs":{},"position":"100,190 100,240 90,240 90,260","sourceConnector":"bottom","target":{"id":3160}}]},{"action":"gcx:wf:core::Container","description":"Collect Title report and Sub Reports","id":3160,"inputs":{},"position":"-30,260","title":"Container","transitions":[{"id":3172,"inputs":{},"position":"90,400 90,460","sourceConnector":"bottom","target":{"id":3162},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":3162,"inputs":{"message":"Start merge reports"},"position":"-30,460","title":"Log","transitions":[{"id":3178,"inputs":{},"position":"90,490 90,550","sourceConnector":"bottom","target":{"id":3166},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"email reports","id":3164,"inputs":{},"position":"-30,840","title":"Container"},{"action":"gcx:wf:core::Container","description":"Merge reports","id":3166,"inputs":{},"position":"-30,550","title":"Container","transitions":[{"id":3174,"inputs":{},"position":"90,670 90,750","sourceConnector":"bottom","target":{"id":3168},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":3168,"inputs":{"message":"Start email reports"},"position":"-30,750","title":"Log","transitions":[{"id":3180,"inputs":{},"position":"90,780 90,840","sourceConnector":"bottom","target":{"id":3164}}]}]},{"id":3182,"steps":[{"id":3184,"inputs":{},"position":"0,-160","purpose":"start","title":"Container","transitions":[{"id":3194,"inputs":{},"position":"90,-100 90,-20","target":{"id":3186}}]},{"action":"gcx:wf:core::If","id":3186,"inputs":{"condition":{"accessors":["$subReports","$subReports","$subReports"],"annotations":[{"count":11,"index":1,"kind":"idref"},{"count":11,"index":24,"kind":"idref"},{"count":11,"index":54,"kind":"idref"}],"code":"$subReports != null && $subReports.result != null && $subReports.result.length > 0","source":" $subReports != null && $subReports.result != null && $subReports.result.length > 0"}},"position":"30,-20","title":"If","transitions":[{"branch":"false","id":3196,"inputs":{},"position":"150,10 250,10 250,45 270,45","sourceConnector":"right","target":{"id":3188},"targetConnector":"left"},{"branch":"true","id":3198,"inputs":{},"position":"30,10 -100,10 -100,400","sourceConnector":"left","target":{"id":3190},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetWorkflowOutput","id":3188,"inputs":{"name":"output","value":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"No sub report collected\"\n}","source":"{\n  \"error\":\"No sub report collected\"\n}"}},"position":"270,30","title":"Set Workflow Output","transitions":[{"id":3200,"inputs":{},"position":"390,60 390,150","sourceConnector":"bottom","target":{"id":3192},"targetConnector":"top"}]},{"action":"gcx:wf:pdf::MergePdfs","id":3190,"inputs":{"sources":{"accessors":["$subReports"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$subReports.result","source":"$subReports.result"}},"name":"mergeFinalPdfsReport","position":"-220,400","title":"Merge PDFs"},{"action":"gcx:wf:core::Log","id":3192,"inputs":{"message":{"accessors":[],"code":" \"Error generating report, no sub reports collected\"","source":" \"Error generating report, no sub reports collected\""}},"position":"270,150","title":"Log"}]},{"id":3202,"steps":[{"id":3204,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3224,"inputs":{},"position":"0,30 -170,30 -170,0 -310,0 -310,20","target":{"id":3206},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetWorkflowOutput","id":3206,"inputs":{"name":"output","value":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result","source":"$reportConfig.result"}},"position":"-430,20","title":"Set Workflow Output","transitions":[{"id":3228,"inputs":{},"position":"-310,50 -310,100","sourceConnector":"bottom","target":{"id":3208},"targetConnector":"top"}]},{"action":"gcx:wf:core::ConvertToJson","id":3208,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result","source":"$reportConfig.result"}},"name":"json1","position":"-430,100","title":"Convert To JSON","transitions":[{"id":3226,"inputs":{},"position":"-310,170 -310,220","sourceConnector":"bottom","target":{"id":3210}}]},{"action":"gcx:wf:core::Log","id":3210,"inputs":{"message":{"accessors":["$json1"],"annotations":[{"count":6,"index":26,"kind":"idref"}],"code":"\"Report summary json: \" + $json1.json","source":"\"Report summary json: \" + $json1.json"}},"position":"-430,220","title":"Log","transitions":[{"id":3236,"inputs":{},"position":"-310,250 -310,300","sourceConnector":"bottom","target":{"id":3220}}]},{"action":"gcx:wf:server::CreateEmailAttachment","id":3212,"inputs":{"content":{"accessors":["$mergeFinalPdfsReport"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$mergeFinalPdfsReport.result","source":"$mergeFinalPdfsReport.result"},"contentType":"application/pdf","filename":"report.pdf"},"name":"createReportAttachment","position":"-410,600","title":"Create Email Attachment","transitions":[{"id":3230,"inputs":{},"position":"-290,670 -290,740","sourceConnector":"bottom","target":{"id":3214}}]},{"action":"gcx:wf:core::Container","description":"Send successful email","id":3214,"inputs":{},"position":"-410,740","title":"Container"},{"action":"gcx:wf:core::If","id":3216,"inputs":{"condition":{"accessors":["$mergeFinalPdfsReport","$mergeFinalPdfsReport","$mergeFinalPdfsReport"],"annotations":[{"count":21,"index":0,"kind":"idref"},{"count":21,"index":33,"kind":"idref"},{"count":21,"index":73,"kind":"idref"}],"code":"$mergeFinalPdfsReport != null && $mergeFinalPdfsReport.result != null && $mergeFinalPdfsReport.totalPages > 0","source":"$mergeFinalPdfsReport != null && $mergeFinalPdfsReport.result != null && $mergeFinalPdfsReport.totalPages > 0"}},"position":"-340,470","title":"If","transitions":[{"branch":"true","id":3232,"inputs":{},"position":"-340,500 -360,500 -360,580 -290,580 -290,600","sourceConnector":"left","target":{"id":3212}},{"branch":"false","id":3234,"inputs":{},"position":"-220,500 30,500","sourceConnector":"right","target":{"id":3218},"targetConnector":"left"}]},{"action":"gcx:wf:core::Container","description":"send error email to user","id":3218,"inputs":{},"position":"30,440","title":"Container","transitions":[{"id":3240,"inputs":{},"position":"270,500 360,500","sourceConnector":"right","target":{"id":3222}}]},{"action":"gcx:wf:core::Container","description":"Collect error messages if any","id":3220,"inputs":{},"position":"-430,300","title":"Container","transitions":[{"id":3238,"inputs":{},"position":"-310,420 -310,450 -280,450 -280,470","sourceConnector":"bottom","target":{"id":3216},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"send error email to admin","id":3222,"inputs":{},"position":"360,440","title":"Container"}]},{"id":3242,"steps":[{"action":"gcx:wf:core::SetProperty","id":3244,"inputs":{"object":{"accessors":["$errorMessage3"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$errorMessage3","source":"$errorMessage3"},"propertyName":"result","propertyValue":{"accessors":["$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$finalErrorMessages.result","source":"$finalErrorMessages.result"}},"position":"-320,220","title":"Set Property","transitions":[{"id":3260,"inputs":{},"position":"-200,250 -200,295 -20,295","sourceConnector":"bottom","target":{"id":3246}}]},{"action":"gcx:wf:core::FormatDate","id":3246,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate5","position":"-20,260","title":"Format Date","transitions":[{"id":3274,"inputs":{},"position":"100,330 100,390","sourceConnector":"bottom","target":{"id":3254},"targetConnector":"top"}]},{"id":3248,"inputs":{},"position":"0,-80","purpose":"start","title":"Container","transitions":[{"id":3262,"inputs":{},"position":"0,-50 -40,-50 -40,45 -20,45","target":{"id":3250}}]},{"action":"gcx:wf:core::CreateValue","id":3250,"inputs":{"expression":"Can not generate report"},"name":"errorMessage3","position":"-20,10","title":"Create Value","transitions":[{"id":3264,"inputs":{},"position":"100,80 100,110 -10,110 -10,130","sourceConnector":"bottom","target":{"id":3252},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3252,"inputs":{"condition":{"accessors":["$finalErrorMessages","$finalErrorMessages","$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":39,"kind":"idref"},{"count":19,"index":83,"kind":"idref"}],"code":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0","source":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0"}},"position":"-70,130","title":"If","transitions":[{"branch":"true","id":3270,"inputs":{},"position":"-70,160 -200,160 -200,220","sourceConnector":"left","target":{"id":3244},"targetConnector":"top"},{"branch":"false","id":3272,"inputs":{},"position":"50,160 100,160 100,260","sourceConnector":"right","target":{"id":3246}}]},{"action":"gcx:wf:core::CreateValue","id":3254,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate5","$errorMessage3","$reportConfig","$estimatedProcessingTime"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"},{"count":24,"index":513,"kind":"idref"}],"code":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate5.formatted).replace(\"{errorMessage}\", $errorMessage3.result).replace(\"{userEmail}\", $reportConfig.result.email).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate5.formatted).replace(\"{errorMessage}\", $errorMessage3.result).replace(\"{userEmail}\", $reportConfig.result.email).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"errorEmailSubject3","position":"-20,390","title":"Create Value","transitions":[{"id":3266,"inputs":{},"position":"100,460 100,530","sourceConnector":"bottom","target":{"id":3256}}]},{"action":"gcx:wf:core::CreateValue","id":3256,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate5","$errorMessage3","$reportConfig","$estimatedProcessingTime"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"},{"count":24,"index":513,"kind":"idref"}],"code":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate5.formatted).replace(\"{errorMessage}\", $errorMessage3.result).replace(\"{userEmail}\", $reportConfig.result.email).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate5.formatted).replace(\"{errorMessage}\", $errorMessage3.result).replace(\"{userEmail}\", $reportConfig.result.email).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"errorEmailBody3","position":"-20,530","title":"Create Value","transitions":[{"id":3268,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":3258}}]},{"action":"gcx:wf:server::SendEmail","id":3258,"inputs":{"body":{"accessors":["$errorEmailBody3"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$errorEmailBody3.result","source":"$errorEmailBody3.result"},"from":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.fromEmail","source":"$AdminEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$errorEmailSubject3"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$errorEmailSubject3.result","source":"$errorEmailSubject3.result"},"to":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.adminEmail","source":"$AdminEmailConfig.result.adminEmail"}},"position":"-20,650","title":"Send Email"}]},{"id":3276,"steps":[{"id":3278,"inputs":{},"position":"0,-80","purpose":"start","title":"Container","transitions":[{"id":3294,"inputs":{},"position":"0,-50 -40,-50 -40,45 -20,45","target":{"id":3280}}]},{"action":"gcx:wf:core::CreateValue","id":3280,"inputs":{"expression":"Can not generate report"},"name":"errorMessage1","position":"-20,10","title":"Create Value","transitions":[{"id":3298,"inputs":{},"position":"100,80 100,110 -10,110 -10,130","sourceConnector":"bottom","target":{"id":3286},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":3282,"inputs":{"expression":{"accessors":["$ErrorEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate3","$errorMessage1","$estimatedProcessingTime"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":24,"index":462,"kind":"idref"}],"code":"$ErrorEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate3.formatted).replace(\"{errorMessage}\", $errorMessage1.result).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$ErrorEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate3.formatted).replace(\"{errorMessage}\", $errorMessage1.result).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"errorEmailSubject1","position":"-20,390","title":"Create Value","transitions":[{"id":3296,"inputs":{},"position":"100,460 100,530","sourceConnector":"bottom","target":{"id":3284}}]},{"action":"gcx:wf:core::CreateValue","id":3284,"inputs":{"expression":{"accessors":["$ErrorEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate3","$errorMessage1","$estimatedProcessingTime"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":24,"index":462,"kind":"idref"}],"code":"$ErrorEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate3.formatted).replace(\"{errorMessage}\", $errorMessage1.result).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$ErrorEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate3.formatted).replace(\"{errorMessage}\", $errorMessage1.result).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"errorEmailBody1","position":"-20,530","title":"Create Value","transitions":[{"id":3300,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":3288}}]},{"action":"gcx:wf:core::If","id":3286,"inputs":{"condition":{"accessors":["$finalErrorMessages","$finalErrorMessages","$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":39,"kind":"idref"},{"count":19,"index":83,"kind":"idref"}],"code":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0","source":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0"}},"position":"-70,130","title":"If","transitions":[{"branch":"true","id":3304,"inputs":{},"position":"-70,160 -200,160 -200,220","sourceConnector":"left","target":{"id":3292},"targetConnector":"top"},{"branch":"false","id":3306,"inputs":{},"position":"50,160 100,160 100,260","sourceConnector":"right","target":{"id":3290}}]},{"action":"gcx:wf:server::SendEmail","id":3288,"inputs":{"body":{"accessors":["$errorEmailBody1"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$errorEmailBody1.result","source":"$errorEmailBody1.result"},"from":{"accessors":["$ErrorEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$ErrorEmailConfig.result.fromEmail","source":"$ErrorEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$errorEmailSubject1"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$errorEmailSubject1.result","source":"$errorEmailSubject1.result"},"to":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.email","source":"$reportConfig.result.email"}},"position":"-20,650","title":"Send Email"},{"action":"gcx:wf:core::FormatDate","id":3290,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate3","position":"-20,260","title":"Format Date","transitions":[{"id":3302,"inputs":{},"position":"100,330 100,390","sourceConnector":"bottom","target":{"id":3282},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3292,"inputs":{"object":{"accessors":["$errorMessage1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$errorMessage1","source":"$errorMessage1"},"propertyName":"result","propertyValue":{"accessors":["$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$finalErrorMessages.result","source":"$finalErrorMessages.result"}},"position":"-320,220","title":"Set Property","transitions":[{"id":3308,"inputs":{},"position":"-200,250 -200,295 -20,295","sourceConnector":"bottom","target":{"id":3290}}]}]},{"id":3310,"steps":[{"id":3312,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3328,"inputs":{},"position":"90,60 90,140 80,140 80,160","target":{"id":3314}}]},{"action":"gcx:wf:core::FormatDate","id":3314,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate2","position":"-40,160","title":"Format Date","transitions":[{"id":3330,"inputs":{},"position":"80,230 80,290","sourceConnector":"bottom","target":{"id":3316},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":3316,"inputs":{"expression":{"accessors":["$FinalReportEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate2","$estimatedProcessingTime"],"annotations":[{"count":23,"index":0,"kind":"idref"},{"count":13,"index":70,"kind":"idref"},{"count":13,"index":127,"kind":"idref"},{"count":13,"index":186,"kind":"idref"},{"count":13,"index":245,"kind":"idref"},{"count":13,"index":301,"kind":"idref"},{"count":13,"index":357,"kind":"idref"},{"count":24,"index":419,"kind":"idref"}],"code":"$FinalReportEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate2.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$FinalReportEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate2.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"successfulEmailSubject","position":"-40,290","title":"Create Value","transitions":[{"id":3332,"inputs":{},"position":"80,360 80,430","sourceConnector":"bottom","target":{"id":3318}}]},{"action":"gcx:wf:core::CreateValue","id":3318,"inputs":{"expression":{"accessors":["$FinalReportEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate2","$estimatedProcessingTime"],"annotations":[{"count":23,"index":0,"kind":"idref"},{"count":13,"index":70,"kind":"idref"},{"count":13,"index":127,"kind":"idref"},{"count":13,"index":186,"kind":"idref"},{"count":13,"index":245,"kind":"idref"},{"count":13,"index":301,"kind":"idref"},{"count":13,"index":357,"kind":"idref"},{"count":24,"index":419,"kind":"idref"}],"code":"$FinalReportEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate2.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$FinalReportEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate2.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"successfulEmailBody","position":"-40,430","title":"Create Value","transitions":[{"id":3334,"inputs":{},"position":"80,500 80,560","sourceConnector":"bottom","target":{"id":3320},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3320,"inputs":{"condition":{"accessors":["$finalErrorMessages","$finalErrorMessages","$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":39,"kind":"idref"},{"count":19,"index":83,"kind":"idref"}],"code":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0","source":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0"}},"position":"20,560","title":"If","transitions":[{"branch":"false","id":3336,"inputs":{},"position":"140,590 160,590 160,850 70,850 70,870","sourceConnector":"right","target":{"id":3322},"targetConnector":"top"},{"branch":"true","id":3338,"inputs":{},"position":"20,590 -110,590 -110,650","sourceConnector":"left","target":{"id":3324},"targetConnector":"top"}]},{"action":"gcx:wf:server::SendEmail","description":"Send email to user","id":3322,"inputs":{"attachments":{"accessors":["$createReportAttachment"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$createReportAttachment.result","source":"$createReportAttachment.result"},"body":{"accessors":["$successfulEmailBody"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$successfulEmailBody.result","source":"$successfulEmailBody.result"},"from":{"accessors":["$FinalReportEmailConfig"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$FinalReportEmailConfig.result.fromEmail","source":"$FinalReportEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$successfulEmailSubject"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$successfulEmailSubject.result","source":"$successfulEmailSubject.result"},"to":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.email","source":"$reportConfig.result.email"}},"position":"-50,870","title":"Send Email"},{"action":"gcx:wf:core::SetProperty","id":3324,"inputs":{"object":{"accessors":["$successfulEmailBody"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$successfulEmailBody","source":"$successfulEmailBody"},"propertyName":"result","propertyValue":{"accessors":["$successfulEmailBody","$FinalReportEmailConfig","$finalErrorMessages"],"annotations":[{"count":20,"index":0,"kind":"idref"},{"count":23,"index":30,"kind":"idref"},{"count":19,"index":92,"kind":"idref"}],"code":"$successfulEmailBody.result + $FinalReportEmailConfig.result.partialSubReportErrorMessage + $finalErrorMessages.result","source":"$successfulEmailBody.result + $FinalReportEmailConfig.result.partialSubReportErrorMessage + $finalErrorMessages.result"}},"position":"-230,650","title":"Set Property","transitions":[{"id":3340,"inputs":{},"position":"-110,680 -110,710 -280,710 -280,730","sourceConnector":"bottom","target":{"id":3326},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"report error to admin if any","id":3326,"inputs":{},"position":"-400,730","title":"Container","transitions":[{"id":3342,"inputs":{},"position":"-280,850 -280,905 -50,905","sourceConnector":"bottom","target":{"id":3322}}]}]},{"id":3344,"steps":[{"action":"gcx:wf:core::SetProperty","id":3346,"inputs":{"object":{"accessors":["$errorMessage4"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$errorMessage4","source":"$errorMessage4"},"propertyName":"result","propertyValue":{"accessors":["$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$finalErrorMessages.result","source":"$finalErrorMessages.result"}},"position":"-320,220","title":"Set Property","transitions":[{"id":3362,"inputs":{},"position":"-200,250 -200,295 -20,295","sourceConnector":"bottom","target":{"id":3348}}]},{"action":"gcx:wf:core::FormatDate","id":3348,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate6","position":"-20,260","title":"Format Date","transitions":[{"id":3376,"inputs":{},"position":"100,330 100,390","sourceConnector":"bottom","target":{"id":3356},"targetConnector":"top"}]},{"id":3350,"inputs":{},"position":"0,-80","purpose":"start","title":"Container","transitions":[{"id":3364,"inputs":{},"position":"0,-50 -40,-50 -40,45 -20,45","target":{"id":3352}}]},{"action":"gcx:wf:core::CreateValue","id":3352,"inputs":{"expression":"Can not generate report"},"name":"errorMessage4","position":"-20,10","title":"Create Value","transitions":[{"id":3366,"inputs":{},"position":"100,80 100,110 -10,110 -10,130","sourceConnector":"bottom","target":{"id":3354},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3354,"inputs":{"condition":{"accessors":["$finalErrorMessages","$finalErrorMessages","$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":39,"kind":"idref"},{"count":19,"index":83,"kind":"idref"}],"code":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0","source":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0"}},"position":"-70,130","title":"If","transitions":[{"branch":"true","id":3372,"inputs":{},"position":"-70,160 -200,160 -200,220","sourceConnector":"left","target":{"id":3346},"targetConnector":"top"},{"branch":"false","id":3374,"inputs":{},"position":"50,160 100,160 100,260","sourceConnector":"right","target":{"id":3348}}]},{"action":"gcx:wf:core::CreateValue","id":3356,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate6","$errorMessage4","$reportConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"}],"code":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate6.formatted).replace(\"{errorMessage}\", $errorMessage4.result).replace(\"{userEmail}\", $reportConfig.result.email)","source":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate6.formatted).replace(\"{errorMessage}\", $errorMessage4.result).replace(\"{userEmail}\", $reportConfig.result.email)"}},"name":"errorEmailSubject4","position":"-20,390","title":"Create Value","transitions":[{"id":3368,"inputs":{},"position":"100,460 100,530","sourceConnector":"bottom","target":{"id":3358}}]},{"action":"gcx:wf:core::CreateValue","id":3358,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate6","$errorMessage4","$reportConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"}],"code":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate6.formatted).replace(\"{errorMessage}\", $errorMessage4.result).replace(\"{userEmail}\", $reportConfig.result.email)","source":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate6.formatted).replace(\"{errorMessage}\", $errorMessage4.result).replace(\"{userEmail}\", $reportConfig.result.email)"}},"name":"errorEmailBody4","position":"-20,530","title":"Create Value","transitions":[{"id":3370,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":3360}}]},{"action":"gcx:wf:server::SendEmail","id":3360,"inputs":{"body":{"accessors":["$errorEmailBody4"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$errorEmailBody4.result","source":"$errorEmailBody4.result"},"from":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.fromEmail","source":"$AdminEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$errorEmailSubject4"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$errorEmailSubject4.result","source":"$errorEmailSubject4.result"},"to":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.adminEmail","source":"$AdminEmailConfig.result.adminEmail"}},"position":"-20,650","title":"Send Email"}]},{"id":3378,"steps":[{"id":3380,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3394,"inputs":{},"position":"90,60 90,130","target":{"id":3382}}]},{"action":"gcx:wf:core::CreateValue","id":3382,"inputs":{"expression":{"accessors":[],"code":"\"\"","source":"\"\""}},"name":"finalErrorMessages","position":"-30,130","title":"Create Value","transitions":[{"id":3396,"inputs":{},"position":"90,200 90,250 80,250 80,270","sourceConnector":"bottom","target":{"id":3384}}]},{"action":"gcx:wf:core::If","id":3384,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":44,"kind":"idref"}],"code":"$reportConfig.result.titleReport != null && $reportConfig.result.titleReport.error != null","source":"$reportConfig.result.titleReport != null && $reportConfig.result.titleReport.error != null"}},"position":"20,270","title":"If","transitions":[{"branch":"true","id":3398,"inputs":{},"position":"20,300 -60,300 -60,380","sourceConnector":"left","target":{"id":3386},"targetConnector":"top"},{"branch":"false","id":3400,"inputs":{},"position":"140,300 160,300 160,480 120,480 120,500","sourceConnector":"right","target":{"id":3388},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3386,"inputs":{"object":{"accessors":["$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$finalErrorMessages","source":"$finalErrorMessages"},"propertyName":"result","propertyValue":{"accessors":["$finalErrorMessages","$reportConfig"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":13,"index":52,"kind":"idref"}],"code":"$finalErrorMessages.result + \"<li>Title Report: \" + $reportConfig.result.titleReport.error.error + \"</li>\"","source":"$finalErrorMessages.result + \"<li>Title Report: \" + $reportConfig.result.titleReport.error.error + \"</li>\""}},"position":"-180,380","title":"Set Property","transitions":[{"id":3404,"inputs":{},"position":"-60,410 -60,480 120,480 120,500","sourceConnector":"bottom","target":{"id":3388},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":3388,"inputs":{"expression":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports.filter(function (x) { return x.error != null; })","source":"$reportConfig.result.reports.filter(x => x.error != null)"}},"name":"errorSubReports","position":"0,500","title":"Create Value","transitions":[{"id":3406,"inputs":{},"position":"120,570 120,650","sourceConnector":"bottom","target":{"id":3390},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3390,"inputs":{"condition":{"accessors":["$errorSubReports","$errorSubReports","$errorSubReports"],"annotations":[{"count":16,"index":0,"kind":"idref"},{"count":16,"index":28,"kind":"idref"},{"count":16,"index":63,"kind":"idref"}],"code":"$errorSubReports != null && $errorSubReports.result != null && $errorSubReports.result.length > 0","source":"$errorSubReports != null && $errorSubReports.result != null && $errorSubReports.result.length > 0"}},"position":"60,650","title":"If","transitions":[{"branch":"true","id":3402,"inputs":{},"position":"60,680 40,680 40,740 120,740 120,760","sourceConnector":"left","target":{"id":3392},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":3392,"inputs":{"items":{"accessors":["$errorSubReports"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$errorSubReports.result","source":"$errorSubReports.result"}},"name":"forEachSubReportError","position":"0,760","title":"For Each"}]},{"id":3408,"steps":[{"id":3410,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":3414,"inputs":{},"position":"90,60 90,120 100,120 100,140","sourceConnector":"bottom","target":{"id":3412},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3412,"inputs":{"object":{"accessors":["$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$finalErrorMessages","source":"$finalErrorMessages"},"propertyName":"result","propertyValue":{"accessors":["$finalErrorMessages","$forEachSubReportError","$forEachSubReportError"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":22,"index":38,"kind":"idref"},{"count":22,"index":80,"kind":"idref"}],"code":"$finalErrorMessages.result + \"<li>\" + $forEachSubReportError.item.name + \": \" + $forEachSubReportError.item.error.error + \"</li>\"","source":"$finalErrorMessages.result + \"<li>\" + $forEachSubReportError.item.name + \": \" + $forEachSubReportError.item.error.error + \"</li>\""}},"position":"-20,140","title":"Set Property"}]},{"id":3416,"steps":[{"id":3418,"inputs":{},"position":"0,-310","purpose":"start","title":"Container","transitions":[{"id":3430,"inputs":{},"position":"90,-250 90,-220","sourceConnector":"bottom","target":{"id":3420}}]},{"action":"gcx:wf:core::CreateValue","id":3420,"inputs":{"expression":{"accessors":[],"annotations":[],"code":"[]","source":"[]"}},"name":"subReports","position":"-30,-220","title":"Create Value","transitions":[{"id":3438,"inputs":{},"position":"90,-150 90,-120","sourceConnector":"bottom","target":{"id":3428}}]},{"action":"gcx:wf:core:loop:ForEach","description":"Start gp task for each report to collect data","id":3422,"inputs":{"items":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports","source":"$reportConfig.result.reports"}},"name":"forEachreportToStart","position":"-30,40","title":"For Each","transitions":[{"id":3432,"inputs":{},"position":"90,210 90,290","sourceConnector":"bottom","target":{"id":3424}}]},{"action":"gcx:wf:core::Container","description":"Check and Collect report data from GP task","id":3424,"inputs":{},"position":"-30,290","title":"Container","transitions":[{"id":3434,"inputs":{},"position":"90,430 90,590","sourceConnector":"bottom","target":{"id":3426}}]},{"action":"gcx:wf:core::Container","description":"Generate sub reports","id":3426,"inputs":{},"position":"-30,590","title":"Container"},{"action":"gcx:wf:core::Container","description":"Collect Title Report\n","id":3428,"inputs":{},"position":"-30,-120","title":"Collect Title Report","transitions":[{"id":3436,"inputs":{},"position":"90,0 90,40","sourceConnector":"bottom","target":{"id":3422}}]}]},{"id":3440,"steps":[{"id":3442,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3454,"inputs":{},"position":"90,60 90,120 80,120 80,140","target":{"id":3444}}]},{"action":"gcx:wf:core::If","id":3444,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig","$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":44,"kind":"idref"},{"count":13,"index":99,"kind":"idref"},{"count":13,"index":159,"kind":"idref"}],"code":"$reportConfig.result.titleReport != null && $reportConfig.result.titleReport.reportUrl !== null && $reportConfig.result.titleReport.reportUrl !== undefined && $reportConfig.result.titleReport.reportUrl.length > 0","source":"$reportConfig.result.titleReport != null && $reportConfig.result.titleReport.reportUrl !== null && $reportConfig.result.titleReport.reportUrl !== undefined && $reportConfig.result.titleReport.reportUrl.length > 0"}},"position":"20,140","title":"If","transitions":[{"branch":"false","id":3456,"inputs":{},"position":"140,170 300,170 300,270","sourceConnector":"right","target":{"id":3446},"targetConnector":"top"},{"branch":"true","id":3458,"inputs":{},"position":"20,170 -330,170 -330,280","sourceConnector":"left","target":{"id":3448},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":3446,"inputs":{"message":{"accessors":[],"code":" \"The report submitted does not contain a title report configuration, or its report url is invalid\"","source":" \"The report submitted does not contain a title report configuration, or its report url is invalid\""}},"position":"180,270","title":"Log","transitions":[{"id":3460,"inputs":{},"position":"300,300 300,380","sourceConnector":"bottom","target":{"id":3450},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":3448,"inputs":{},"name":"tryCatchGenerateTitleReport","position":"-450,280","title":"Try Catch"},{"action":"gcx:wf:core::If","id":3450,"inputs":{"condition":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport != null","source":"$reportConfig.result.titleReport != null"}},"position":"240,380","title":"If","transitions":[{"branch":"true","id":3462,"inputs":{},"position":"240,410 220,410 220,615 340,615","sourceConnector":"left","target":{"id":3452}}]},{"action":"gcx:wf:core::SetProperty","id":3452,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport","source":"$reportConfig.result.titleReport"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"The report submitted does not contain a title report configuration, or its report url is invalid\"\n}","source":"{\n  \"error\": \"The report submitted does not contain a title report configuration, or its report url is invalid\"\n}"}},"position":"340,600","title":"Set Property"}]},{"id":3464,"steps":[{"id":3466,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":3474,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":3468},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3468,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport","source":"$reportConfig.result.titleReport"},"propertyName":"error","propertyValue":{"accessors":["$tryCatchGenerateTitleReport"],"annotations":[{"count":28,"index":49,"kind":"idref"}],"code":"{\n    \"error\": \"Error generating title report: \" + $tryCatchGenerateTitleReport.error.message\n}","source":"{\n  \"error\": \"Error generating title report: \" + $tryCatchGenerateTitleReport.error.message\n}"}},"position":"-30,130","title":"Set Property","transitions":[{"id":3476,"inputs":{},"position":"90,160 90,220","sourceConnector":"bottom","target":{"id":3470}}]},{"action":"gcx:wf:core::ConvertToJson","id":3470,"inputs":{"object":{"accessors":["$tryCatchGenerateTitleReport"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$tryCatchGenerateTitleReport.error","source":"$tryCatchGenerateTitleReport.error"}},"name":"json2","position":"-30,220","title":"Convert To JSON","transitions":[{"id":3478,"inputs":{},"position":"90,290 90,340","sourceConnector":"bottom","target":{"id":3472}}]},{"action":"gcx:wf:core::Log","id":3472,"inputs":{"message":{"accessors":["$json2"],"annotations":[{"count":6,"index":35,"kind":"idref"}],"code":"\"Error generate title report: \" + $json2.json","source":" \"Error generate title report: \" + $json2.json"}},"position":"-30,340","title":"Log"}]},{"id":3480,"steps":[{"id":3482,"inputs":{},"position":"40,-370","purpose":"start","title":"Try","transitions":[{"id":3490,"inputs":{},"position":"130,-310 130,-250 -30,-250 -30,-230","sourceConnector":"bottom","target":{"id":3484}}]},{"action":"gcx:wf:core::If","id":3484,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":53,"kind":"idref"}],"code":"$reportConfig.result.titleReport.dataUrl !== null && $reportConfig.result.titleReport.dataUrl !== undefined","source":"$reportConfig.result.titleReport.dataUrl !== null && $reportConfig.result.titleReport.dataUrl !== undefined"}},"position":"-90,-230","title":"If","transitions":[{"branch":"false","id":3492,"inputs":{},"position":"30,-200 100,-200 100,230","sourceConnector":"right","target":{"id":3486},"targetConnector":"top"},{"branch":"true","id":3494,"inputs":{},"position":"-90,-200 -230,-200 -230,0","sourceConnector":"left","target":{"id":3488}}]},{"action":"gcx:wf:core::Container","description":"Run title report","id":3486,"inputs":{},"position":"-20,230","title":"Container"},{"action":"gcx:wf:core::Container","description":"Collect Title report data with GP task if any","id":3488,"inputs":{},"position":"-350,0","title":"Container","transitions":[{"id":3496,"inputs":{},"position":"-230,140 -230,290 -20,290","sourceConnector":"bottom","target":{"id":3486},"targetConnector":"left"}]}]},{"id":3498,"steps":[{"id":3500,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3504,"inputs":{},"position":"90,60 90,320 110,320 110,340","sourceConnector":"bottom","target":{"id":3502},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Collect Data from GP task","id":3502,"inputs":{},"position":"-10,340","title":"Container"}]},{"id":3506,"steps":[{"action":"gcx:wf:core::If","id":3508,"inputs":{"condition":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.data !== null","source":"$currentTitleReport.data !== null"}},"position":"50,840","title":"If","transitions":[{"branch":"true","id":3522,"inputs":{},"position":"50,870 30,870 30,960 110,960 110,980","sourceConnector":"left","target":{"id":3510}}]},{"action":"gcx:wf:core::Container","description":"Populate \"project_length_centerline_miles\", \"project_community_type\", \"projectUniqueID\" and \"title image url\" for the title report","id":3510,"inputs":{},"position":"-10,980","title":"Container"},{"id":3512,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3524,"inputs":{},"position":"90,60 90,140 110,140 110,160","sourceConnector":"bottom","target":{"id":3514},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":3514,"inputs":{"expression":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport","source":"$reportConfig.result.titleReport"}},"name":"currentTitleReport","position":"-10,160","title":"Create Value","transitions":[{"id":3526,"inputs":{},"position":"110,230 110,300","sourceConnector":"bottom","target":{"id":3516},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":3516,"inputs":{"message":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":39,"kind":"idref"}],"code":"\"Start gp processing title report: \" + $currentTitleReport.result.name","source":"\"Start gp processing title report: \" + $currentTitleReport.result.name"}},"position":"-10,300","title":"Log","transitions":[{"id":3530,"inputs":{},"position":"110,330 110,400","sourceConnector":"bottom","target":{"id":3520}}]},{"action":"gcx:wf:core::Container","description":"Check and Collect report data from GP task","id":3518,"inputs":{},"position":"-10,620","title":"Container","transitions":[{"id":3528,"inputs":{},"position":"110,760 110,840","sourceConnector":"bottom","target":{"id":3508},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":3520,"inputs":{},"name":"tryCatchStartTitleReportGPTask","position":"-10,400","title":"Try Catch","transitions":[{"id":3532,"inputs":{},"position":"110,520 110,620","sourceConnector":"bottom","target":{"id":3518}}]}]},{"id":3534,"steps":[{"id":3536,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":3542,"inputs":{},"position":"90,60 90,130 80,130 80,150","sourceConnector":"bottom","target":{"id":3538}}]},{"action":"gcx:wf:core::SetProperty","id":3538,"inputs":{"object":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"},"propertyName":"error","propertyValue":{"accessors":["$tryCatchStartTitleReportGPTask"],"annotations":[{"count":31,"index":0,"kind":"idref"}],"code":"$tryCatchStartTitleReportGPTask.error","source":"$tryCatchStartTitleReportGPTask.error"}},"position":"-40,150","title":"Set Property","transitions":[{"id":3544,"inputs":{},"position":"80,180 80,220","sourceConnector":"bottom","target":{"id":3540}}]},{"action":"gcx:wf:core::Log","id":3540,"inputs":{"message":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":50,"kind":"idref"}],"code":"\"Error caught when tried to start gp task for \" + $currentTitleReport.result.name","source":"\"Error caught when tried to start gp task for \" + $currentTitleReport.result.name"}},"position":"-40,220","title":"Log"}]},{"id":3546,"steps":[{"action":"gcx:wf:core::SetProperty","id":3548,"inputs":{"object":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"},"propertyName":"error","propertyValue":{"accessors":[],"code":"\"Could not start gp task\"","source":"\"Could not start gp task\""}},"position":"160,1170","title":"Set Property"},{"id":3550,"inputs":{},"position":"-20,-290","purpose":"start","title":"Try","transitions":[{"id":3582,"inputs":{},"position":"70,-230 70,-170 80,-170 80,-150","sourceConnector":"bottom","target":{"id":3552},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3552,"inputs":{"condition":{"accessors":["$currentTitleReport","$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":47,"kind":"idref"}],"code":"$currentTitleReport.result.dataUrl !== null && $currentTitleReport.result.dataUrl !== undefined","source":"$currentTitleReport.result.dataUrl !== null && $currentTitleReport.result.dataUrl !== undefined"}},"position":"20,-150","title":"If","transitions":[{"branch":"true","id":3584,"inputs":{},"position":"20,-120 0,-120 0,-20 90,-20 90,0","sourceConnector":"left","target":{"id":3554},"targetConnector":"top"},{"branch":"false","id":3586,"inputs":{},"position":"140,-120 220,-120 220,-115 240,-115","sourceConnector":"right","target":{"id":3556}}]},{"action":"gcx:wf:core::CreateValue","id":3554,"inputs":{"expression":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.dataUrl + \"/submitJob\"","source":"$currentTitleReport.result.dataUrl + \"/submitJob\""}},"name":"currentGPUrl1","position":"-30,0","title":"Create Value","transitions":[{"id":3588,"inputs":{},"position":"90,70 90,130","sourceConnector":"bottom","target":{"id":3558}}]},{"action":"gcx:wf:core::Log","id":3556,"inputs":{"message":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":13,"kind":"idref"}],"code":"\"Report: \" + $currentTitleReport.result.name + \" does not have GP data url\"","source":"\"Report: \" + $currentTitleReport.result.name  + \" does not have GP data url\""}},"position":"240,-130","title":"Log"},{"action":"gcx:wf:core::ConvertToJson","id":3558,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.projectLine","source":"$reportConfig.result.projectLine"}},"name":"projectLineJsonString1","position":"-30,130","title":"Convert To JSON","transitions":[{"id":3590,"inputs":{},"position":"90,200 90,250","sourceConnector":"bottom","target":{"id":3560}}]},{"action":"gcx:wf:core::Log","id":3560,"inputs":{"message":{"accessors":["$currentGPUrl1"],"annotations":[{"count":14,"index":25,"kind":"idref"}],"code":"\"Start GP task from: \" + $currentGPUrl1.result","source":"\"Start GP task from: \" + $currentGPUrl1.result"}},"position":"-30,250","title":"Log","transitions":[{"id":3592,"inputs":{},"position":"90,280 90,320","sourceConnector":"bottom","target":{"id":3562}}]},{"action":"gcx:wf:core:request:WebRequest","id":3562,"inputs":{"form":{"accessors":["$projectLineJsonString1","$reportConfig","$reportConfig","$reportConfig","$PerfOutcomes","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig"],"annotations":[{"count":23,"index":19,"kind":"idref"},{"count":13,"index":67,"kind":"idref"},{"count":13,"index":118,"kind":"idref"},{"count":13,"index":171,"kind":"idref"},{"count":13,"index":231,"kind":"idref"},{"count":13,"index":270,"kind":"idref"},{"count":13,"index":306,"kind":"idref"},{"count":13,"index":355,"kind":"idref"},{"count":13,"index":423,"kind":"idref"},{"count":13,"index":464,"kind":"idref"}],"code":"{\n    \"Project_Line\": $projectLineJsonString1.json,\n    \"Project_Name\": $reportConfig.result.projectName,\n    \"Jurisdiction\": $reportConfig.result.jurisdiction,\n    \"Project_Type\": $reportConfig.result.projectType,\n    \"Performance_Outcomes\": $PerfOutcomes.result,\n    \"Project_ADT\": $reportConfig.result.ADT,\n    \"AADT\": $reportConfig.result.ADT,\n    \"Posted_Speed_Limit\": $reportConfig.result.postedSpeedLimit,\n    \"Pavement_Condition_Index\": $reportConfig.result.PCI,\n    \"User_Email\": $reportConfig.result.email,\n    \"f\": \"json\"\n}","source":"{\n  \"Project_Line\":$projectLineJsonString1.json,\n  \"Project_Name\": $reportConfig.result.projectName,\n  \"Jurisdiction\":$reportConfig.result.jurisdiction,\n  \"Project_Type\": $reportConfig.result.projectType,\n  \"Performance_Outcomes\": $PerfOutcomes.result, \n  \"Project_ADT\":$reportConfig.result.ADT,\n  \"AADT\": $reportConfig.result.ADT,\n  \"Posted_Speed_Limit\":$reportConfig.result.postedSpeedLimit,\n  \"Pavement_Condition_Index\":$reportConfig.result.PCI,\n  \"User_Email\":$reportConfig.result.email,\n  \"f\":\"json\"\n}"},"headers":{"accessors":[],"annotations":[],"code":"{\n    \"content-type\": \"application/x-www-form-urlencoded\"\n}","source":"{\n  \"content-type\": \"application/x-www-form-urlencoded\"\n}"},"method":"POST","url":{"accessors":["$currentGPUrl1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentGPUrl1.result","source":"$currentGPUrl1.result"}},"name":"webRequestStartGPTask1","position":"-30,320","title":"Send Web Request","transitions":[{"id":3594,"inputs":{},"position":"90,390 90,430","sourceConnector":"bottom","target":{"id":3564}}]},{"action":"gcx:wf:core::Log","id":3564,"inputs":{"message":{"accessors":["$webRequestStartGPTask1"],"annotations":[{"count":23,"index":38,"kind":"idref"}],"code":"\"Response collected from GP task: \" + $webRequestStartGPTask1.text","source":"\"Response collected from GP task: \" + $webRequestStartGPTask1.text "}},"position":"-30,430","title":"Log","transitions":[{"id":3596,"inputs":{},"position":"90,460 90,520","sourceConnector":"bottom","target":{"id":3566}}]},{"action":"gcx:wf:core::If","id":3566,"inputs":{"condition":{"accessors":["$webRequestStartGPTask1","$webRequestStartGPTask1"],"annotations":[{"count":23,"index":0,"kind":"idref"},{"count":23,"index":41,"kind":"idref"}],"code":"$webRequestStartGPTask1.text !== null && $webRequestStartGPTask1.text !== undefined","source":"$webRequestStartGPTask1.text !== null && $webRequestStartGPTask1.text !== undefined"}},"position":"30,520","title":"If","transitions":[{"branch":"true","id":3598,"inputs":{},"position":"30,550 10,550 10,620 100,620 100,640","sourceConnector":"left","target":{"id":3568},"targetConnector":"top"},{"branch":"false","id":3600,"inputs":{},"position":"150,550 240,550 240,555 260,555","sourceConnector":"right","target":{"id":3570},"targetConnector":"left"}]},{"action":"gcx:wf:core::ParseJson","id":3568,"inputs":{"json":{"accessors":["$webRequestStartGPTask1"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$webRequestStartGPTask1.text","source":"$webRequestStartGPTask1.text"}},"name":"parseJobJson4","position":"-20,640","title":"Parse JSON","transitions":[{"id":3606,"inputs":{},"position":"-20,675 -220,675 -220,810","sourceConnector":"left","target":{"id":3572},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3570,"inputs":{"object":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Can not start geoprocessing task.\"\n}","source":"{\n  \"error\": \"Can not start geoprocessing task.\"\n}"}},"position":"260,540","title":"Set Property","transitions":[{"id":3608,"inputs":{},"position":"380,570 380,600 390,600 390,620","sourceConnector":"bottom","target":{"id":3578}}]},{"action":"gcx:wf:core::SetProperty","id":3572,"inputs":{"object":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"},"propertyName":"gpJob","propertyValue":{"accessors":["$parseJobJson4"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson4.result","source":"$parseJobJson4.result"}},"position":"-340,810","title":"Set Property","transitions":[{"id":3602,"inputs":{},"position":"-220,840 -220,930 140,930 140,950","sourceConnector":"bottom","target":{"id":3574},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3574,"inputs":{"condition":{"accessors":["$currentTitleReport","$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":51,"kind":"idref"}],"code":"$currentTitleReport.result.gpJob.jobId === null || $currentTitleReport.result.gpJob.jobId === undefined","source":"$currentTitleReport.result.gpJob.jobId === null || $currentTitleReport.result.gpJob.jobId === undefined"}},"position":"80,950","title":"If","transitions":[{"branch":"true","id":3604,"inputs":{},"position":"80,980 60,980 60,1030 150,1030 150,1050","sourceConnector":"left","target":{"id":3576}}]},{"action":"gcx:wf:core::If","id":3576,"inputs":{"condition":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.gpJob.error != null","source":"$currentTitleReport.result.gpJob.error != null"}},"position":"90,1050","title":"If","transitions":[{"branch":"true","id":3610,"inputs":{},"position":"90,1080 -20,1080 -20,1170","sourceConnector":"left","target":{"id":3580},"targetConnector":"top"},{"branch":"false","id":3612,"inputs":{},"position":"210,1080 280,1080 280,1170","sourceConnector":"right","target":{"id":3548},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":3578,"inputs":{"message":{"accessors":["$currentGPUrl1"],"annotations":[{"count":14,"index":53,"kind":"idref"}],"code":"\"error:  Can not start geoprocessing task from \" + $currentGPUrl1.result","source":" \"error:  Can not start geoprocessing task from \" +  $currentGPUrl1.result"}},"position":"270,620","title":"Log"},{"action":"gcx:wf:core::SetProperty","id":3580,"inputs":{"object":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"},"propertyName":"error","propertyValue":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.gpJob.error","source":"$currentTitleReport.result.gpJob.error"}},"position":"-140,1170","title":"Set Property"}]},{"id":3614,"steps":[{"action":"gcx:wf:core::CreateValue","id":3616,"inputs":{"expression":{"accessors":[],"code":"false","source":"false"}},"name":"endGPCheckingLoop1","position":"-20,150","title":"Create Value","transitions":[{"id":3624,"inputs":{},"position":"100,220 100,290","sourceConnector":"bottom","target":{"id":3618}}]},{"action":"gcx:wf:core::CreateValue","id":3618,"inputs":{"expression":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"}},"name":"GPCheckingLoopStartTime1","position":"-20,290","title":"Create Value","transitions":[{"id":3626,"inputs":{},"position":"100,360 100,440","sourceConnector":"bottom","target":{"id":3620}}]},{"action":"gcx:wf:core:loop:Loop","id":3620,"inputs":{"exit":{"accessors":["$endGPCheckingLoop1"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$endGPCheckingLoop1.result","source":"$endGPCheckingLoop1.result"},"limit":{"accessors":["$reportTimeoutMinutes","$millisecondsDelay"],"annotations":[{"count":21,"index":1,"kind":"idref"},{"count":18,"index":40,"kind":"idref"}],"code":"$reportTimeoutMinutes.result * 60 * 1000 / $millisecondsDelay.result","source":" $reportTimeoutMinutes.result*60*1000 / $millisecondsDelay.result"}},"name":"GPCheckingLoop1","position":"-20,440","title":"Loop"},{"id":3622,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3628,"inputs":{},"position":"90,60 90,130 100,130 100,150","target":{"id":3616}}]}]},{"id":3630,"steps":[{"action":"gcx:wf:core::CreateValue","id":3632,"inputs":{"expression":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"}},"name":"currentCheckingGPReport1","position":"-20,150","title":"Create Value","transitions":[{"id":3642,"inputs":{},"position":"100,220 100,270 90,270 90,290","sourceConnector":"bottom","target":{"id":3634}}]},{"action":"gcx:wf:core::TryCatch","id":3634,"inputs":{},"name":"tryCatchCheckGPTask1","position":"-30,290","title":"Try Catch","transitions":[{"id":3644,"inputs":{},"position":"90,410 90,490","sourceConnector":"bottom","target":{"id":3636},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Check if loop can be finished","id":3636,"inputs":{},"position":"-30,490","title":"Container"},{"id":3638,"inputs":{},"position":"10,-110","purpose":"start","title":"Loop","transitions":[{"id":3646,"inputs":{},"position":"100,-50 100,40","sourceConnector":"bottom","target":{"id":3640},"targetConnector":"top"}]},{"action":"gcx:wf:core::Delay","id":3640,"inputs":{"duration":{"accessors":["$millisecondsDelay"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$millisecondsDelay.result","source":"$millisecondsDelay.result"}},"position":"-20,40","title":"Delay","transitions":[{"id":3648,"inputs":{},"position":"100,70 100,150","sourceConnector":"bottom","target":{"id":3632},"targetConnector":"top"}]}]},{"id":3650,"steps":[{"action":"gcx:wf:core::CreateValue","id":3652,"inputs":{"expression":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"}},"name":"currentReportToCheckFinish1","position":"70,230","title":"Create Value","transitions":[{"id":3674,"inputs":{},"position":"310,265 390,265 390,250 470,250 470,270","sourceConnector":"right","target":{"id":3654},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3654,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish1","$currentReportToCheckFinish1","$currentReportToCheckFinish1","$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"},{"count":28,"index":40,"kind":"idref"},{"count":28,"index":87,"kind":"idref"},{"count":28,"index":143,"kind":"idref"}],"code":"$currentReportToCheckFinish1 != null && $currentReportToCheckFinish1.result != null && $currentReportToCheckFinish1.result.dataUrl !== null && $currentReportToCheckFinish1.result.dataUrl !== undefined","source":"$currentReportToCheckFinish1 != null && $currentReportToCheckFinish1.result != null && $currentReportToCheckFinish1.result.dataUrl !== null && $currentReportToCheckFinish1.result.dataUrl !== undefined"}},"position":"410,270","title":"If","transitions":[{"branch":"true","id":3676,"inputs":{},"position":"410,300 330,300 330,360 180,360 180,380","sourceConnector":"left","target":{"id":3656},"targetConnector":"top"},{"branch":"false","id":3678,"inputs":{},"position":"530,300 920,300 920,665 940,665","sourceConnector":"right","target":{"id":3658}}]},{"action":"gcx:wf:core::If","id":3656,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish1","$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"},{"count":28,"index":54,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.error !== null && $currentReportToCheckFinish1.result.error !== undefined","source":"$currentReportToCheckFinish1.result.error !== null && $currentReportToCheckFinish1.result.error !== undefined"}},"position":"120,380","title":"If","transitions":[{"branch":"false","id":3680,"inputs":{},"position":"240,410 280,410 280,800","sourceConnector":"right","target":{"id":3660},"targetConnector":"top"},{"branch":"true","id":3682,"inputs":{},"position":"120,410 100,410 100,700 1060,700 1060,680","sourceConnector":"left","target":{"id":3658},"targetConnector":"bottom"}]},{"action":"gcx:wf:core::SetProperty","id":3658,"inputs":{"object":{"accessors":["$endGPCheckingLoop1"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$endGPCheckingLoop1","source":"$endGPCheckingLoop1"},"propertyName":"result","propertyValue":{"accessors":[],"code":"true","source":"true"}},"position":"940,650","title":"Set Property"},{"action":"gcx:wf:core::If","id":3660,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.gpJob.jobStatus == \"esriJobFailed\"","source":"$currentReportToCheckFinish1.result.gpJob.jobStatus == \"esriJobFailed\""}},"position":"220,800","title":"If","transitions":[{"branch":"false","id":3684,"inputs":{},"position":"340,830 530,830 530,1020","sourceConnector":"right","target":{"id":3662},"targetConnector":"top"},{"branch":"true","id":3686,"inputs":{},"position":"220,830 170,830 170,930","sourceConnector":"left","target":{"id":3664},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3662,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.gpJob.jobStatus == \"esriJobSucceeded\"","source":"$currentReportToCheckFinish1.result.gpJob.jobStatus == \"esriJobSucceeded\""}},"position":"470,1020","title":"If","transitions":[{"branch":"true","id":3688,"inputs":{},"position":"470,1050 440,1050 440,1150","sourceConnector":"left","target":{"id":3666},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3664,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result","source":"$currentReportToCheckFinish1.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"esriJobFailed\"\n}","source":"{\n  \"error\": \"esriJobFailed\"\n}"}},"position":"50,930","title":"Set Property","transitions":[{"id":3690,"inputs":{},"position":"290,945 1060,945 1060,680","sourceConnector":"right","target":{"id":3658},"targetConnector":"bottom"}]},{"action":"gcx:wf:core::If","id":3666,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish1","$currentReportToCheckFinish1","$currentReportToCheckFinish1","$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"},{"count":28,"index":61,"kind":"idref"},{"count":28,"index":134,"kind":"idref"},{"count":28,"index":217,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.gpJob.results != null && $currentReportToCheckFinish1.result.gpJob.results.Output_JSON != null && $currentReportToCheckFinish1.result.gpJob.results.Output_JSON.paramUrl !== null && $currentReportToCheckFinish1.result.gpJob.results.Output_JSON.paramUrl !== undefined","source":"$currentReportToCheckFinish1.result.gpJob.results != null && $currentReportToCheckFinish1.result.gpJob.results.Output_JSON != null && $currentReportToCheckFinish1.result.gpJob.results.Output_JSON.paramUrl !== null && $currentReportToCheckFinish1.result.gpJob.results.Output_JSON.paramUrl !== undefined"}},"position":"380,1150","title":"If","transitions":[{"branch":"false","id":3692,"inputs":{},"position":"500,1180 590,1180 590,1385 610,1385","sourceConnector":"right","target":{"id":3668}},{"branch":"true","id":3694,"inputs":{},"position":"380,1180 360,1180 360,1300 370,1300 370,1390 350,1390","sourceConnector":"left","target":{"id":3670}}]},{"action":"gcx:wf:core::SetProperty","id":3668,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result","source":"$currentReportToCheckFinish1.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"GP job finished without json output\"\n}","source":"{\n  \"error\": \"GP job finished without json output\"\n}"}},"position":"610,1370","title":"Set Property","transitions":[{"id":3696,"inputs":{},"position":"850,1385 1060,1385 1060,680","sourceConnector":"right","target":{"id":3658},"targetConnector":"bottom"}]},{"action":"gcx:wf:core::Container","description":"Collect gp result data json for report","id":3670,"inputs":{},"position":"110,1320","title":"Container","transitions":[{"id":3698,"inputs":{},"position":"230,1460 230,1480 1060,1480 1060,680","sourceConnector":"bottom","target":{"id":3658},"targetConnector":"bottom"}]},{"id":3672,"inputs":{},"position":"0,-30","purpose":"start","title":"Container","transitions":[{"id":3700,"inputs":{},"position":"90,30 90,210 190,210 190,230","sourceConnector":"bottom","target":{"id":3652},"targetConnector":"top"}]}]},{"id":3702,"steps":[{"id":3704,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3710,"inputs":{},"position":"90,60 90,130 80,130 80,150","sourceConnector":"bottom","target":{"id":3706}}]},{"action":"gcx:wf:core::Container","description":"Get GP job json infor","id":3706,"inputs":{},"position":"-40,150","title":"Container","transitions":[{"id":3712,"inputs":{},"position":"80,270 80,350","sourceConnector":"bottom","target":{"id":3708}}]},{"action":"gcx:wf:core::Container","description":"Download json data for report","id":3708,"inputs":{},"position":"-40,350","title":"Container"}]},{"id":3714,"steps":[{"id":3716,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3732,"inputs":{},"position":"90,60 90,290 290,290 290,310","sourceConnector":"bottom","target":{"id":3718},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3718,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish1","$currentReportToCheckFinish1","$currentReportToCheckFinish1","$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"},{"count":28,"index":68,"kind":"idref"},{"count":28,"index":142,"kind":"idref"},{"count":28,"index":221,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.gpJob.outputJsonInfo != null && $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value != null && $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url !== null && $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url !== undefined","source":"$currentReportToCheckFinish1.result.gpJob.outputJsonInfo != null && $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value != null && $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url !== null && $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url !== undefined"}},"position":"230,310","title":"If","transitions":[{"branch":"true","id":3734,"inputs":{},"position":"230,340 160,340 160,530","sourceConnector":"left","target":{"id":3720},"targetConnector":"top"},{"branch":"false","id":3736,"inputs":{},"position":"350,340 540,340 540,430","sourceConnector":"right","target":{"id":3722},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":3720,"inputs":{"method":"POST","query":{"accessors":[],"annotations":[],"code":"{\n    \"f\": \"json\"\n}","source":"{\n  \"f\":\"json\"\n}"},"url":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url","source":"$currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url"}},"name":"webRequestGetReportData1","position":"40,530","title":"Send Web Request","transitions":[{"id":3738,"inputs":{},"position":"160,600 160,660 150,660 150,680","sourceConnector":"bottom","target":{"id":3724},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3722,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result","source":"$currentReportToCheckFinish1.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Gp json output does not have a valid url to download json data \"\n}","source":"{\n  \"error\": \"Gp json output does not have a valid url to download json data \"\n}"}},"position":"420,430","title":"Set Property"},{"action":"gcx:wf:core::If","id":3724,"inputs":{"condition":{"accessors":["$webRequestGetReportData1","$webRequestGetReportData1"],"annotations":[{"count":25,"index":0,"kind":"idref"},{"count":25,"index":43,"kind":"idref"}],"code":"$webRequestGetReportData1.text !== null && $webRequestGetReportData1.text !== undefined","source":"$webRequestGetReportData1.text !== null && $webRequestGetReportData1.text !== undefined"}},"position":"90,680","title":"If","transitions":[{"branch":"false","id":3740,"inputs":{},"position":"210,710 310,710 310,835 330,835","sourceConnector":"right","target":{"id":3726},"targetConnector":"left"},{"branch":"true","id":3742,"inputs":{},"position":"90,710 70,710 70,870 150,870 150,890","sourceConnector":"left","target":{"id":3728}}]},{"action":"gcx:wf:core::SetProperty","id":3726,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result","source":"$currentReportToCheckFinish1.result"},"propertyName":"error","propertyValue":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":50,"kind":"idref"}],"code":"{\n    \"error\": \"Can not download json data from \" + $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url\n}","source":"{\n  \"error\": \"Can not download json data from \" + $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url\n}"}},"position":"330,820","title":"Set Property"},{"action":"gcx:wf:core::ParseJson","id":3728,"inputs":{"json":{"accessors":["$webRequestGetReportData1"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$webRequestGetReportData1.text","source":"$webRequestGetReportData1.text"}},"name":"parseJobJson5","position":"30,890","title":"Parse JSON","transitions":[{"id":3744,"inputs":{},"position":"150,960 150,1070","sourceConnector":"bottom","target":{"id":3730},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3730,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result","source":"$currentReportToCheckFinish1.result"},"propertyName":"data","propertyValue":{"accessors":["$parseJobJson5"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson5.result","source":"$parseJobJson5.result"}},"position":"30,1070","title":"Set Property"}]},{"id":3746,"steps":[{"id":3748,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3762,"inputs":{},"position":"90,60 90,240 210,240 210,260","sourceConnector":"bottom","target":{"id":3750},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":3750,"inputs":{"expression":{"accessors":["$currentReportToCheckFinish1","$currentReportToCheckFinish1","$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"},{"count":28,"index":57,"kind":"idref"},{"count":28,"index":113,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.dataUrl + \"/jobs/\" + $currentReportToCheckFinish1.result.gpJob.jobId + \"/\" + $currentReportToCheckFinish1.result.gpJob.results.Output_JSON.paramUrl","source":"$currentReportToCheckFinish1.result.dataUrl + \"/jobs/\" + $currentReportToCheckFinish1.result.gpJob.jobId + \"/\" + $currentReportToCheckFinish1.result.gpJob.results.Output_JSON.paramUrl"}},"name":"reportJsonUrl1","position":"90,260","title":"Create Value","transitions":[{"id":3764,"inputs":{},"position":"210,330 210,440 180,440 180,460","sourceConnector":"bottom","target":{"id":3752},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":3752,"inputs":{"method":"POST","query":{"accessors":[],"annotations":[],"code":"{\n    \"f\": \"json\"\n}","source":"{\n  \"f\":\"json\"\n}"},"url":{"accessors":["$reportJsonUrl1"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$reportJsonUrl1.result","source":"$reportJsonUrl1.result"}},"name":"webRequestGetReportJson1","position":"60,460","title":"Send Web Request","transitions":[{"id":3766,"inputs":{},"position":"180,530 180,590 170,590 170,610","sourceConnector":"bottom","target":{"id":3754},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3754,"inputs":{"condition":{"accessors":["$webRequestGetReportJson1","$webRequestGetReportJson1"],"annotations":[{"count":25,"index":0,"kind":"idref"},{"count":25,"index":43,"kind":"idref"}],"code":"$webRequestGetReportJson1.text !== null && $webRequestGetReportJson1.text !== undefined","source":"$webRequestGetReportJson1.text !== null && $webRequestGetReportJson1.text !== undefined"}},"position":"110,610","title":"If","transitions":[{"branch":"false","id":3768,"inputs":{},"position":"230,640 330,640 330,765 350,765","sourceConnector":"right","target":{"id":3756},"targetConnector":"left"},{"branch":"true","id":3770,"inputs":{},"position":"110,640 90,640 90,800 170,800 170,820","sourceConnector":"left","target":{"id":3758}}]},{"action":"gcx:wf:core::SetProperty","id":3756,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result","source":"$currentReportToCheckFinish1.result"},"propertyName":"error","propertyValue":{"accessors":["$reportJsonUrl1"],"annotations":[{"count":15,"index":54,"kind":"idref"}],"code":"{\n    \"error\": \"Can not get report json result from \" + $reportJsonUrl1.result\n}","source":"{\n  \"error\": \"Can not get report json result from \" + $reportJsonUrl1.result\n}"}},"position":"350,750","title":"Set Property"},{"action":"gcx:wf:core::ParseJson","id":3758,"inputs":{"json":{"accessors":["$webRequestGetReportJson1"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$webRequestGetReportJson1.text","source":"$webRequestGetReportJson1.text"}},"name":"parseJobJson6","position":"50,820","title":"Parse JSON","transitions":[{"id":3772,"inputs":{},"position":"170,890 170,1000","sourceConnector":"bottom","target":{"id":3760},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3760,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.gpJob","source":"$currentReportToCheckFinish1.result.gpJob"},"propertyName":"outputJsonInfo","propertyValue":{"accessors":["$parseJobJson6"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson6.result","source":"$parseJobJson6.result"}},"position":"50,1000","title":"Set Property"}]},{"id":3774,"steps":[{"id":3776,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":3780,"inputs":{},"position":"90,60 90,130 80,130 80,150","target":{"id":3778}}]},{"action":"gcx:wf:core::SetProperty","id":3778,"inputs":{"object":{"accessors":["$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport1.result","source":"$currentCheckingGPReport1.result"},"propertyName":"error","propertyValue":{"accessors":["$tryCatchCheckGPTask1"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$tryCatchCheckGPTask1.error","source":"$tryCatchCheckGPTask1.error"}},"position":"-40,150","title":"Set Property"}]},{"id":3782,"steps":[{"id":3784,"inputs":{},"position":"0,-290","purpose":"start","title":"Try","transitions":[{"id":3804,"inputs":{},"position":"90,-230 90,-160","sourceConnector":"bottom","target":{"id":3786}}]},{"action":"gcx:wf:core::If","id":3786,"inputs":{"condition":{"accessors":["$currentCheckingGPReport1","$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"},{"count":25,"index":53,"kind":"idref"}],"code":"$currentCheckingGPReport1.result.dataUrl !== null && $currentCheckingGPReport1.result.dataUrl !== undefined","source":"$currentCheckingGPReport1.result.dataUrl !== null && $currentCheckingGPReport1.result.dataUrl !== undefined"}},"position":"30,-160","title":"If","transitions":[{"branch":"true","id":3806,"inputs":{},"position":"30,-130 10,-130 10,-40 90,-40 90,-20","sourceConnector":"left","target":{"id":3788},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3788,"inputs":{"condition":{"accessors":["$currentCheckingGPReport1","$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"},{"count":25,"index":51,"kind":"idref"}],"code":"$currentCheckingGPReport1.result.error === null || $currentCheckingGPReport1.result.error === undefined","source":"$currentCheckingGPReport1.result.error === null || $currentCheckingGPReport1.result.error === undefined"}},"position":"30,-20","title":"If","transitions":[{"branch":"true","id":3808,"inputs":{},"position":"30,10 10,10 10,100 90,100 90,120","sourceConnector":"left","target":{"id":3790}},{"branch":"false","id":3810,"inputs":{},"position":"150,10 250,10 250,15 270,15","sourceConnector":"right","target":{"id":3792}}]},{"action":"gcx:wf:core::CreateValue","id":3790,"inputs":{"expression":{"accessors":["$currentCheckingGPReport1","$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"},{"count":25,"index":54,"kind":"idref"}],"code":"$currentCheckingGPReport1.result.dataUrl + \"/jobs/\" + $currentCheckingGPReport1.result.gpJob.jobId","source":"$currentCheckingGPReport1.result.dataUrl + \"/jobs/\" + $currentCheckingGPReport1.result.gpJob.jobId"}},"name":"currentGPCheckingUrl1","position":"-30,120","title":"Create Value","transitions":[{"id":3812,"inputs":{},"position":"90,190 90,250","sourceConnector":"bottom","target":{"id":3794},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3792,"inputs":{"object":{"accessors":["$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport1.result","source":"$currentCheckingGPReport1.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Gp task has no job id.\"\n}","source":"{\n  \"error\": \"Gp task has no job id.\"\n}"}},"position":"270,0","title":"Set Property"},{"action":"gcx:wf:core:request:WebRequest","id":3794,"inputs":{"method":"POST","query":{"accessors":[],"annotations":[],"code":"{\n    \"f\": \"json\"\n}","source":"{\n  \"f\":\"json\"\n}"},"url":{"accessors":["$currentGPCheckingUrl1"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$currentGPCheckingUrl1.result","source":"$currentGPCheckingUrl1.result"}},"name":"webRequestCheckGPTask1","position":"-30,250","title":"Send Web Request","transitions":[{"id":3814,"inputs":{},"position":"90,320 90,380 80,380 80,400","sourceConnector":"bottom","target":{"id":3796},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3796,"inputs":{"condition":{"accessors":["$webRequestCheckGPTask1","$webRequestCheckGPTask1"],"annotations":[{"count":23,"index":0,"kind":"idref"},{"count":23,"index":41,"kind":"idref"}],"code":"$webRequestCheckGPTask1.text !== null && $webRequestCheckGPTask1.text !== undefined","source":"$webRequestCheckGPTask1.text !== null && $webRequestCheckGPTask1.text !== undefined"}},"position":"20,400","title":"If","transitions":[{"branch":"true","id":3816,"inputs":{},"position":"20,430 -40,430 -40,675 -20,675","sourceConnector":"left","target":{"id":3798}},{"branch":"false","id":3818,"inputs":{},"position":"140,430 240,430 240,555 260,555","sourceConnector":"right","target":{"id":3800},"targetConnector":"left"}]},{"action":"gcx:wf:core::ParseJson","id":3798,"inputs":{"json":{"accessors":["$webRequestCheckGPTask1"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$webRequestCheckGPTask1.text","source":"$webRequestCheckGPTask1.text"}},"name":"parseJobJson7","position":"-20,640","title":"Parse JSON","transitions":[{"id":3820,"inputs":{},"position":"100,710 100,790","sourceConnector":"bottom","target":{"id":3802},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3800,"inputs":{"object":{"accessors":["$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport1.result","source":"$currentCheckingGPReport1.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Can not check geoprocessing task.\"\n}","source":"{\n  \"error\": \"Can not check geoprocessing task.\"\n}"}},"position":"260,540","title":"Set Property"},{"action":"gcx:wf:core::SetProperty","id":3802,"inputs":{"object":{"accessors":["$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport1.result","source":"$currentCheckingGPReport1.result"},"propertyName":"gpJob","propertyValue":{"accessors":["$parseJobJson7"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson7.result","source":"$parseJobJson7.result"}},"position":"-20,790","title":"Set Property"}]},{"id":3822,"steps":[{"action":"gcx:wf:core::If","id":944,"inputs":{"condition":{"accessors":["$currentTitleReport","$currentTitleReport","$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":38,"kind":"idref"},{"count":19,"index":81,"kind":"idref"}],"code":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Project Unique ID\"] != null","source":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Project Unique ID\"] != null "}},"position":"-50,920","title":"If","transitions":[{"branch":"true","id":964,"inputs":{},"position":"-50,950 -80,950 -80,1080","sourceConnector":"left","target":{"id":950},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":950,"inputs":{"object":{"accessors":["$projectUniqueID"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$projectUniqueID","source":"$projectUniqueID"},"propertyName":"result","propertyValue":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.data[\"Project Unique ID\"]","source":"$currentTitleReport.result.data[\"Project Unique ID\"]"}},"name":"setProjectUniqueID","position":"-200,1080","title":"Set Property"},{"id":3824,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":3838,"inputs":{},"position":"90,60 90,160","target":{"id":3826}}]},{"action":"gcx:wf:core::If","id":3826,"inputs":{"condition":{"accessors":["$currentTitleReport","$currentTitleReport","$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":38,"kind":"idref"},{"count":19,"index":81,"kind":"idref"}],"code":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Project Length Centerline Miles\"] != null","source":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Project Length Centerline Miles\"] != null "}},"position":"30,160","title":"If","transitions":[{"branch":"true","id":3840,"inputs":{},"position":"30,190 0,190 0,320","sourceConnector":"left","target":{"id":3828},"targetConnector":"top"},{"branch":"false","id":3842,"inputs":{},"position":"150,190 170,190 170,390 80,390 80,410","sourceConnector":"right","target":{"id":3830},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3828,"inputs":{"object":{"accessors":["$projectLength"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$projectLength","source":"$projectLength"},"propertyName":"result","propertyValue":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.data[\"Project Length Centerline Miles\"]","source":"$currentTitleReport.result.data[\"Project Length Centerline Miles\"]"}},"position":"-120,320","title":"Set Property","transitions":[{"id":3844,"inputs":{},"position":"0,350 0,390 80,390 80,410","sourceConnector":"bottom","target":{"id":3830},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3830,"inputs":{"condition":{"accessors":["$currentTitleReport","$currentTitleReport","$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":38,"kind":"idref"},{"count":19,"index":81,"kind":"idref"}],"code":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Project Community Type\"] != null","source":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Project Community Type\"] != null "}},"position":"20,410","title":"If","transitions":[{"branch":"true","id":3846,"inputs":{},"position":"20,440 -10,440 -10,570","sourceConnector":"left","target":{"id":3832},"targetConnector":"top"},{"branch":"false","id":3848,"inputs":{},"position":"140,440 160,440 160,630 120,630 120,650","sourceConnector":"right","target":{"id":3834},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3832,"inputs":{"object":{"accessors":["$projectCommunityType"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$projectCommunityType","source":"$projectCommunityType"},"propertyName":"result","propertyValue":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.data[\"Project Community Type\"]","source":"$currentTitleReport.result.data[\"Project Community Type\"]"}},"position":"-130,570","title":"Set Property","transitions":[{"id":3850,"inputs":{},"position":"-10,600 -10,630 120,630 120,650","sourceConnector":"bottom","target":{"id":3834},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3834,"inputs":{"condition":{"accessors":["$currentTitleReport","$currentTitleReport","$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":38,"kind":"idref"},{"count":19,"index":81,"kind":"idref"}],"code":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Image Url\"] != null","source":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Image Url\"] != null "}},"position":"60,650","title":"If","transitions":[{"branch":"false","id":967,"inputs":{},"position":"180,680 200,680 200,900 10,900 10,920","sourceConnector":"right","target":{"id":944},"targetConnector":"top"},{"branch":"true","id":3852,"inputs":{},"position":"60,680 30,680 30,810","sourceConnector":"left","target":{"id":3836},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3836,"inputs":{"object":{"accessors":["$titleReportImageUrl"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$titleReportImageUrl","source":"$titleReportImageUrl"},"propertyName":"result","propertyValue":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.data[\"Image Url\"]","source":"$currentTitleReport.result.data[\"Image Url\"]"}},"position":"-90,810","title":"Set Property","transitions":[{"id":965,"inputs":{},"position":"30,840 30,900 10,900 10,920","sourceConnector":"bottom","target":{"id":944}}]}]},{"id":3854,"steps":[{"action":"gcx:wf:core::AddItem","id":3856,"inputs":{"collection":{"accessors":["$subReports"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$subReports.result","source":"$subReports.result"},"index":{"accessors":[],"code":"0","source":"0"},"item":{"accessors":["$webRequestGetPdfTitleReport"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$webRequestGetPdfTitleReport.blob","source":"$webRequestGetPdfTitleReport.blob"}},"position":"-430,840","title":"Add Item"},{"id":3858,"inputs":{},"position":"-10,-110","purpose":"start","title":"Container","transitions":[{"id":3878,"inputs":{},"position":"80,-50 80,10","sourceConnector":"bottom","target":{"id":3860},"targetConnector":"top"}]},{"action":"gcx:wf:core::ConvertToJson","id":3860,"inputs":{"object":{"accessors":["$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$projectLength","$projectCommunityType","$titleReportImageUrl"],"annotations":[{"count":13,"index":13,"kind":"idref"},{"count":13,"index":99,"kind":"idref"},{"count":13,"index":155,"kind":"idref"},{"count":13,"index":212,"kind":"idref"},{"count":13,"index":268,"kind":"idref"},{"count":13,"index":336,"kind":"idref"},{"count":13,"index":390,"kind":"idref"},{"count":14,"index":469,"kind":"idref"},{"count":21,"index":523,"kind":"idref"},{"count":20,"index":570,"kind":"idref"}],"code":"{\n    \"name\": $reportConfig.result.titleReport.dataSourceName,\n    \"value\": {\n        \"project_name\": $reportConfig.result.projectName,\n        \"jurisdiction\": $reportConfig.result.jurisdiction,\n        \"project_type\": $reportConfig.result.projectType,\n        \"project_AADT\": $reportConfig.result.ADT,\n        \"project_pavement_condition_index\": $reportConfig.result.PCI,\n        \"posted_speed_limit\": $reportConfig.result.postedSpeedLimit,\n        \"project_length_centerline_miles\": $projectLength.result,\n        \"project_community_type\": $projectCommunityType.result,\n        \"imageURL\": $titleReportImageUrl.result\n    }\n}","source":"{\n    \"name\":$reportConfig.result.titleReport.dataSourceName,\n    \"value\": {\n      \"project_name\": $reportConfig.result.projectName,\n      \"jurisdiction\": $reportConfig.result.jurisdiction,\n      \"project_type\": $reportConfig.result.projectType,\n      \"project_AADT\": $reportConfig.result.ADT,\n      \"project_pavement_condition_index\": $reportConfig.result.PCI,\n      \"posted_speed_limit\": $reportConfig.result.postedSpeedLimit,\n      \"project_length_centerline_miles\":$projectLength.result,\n      \"project_community_type\":$projectCommunityType.result,\n      \"imageURL\":$titleReportImageUrl.result\n    }\n}"}},"name":"json3","position":"-40,10","title":"Convert To JSON","transitions":[{"id":3880,"inputs":{},"position":"80,80 80,110 90,110 90,130","sourceConnector":"bottom","target":{"id":3862}}]},{"action":"gcx:wf:core::Log","id":3862,"inputs":{"message":{"accessors":["$json3"],"annotations":[{"count":6,"index":46,"kind":"idref"}],"code":"\"Parameters sent to generate title report\" + $json3.json","source":" \"Parameters sent to generate title report\" + $json3.json"}},"position":"-30,130","title":"Log","transitions":[{"id":3896,"inputs":{},"position":"90,160 90,200","sourceConnector":"bottom","target":{"id":3864}}]},{"action":"gcx:wf:geocortex::RunReport","description":"","id":3864,"inputs":{"dataSources":{"accessors":["$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$projectLength","$projectCommunityType","$projectUniqueID","$titleReportImageUrl"],"annotations":[{"count":13,"index":13,"kind":"idref"},{"count":13,"index":99,"kind":"idref"},{"count":13,"index":155,"kind":"idref"},{"count":13,"index":212,"kind":"idref"},{"count":13,"index":268,"kind":"idref"},{"count":13,"index":336,"kind":"idref"},{"count":13,"index":390,"kind":"idref"},{"count":14,"index":469,"kind":"idref"},{"count":21,"index":523,"kind":"idref"},{"count":16,"index":579,"kind":"idref"},{"count":20,"index":621,"kind":"idref"}],"code":"{\n    \"name\": $reportConfig.result.titleReport.dataSourceName,\n    \"value\": {\n        \"project_name\": $reportConfig.result.projectName,\n        \"jurisdiction\": $reportConfig.result.jurisdiction,\n        \"project_type\": $reportConfig.result.projectType,\n        \"project_AADT\": $reportConfig.result.ADT,\n        \"project_pavement_condition_index\": $reportConfig.result.PCI,\n        \"posted_speed_limit\": $reportConfig.result.postedSpeedLimit,\n        \"project_length_centerline_miles\": $projectLength.result,\n        \"project_community_type\": $projectCommunityType.result,\n        \"project_Unique_ID\": $projectUniqueID.result,\n        \"imageURL\": $titleReportImageUrl.result\n    }\n}","source":"{\n    \"name\":$reportConfig.result.titleReport.dataSourceName,\n    \"value\": {\n      \"project_name\": $reportConfig.result.projectName,\n      \"jurisdiction\": $reportConfig.result.jurisdiction,\n      \"project_type\": $reportConfig.result.projectType,\n      \"project_AADT\": $reportConfig.result.ADT,\n      \"project_pavement_condition_index\": $reportConfig.result.PCI,\n      \"posted_speed_limit\": $reportConfig.result.postedSpeedLimit,\n      \"project_length_centerline_miles\":$projectLength.result,\n      \"project_community_type\":$projectCommunityType.result,\n      \"project_Unique_ID\":$projectUniqueID.result,\n      \"imageURL\":$titleReportImageUrl.result\n    }\n}"},"url":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport.reportUrl","source":"$reportConfig.result.titleReport.reportUrl"}},"name":"runTitleReport","position":"-30,200","title":"Run Report","transitions":[{"id":3882,"inputs":{},"position":"90,270 90,300 340,300 340,320","sourceConnector":"bottom","target":{"id":3866},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3866,"inputs":{"condition":{"accessors":["$runTitleReport","$runTitleReport"],"annotations":[{"count":15,"index":0,"kind":"idref"},{"count":15,"index":33,"kind":"idref"}],"code":"$runTitleReport.href !== null && $runTitleReport.href !== undefined","source":"$runTitleReport.href !== null && $runTitleReport.href !== undefined"}},"position":"280,320","title":"If","transitions":[{"branch":"false","id":3884,"inputs":{},"position":"400,350 490,350 490,355 510,355","sourceConnector":"right","target":{"id":3868}},{"branch":"true","id":3886,"inputs":{},"position":"280,350 40,350 40,400","sourceConnector":"left","target":{"id":3870},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3868,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport","source":"$reportConfig.result.titleReport"},"propertyName":"error","propertyValue":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":53,"kind":"idref"}],"code":"{\n    \"error\": \"Can not generate title report from \" + $reportConfig.result.titleReport.reportUrl\n}","source":"{\n  \"error\": \"Can not generate title report from \" + $reportConfig.result.titleReport.reportUrl\n}"}},"position":"510,340","title":"Set Property"},{"action":"gcx:wf:core::SetProperty","id":3870,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport","source":"$reportConfig.result.titleReport"},"propertyName":"reportDownloadUrl","propertyValue":{"accessors":["$runTitleReport"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$runTitleReport.href","source":"$runTitleReport.href "}},"position":"-80,400","title":"Set Property","transitions":[{"id":3888,"inputs":{},"position":"40,430 40,540 -80,540 -80,560","sourceConnector":"bottom","target":{"id":3872},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":3872,"inputs":{"expect":"blob","url":{"accessors":["$runTitleReport"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$runTitleReport.href","source":"$runTitleReport.href"}},"name":"webRequestGetPdfTitleReport","position":"-200,560","title":"Send Web Request","transitions":[{"id":3890,"inputs":{},"position":"-200,595 -220,595 -220,700 -10,700 -10,720","sourceConnector":"left","target":{"id":3874},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3874,"inputs":{"condition":{"accessors":["$webRequestGetPdfTitleReport"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$webRequestGetPdfTitleReport.blob != null","source":"$webRequestGetPdfTitleReport.blob != null"}},"position":"-70,720","title":"If","transitions":[{"branch":"false","id":3892,"inputs":{},"position":"50,750 110,750 110,850","sourceConnector":"right","target":{"id":3876}},{"branch":"true","id":3894,"inputs":{},"position":"-70,750 -310,750 -310,840","sourceConnector":"left","target":{"id":3856},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3876,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport","source":"$reportConfig.result.titleReport"},"propertyName":"error","propertyValue":{"accessors":["$runTitleReport"],"annotations":[{"count":15,"index":53,"kind":"idref"}],"code":"{\n    \"error\": \"Can not download title report from \" + $runTitleReport.href\n}","source":"{\n  \"error\": \"Can not download title report from \" + $runTitleReport.href\n}"}},"position":"-10,850","title":"Set Property"}]},{"id":3898,"steps":[{"id":3900,"inputs":{},"position":"-10,-130","purpose":"start","title":"Container","transitions":[{"id":3904,"inputs":{},"position":"80,-70 80,300","sourceConnector":"bottom","target":{"id":3902},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","description":"Check gp task results","id":3902,"inputs":{"items":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports","source":"$reportConfig.result.reports"}},"name":"forEachReportToGenerate","position":"-40,300","title":"For Each"}]},{"id":3906,"steps":[{"id":3908,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":3914,"inputs":{},"position":"90,60 90,140","target":{"id":3910}}]},{"action":"gcx:wf:core::CreateValue","id":3910,"inputs":{"expression":{"accessors":["$forEachReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$forEachReportToGenerate.item","source":"$forEachReportToGenerate.item"}},"name":"currentReportToGenerate","position":"-30,140","title":"Create Value","transitions":[{"id":3916,"inputs":{},"position":"90,210 90,280","sourceConnector":"bottom","target":{"id":3912}}]},{"action":"gcx:wf:core::TryCatch","id":3912,"inputs":{},"name":"tryCatchGenerateSubreport","position":"-30,280","title":"Try Catch"}]},{"id":3918,"steps":[{"id":3920,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":3924,"inputs":{},"position":"90,60 90,130 80,130 80,150","target":{"id":3922}}]},{"action":"gcx:wf:core::SetProperty","id":3922,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"error","propertyValue":{"accessors":["$tryCatchGenerateSubreport"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$tryCatchGenerateSubreport.error","source":"$tryCatchGenerateSubreport.error"}},"position":"-40,150","title":"Set Property"}]},{"id":3926,"steps":[{"id":3928,"inputs":{},"position":"-20,-250","purpose":"start","title":"Try","transitions":[{"id":3942,"inputs":{},"position":"70,-190 70,-130 -50,-130 -50,-110","sourceConnector":"bottom","target":{"id":3930},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3930,"inputs":{"condition":{"accessors":["$currentReportToGenerate","$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":52,"kind":"idref"}],"code":"$currentReportToGenerate.result.dataUrl === null || $currentReportToGenerate.result.dataUrl === undefined","source":"$currentReportToGenerate.result.dataUrl === null || $currentReportToGenerate.result.dataUrl === undefined"}},"position":"-110,-110","title":"If","transitions":[{"branch":"false","id":3950,"inputs":{},"position":"10,-80 90,-80 90,-20","sourceConnector":"right","target":{"id":3932},"targetConnector":"top"},{"branch":"true","id":3952,"inputs":{},"position":"-110,-80 -180,-80 -180,80 -200,80","sourceConnector":"left","target":{"id":3940}}]},{"action":"gcx:wf:core::If","id":3932,"inputs":{"condition":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result.data != null","source":"$currentReportToGenerate.result.data != null"}},"position":"30,-20","title":"If","transitions":[{"branch":"false","id":3944,"inputs":{},"position":"150,10 290,10 290,0 370,0 370,20","sourceConnector":"right","target":{"id":3934},"targetConnector":"top"},{"branch":"true","id":3946,"inputs":{},"position":"30,10 10,10 10,360 30,360","sourceConnector":"left","target":{"id":3936}}]},{"action":"gcx:wf:core::If","id":3934,"inputs":{"condition":{"accessors":["$currentReportToGenerate","$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":50,"kind":"idref"}],"code":"$currentReportToGenerate.result.error === null || $currentReportToGenerate.result.error === undefined","source":"$currentReportToGenerate.result.error === null || $currentReportToGenerate.result.error === undefined"}},"position":"310,20","title":"If","transitions":[{"branch":"true","id":3948,"inputs":{},"position":"310,50 280,50 280,120","sourceConnector":"left","target":{"id":3938},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Run report with GP data source","id":3936,"inputs":{},"position":"30,300","title":"Container"},{"action":"gcx:wf:core::SetProperty","id":3938,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"No report data collected from gp task\"\n}","source":"{\n  \"error\": \"No report data collected from gp task\"\n}"}},"position":"160,120","title":"Set Property"},{"action":"gcx:wf:core::Container","description":"Run report without GP data source","id":3940,"inputs":{},"position":"-440,10","title":"Container"}]},{"id":3954,"steps":[{"action":"gcx:wf:core::Log","id":3956,"inputs":{"message":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":26,"kind":"idref"}],"code":"\"Generate sub report: \" + $currentReportToGenerate.result.name + \" with no gp task provided\"","source":"\"Generate sub report: \" + $currentReportToGenerate.result.name + \" with no gp task provided\""}},"position":"0,50","title":"Log","transitions":[{"id":3978,"inputs":{},"position":"120,80 120,150 140,150 140,170","sourceConnector":"bottom","target":{"id":3958},"targetConnector":"top"}]},{"action":"gcx:wf:geocortex::RunReport","id":3958,"inputs":{"parameters":{"accessors":["$reportConfig","$projectCommunityType","$projectLength"],"annotations":[{"count":13,"index":18,"kind":"idref"},{"count":21,"index":76,"kind":"idref"},{"count":14,"index":123,"kind":"idref"}],"code":"{\n    \"projectName\": $reportConfig.result.projectName,\n    \"projectCommunityType\": $projectCommunityType.result,\n    \"projectLength\": $projectLength.result,\n}","source":"{\n\n\"projectName\": $reportConfig.result.projectName,\n\"projectCommunityType\": $projectCommunityType.result,\n\"projectLength\": $projectLength.result,\n\n}"},"url":{"accessors":["$subReportUrl1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$subReportUrl1.result","source":"$subReportUrl1.result"}},"name":"runSubReport1","position":"20,170","title":"Run Report","transitions":[{"id":3984,"inputs":{},"position":"140,240 140,290 130,290 130,310","sourceConnector":"bottom","target":{"id":3968},"targetConnector":"top"}]},{"id":3960,"inputs":{},"position":"0,-300","purpose":"start","title":"Container","transitions":[{"id":3980,"inputs":{},"position":"90,-240 90,-140 100,-140 100,-120","sourceConnector":"bottom","target":{"id":3962},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":3962,"inputs":{"expression":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result.reportUrl","source":"$currentReportToGenerate.result.reportUrl"}},"name":"subReportUrl1","position":"-20,-120","title":"Create Value","transitions":[{"id":3996,"inputs":{},"position":"100,-50 100,30 120,30 120,50","sourceConnector":"bottom","target":{"id":3956},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":3964,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"reportDownloadUrl","propertyValue":{"accessors":["$runSubReport1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$runSubReport1.href","source":"$runSubReport1.href "}},"position":"-290,390","title":"Set Property","transitions":[{"id":3982,"inputs":{},"position":"-170,420 -170,440 -310,440 -310,370 50,370 50,430 80,430 80,450","sourceConnector":"bottom","target":{"id":3966},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":3966,"inputs":{"expect":"blob","url":{"accessors":["$runSubReport1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$runSubReport1.href","source":"$runSubReport1.href"}},"name":"webRequestGetPdfSubReport1","position":"-40,450","title":"Send Web Request","transitions":[{"id":3986,"inputs":{},"position":"-40,485 -60,485 -60,540 70,540 70,560","sourceConnector":"left","target":{"id":3970},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3968,"inputs":{"condition":{"accessors":["$runSubReport1","$runSubReport1"],"annotations":[{"count":14,"index":0,"kind":"idref"},{"count":14,"index":32,"kind":"idref"}],"code":"$runSubReport1.href !== null && $runSubReport1.href !== undefined","source":"$runSubReport1.href !== null && $runSubReport1.href !== undefined"}},"position":"70,310","title":"If","transitions":[{"branch":"false","id":3988,"inputs":{},"position":"190,340 280,340 280,345 300,345","sourceConnector":"right","target":{"id":3972}},{"branch":"true","id":3990,"inputs":{},"position":"70,340 -170,340 -170,390","sourceConnector":"left","target":{"id":3964},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":3970,"inputs":{"condition":{"accessors":["$webRequestGetPdfSubReport1"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$webRequestGetPdfSubReport1.blob != null","source":"$webRequestGetPdfSubReport1.blob != null"}},"position":"10,560","title":"If","transitions":[{"branch":"true","id":3992,"inputs":{},"position":"10,590 -10,590 -10,690 80,690 80,710","sourceConnector":"left","target":{"id":3974},"targetConnector":"top"},{"branch":"false","id":3994,"inputs":{},"position":"130,590 210,585","sourceConnector":"right","target":{"id":3976}}]},{"action":"gcx:wf:core::SetProperty","id":3972,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"error","propertyValue":{"accessors":["$subReportUrl"],"annotations":[{"count":13,"index":45,"kind":"idref"}],"code":"{\n    \"error\": \"Can not run subreport from \" + $subReportUrl.result\n}","source":"{\n  \"error\": \"Can not run subreport from \" + $subReportUrl.result\n}"}},"position":"300,330","title":"Set Property"},{"action":"gcx:wf:core::AddItem","id":3974,"inputs":{"collection":{"accessors":["$subReports"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$subReports.result","source":"$subReports.result"},"item":{"accessors":["$webRequestGetPdfSubReport1"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$webRequestGetPdfSubReport1.blob","source":"$webRequestGetPdfSubReport1.blob"}},"position":"-40,710","title":"Add Item"},{"action":"gcx:wf:core::SetProperty","id":3976,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"error","propertyValue":{"accessors":["$runSubReport1"],"annotations":[{"count":14,"index":50,"kind":"idref"}],"code":"{\n    \"error\": \"Can not download subreport from \" + $runSubReport1.href\n}","source":"{\n  \"error\": \"Can not download subreport from \" + $runSubReport1.href\n}"}},"position":"210,570","title":"Set Property"}]},{"id":3998,"steps":[{"id":4000,"inputs":{},"position":"30,-50","purpose":"start","title":"Container","transitions":[{"id":4020,"inputs":{},"position":"120,10 120,40 140,40 140,60","sourceConnector":"bottom","target":{"id":4002}}]},{"action":"gcx:wf:core::CreateValue","id":4002,"inputs":{"expression":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result.reportUrl","source":"$currentReportToGenerate.result.reportUrl"}},"name":"subReportUrl","position":"20,60","title":"Create Value","transitions":[{"id":4036,"inputs":{},"position":"140,130 140,170","sourceConnector":"bottom","target":{"id":4004}}]},{"action":"gcx:wf:geocortex::RunReport","id":4004,"inputs":{"dataSources":{"accessors":["$currentReportToGenerate","$currentReportToGenerate"],"annotations":[{"count":24,"index":13,"kind":"idref"},{"count":24,"index":74,"kind":"idref"}],"code":"{\n    \"name\": $currentReportToGenerate.result.dataSourceName,\n    \"value\": $currentReportToGenerate.result.data\n}","source":"{\n    \"name\":$currentReportToGenerate.result.dataSourceName,\n    \"value\": $currentReportToGenerate.result.data\n}"},"parameters":{"accessors":["$reportConfig","$projectCommunityType","$projectLength"],"annotations":[{"count":13,"index":17,"kind":"idref"},{"count":21,"index":75,"kind":"idref"},{"count":14,"index":122,"kind":"idref"}],"code":"{\n    \"projectName\": $reportConfig.result.projectName,\n    \"projectCommunityType\": $projectCommunityType.result,\n    \"projectLength\": $projectLength.result,\n}","source":"{\n\n\"projectName\":$reportConfig.result.projectName,\n\"projectCommunityType\": $projectCommunityType.result,\n\"projectLength\": $projectLength.result,\n\n}"},"url":{"accessors":["$subReportUrl"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$subReportUrl.result","source":"$subReportUrl.result"}},"name":"runSubReport","position":"20,170","title":"Run Report","transitions":[{"id":4022,"inputs":{},"position":"140,240 140,290 130,290 130,310","sourceConnector":"bottom","target":{"id":4006},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":4006,"inputs":{"condition":{"accessors":["$runSubReport","$runSubReport"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":31,"kind":"idref"}],"code":"$runSubReport.href !== null && $runSubReport.href !== undefined","source":"$runSubReport.href !== null && $runSubReport.href !== undefined"}},"position":"70,310","title":"If","transitions":[{"branch":"false","id":4026,"inputs":{},"position":"190,340 280,340 280,345 300,345","sourceConnector":"right","target":{"id":4012}},{"branch":"true","id":4028,"inputs":{},"position":"70,340 -170,340 -170,390","sourceConnector":"left","target":{"id":4014},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":4008,"inputs":{"expect":"blob","url":{"accessors":["$runSubReport"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$runSubReport.href","source":"$runSubReport.href"}},"name":"webRequestGetPdfSubReport","position":"-40,450","title":"Send Web Request","transitions":[{"id":4024,"inputs":{},"position":"-40,485 -60,485 -60,540 70,540 70,560","sourceConnector":"left","target":{"id":4010},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":4010,"inputs":{"condition":{"accessors":["$webRequestGetPdfSubReport"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$webRequestGetPdfSubReport.blob != null","source":"$webRequestGetPdfSubReport.blob != null"}},"position":"10,560","title":"If","transitions":[{"branch":"true","id":4030,"inputs":{},"position":"10,590 -10,590 -10,690 80,690 80,710","sourceConnector":"left","target":{"id":4016},"targetConnector":"top"},{"branch":"false","id":4032,"inputs":{},"position":"130,590 210,585","sourceConnector":"right","target":{"id":4018}}]},{"action":"gcx:wf:core::SetProperty","id":4012,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"error","propertyValue":{"accessors":["$subReportUrl"],"annotations":[{"count":13,"index":45,"kind":"idref"}],"code":"{\n    \"error\": \"Can not run subreport from \" + $subReportUrl.result\n}","source":"{\n  \"error\": \"Can not run subreport from \" + $subReportUrl.result\n}"}},"position":"300,330","title":"Set Property"},{"action":"gcx:wf:core::SetProperty","id":4014,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"reportDownloadUrl","propertyValue":{"accessors":["$runSubReport"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$runSubReport.href","source":"$runSubReport.href "}},"position":"-290,390","title":"Set Property","transitions":[{"id":4034,"inputs":{},"position":"-170,420 -170,440 -310,440 -310,370 50,370 50,430 80,430 80,450","sourceConnector":"bottom","target":{"id":4008},"targetConnector":"top"}]},{"action":"gcx:wf:core::AddItem","id":4016,"inputs":{"collection":{"accessors":["$subReports"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$subReports.result","source":"$subReports.result"},"item":{"accessors":["$webRequestGetPdfSubReport"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$webRequestGetPdfSubReport.blob","source":"$webRequestGetPdfSubReport.blob"}},"position":"-40,710","title":"Add Item"},{"action":"gcx:wf:core::SetProperty","id":4018,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"error","propertyValue":{"accessors":["$runSubReport"],"annotations":[{"count":13,"index":50,"kind":"idref"}],"code":"{\n    \"error\": \"Can not download subreport from \" + $runSubReport.href\n}","source":"{\n  \"error\": \"Can not download subreport from \" + $runSubReport.href\n}"}},"position":"210,570","title":"Set Property"}]},{"id":4038,"steps":[{"action":"gcx:wf:core::CreateValue","id":4040,"inputs":{"expression":{"accessors":[],"code":"false","source":"false"}},"name":"endGPCheckingLoop","position":"-20,150","title":"Create Value","transitions":[{"id":4048,"inputs":{},"position":"100,220 100,290","sourceConnector":"bottom","target":{"id":4042}}]},{"action":"gcx:wf:core::CreateValue","id":4042,"inputs":{"expression":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"}},"name":"GPCheckingLoopStartTime","position":"-20,290","title":"Create Value","transitions":[{"id":4052,"inputs":{},"position":"100,360 100,440 110,440 110,460","sourceConnector":"bottom","target":{"id":4046}}]},{"id":4044,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":4050,"inputs":{},"position":"90,60 90,130 100,130 100,150","target":{"id":4040}}]},{"action":"gcx:wf:core:loop:Loop","id":4046,"inputs":{"exit":{"accessors":["$endGPCheckingLoop"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$endGPCheckingLoop.result","source":"$endGPCheckingLoop.result"},"limit":{"accessors":["$reportTimeoutMinutes","$millisecondsDelay"],"annotations":[{"count":21,"index":1,"kind":"idref"},{"count":18,"index":40,"kind":"idref"}],"code":"$reportTimeoutMinutes.result * 60 * 1000 / $millisecondsDelay.result","source":" $reportTimeoutMinutes.result*60*1000 / $millisecondsDelay.result"}},"name":"GPCheckingLoop","position":"-10,460","title":"Loop"}]},{"id":4054,"steps":[{"id":4056,"inputs":{},"position":"10,-110","purpose":"start","title":"Loop","transitions":[{"id":4064,"inputs":{},"position":"100,-50 100,40","sourceConnector":"bottom","target":{"id":4058},"targetConnector":"top"}]},{"action":"gcx:wf:core::Delay","id":4058,"inputs":{"duration":{"accessors":["$millisecondsDelay"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$millisecondsDelay.result","source":"$millisecondsDelay.result"}},"position":"-20,40","title":"Delay","transitions":[{"id":4068,"inputs":{},"position":"100,70 100,130","sourceConnector":"bottom","target":{"id":4060}}]},{"action":"gcx:wf:core:loop:ForEach","description":"Check gp task results","id":4060,"inputs":{"items":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports","source":"$reportConfig.result.reports"}},"name":"forEachreportToCheck","position":"-20,130","title":"For Each","transitions":[{"id":4066,"inputs":{},"position":"100,280 100,360","sourceConnector":"bottom","target":{"id":4062},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Check if loop can be finished","id":4062,"inputs":{},"position":"-20,360","title":"Container"}]},{"id":4070,"steps":[{"id":4072,"inputs":{},"position":"0,-40","purpose":"start","title":"Container","transitions":[{"id":4090,"inputs":{},"position":"90,20 90,50 100,50 100,70","target":{"id":4074}}]},{"action":"gcx:wf:core::CreateValue","id":4074,"inputs":{"expression":{"accessors":[],"code":"0","source":"0"}},"name":"numberOfGPFinished","position":"-20,70","title":"Create Value","transitions":[{"id":4092,"inputs":{},"position":"100,140 100,220","sourceConnector":"bottom","target":{"id":4076}}]},{"action":"gcx:wf:core:loop:ForEach","description":"Check gp task results","id":4076,"inputs":{"items":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports","source":"$reportConfig.result.reports"}},"name":"forEachreportToCheckFinished","position":"-20,220","title":"For Each","transitions":[{"id":4094,"inputs":{},"position":"100,370 100,410 120,410 120,430","sourceConnector":"bottom","target":{"id":4078}}]},{"action":"gcx:wf:core::Log","id":4078,"inputs":{"message":{"accessors":["$numberOfGPFinished","$reportConfig"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":13,"index":42,"kind":"idref"}],"code":"$numberOfGPFinished.result + \" out of \" + $reportConfig.result.reports.length + \" had finished gp stage processing\"","source":"$numberOfGPFinished.result + \" out of \" + $reportConfig.result.reports.length + \" had finished gp stage processing\""}},"position":"0,430","title":"Log","transitions":[{"id":4104,"inputs":{},"position":"120,460 120,475 90,475 90,490","sourceConnector":"bottom","target":{"id":4080},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":4080,"inputs":{"condition":{"accessors":["$numberOfGPFinished","$reportConfig"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":13,"index":30,"kind":"idref"}],"code":"$numberOfGPFinished.result >= $reportConfig.result.reports.length","source":"$numberOfGPFinished.result >= $reportConfig.result.reports.length"}},"position":"30,490","title":"If","transitions":[{"branch":"true","id":4096,"inputs":{},"position":"30,520 -70,520 -70,670","sourceConnector":"left","target":{"id":4082},"targetConnector":"top"},{"branch":"false","id":4098,"inputs":{},"position":"150,520 260,520 260,610","sourceConnector":"right","target":{"id":4084},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":4082,"inputs":{"object":{"accessors":["$endGPCheckingLoop"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$endGPCheckingLoop","source":"$endGPCheckingLoop"},"propertyName":"result","propertyValue":{"accessors":[],"code":"true","source":"true"}},"position":"-190,670","title":"Set Property"},{"action":"gcx:wf:core::If","id":4084,"inputs":{"condition":{"accessors":["Date","$GPCheckingLoopStartTime","$reportTimeoutMinutes"],"annotations":[{"count":4,"index":2,"kind":"idref"},{"count":24,"index":15,"kind":"idref"},{"count":21,"index":50,"kind":"idref"}],"code":"(Date.now() - $GPCheckingLoopStartTime.result) > $reportTimeoutMinutes.result * 60 * 1000","source":" (Date.now() - $GPCheckingLoopStartTime.result) > $reportTimeoutMinutes.result*60*1000"}},"position":"200,610","title":"If","transitions":[{"branch":"true","id":4100,"inputs":{},"position":"200,640 180,640 180,720 270,720 270,740","sourceConnector":"left","target":{"id":4086},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":4086,"inputs":{"object":{"accessors":["$endGPCheckingLoop"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$endGPCheckingLoop","source":"$endGPCheckingLoop"},"propertyName":"result","propertyValue":{"accessors":[],"code":"true","source":"true"}},"position":"150,740","title":"Set Property","transitions":[{"id":4102,"inputs":{},"position":"270,770 270,830","sourceConnector":"bottom","target":{"id":4088}}]},{"action":"gcx:wf:core:loop:ForEach","description":"Set GP task timed out if task is still executing","id":4088,"inputs":{"items":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports","source":"$reportConfig.result.reports"}},"name":"forEachReportToCheckGPTimeOut","position":"150,830","title":"For Each"}]},{"id":4106,"steps":[{"id":4108,"inputs":{},"position":"0,-200","purpose":"start","title":"For Each","transitions":[{"id":4120,"inputs":{},"position":"90,-140 90,-60","target":{"id":4110}}]},{"action":"gcx:wf:core::CreateValue","id":4110,"inputs":{"expression":{"accessors":["$forEachReportToCheckGPTimeOut"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$forEachReportToCheckGPTimeOut.item","source":"$forEachReportToCheckGPTimeOut.item"}},"name":"currentReportToCheckGPTimeOut","position":"-30,-60","title":"Create Value","transitions":[{"id":4122,"inputs":{},"position":"210,-25 290,-25 290,-40 370,-40 370,-20","sourceConnector":"right","target":{"id":4112},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":4112,"inputs":{"condition":{"accessors":["$currentReportToCheckGPTimeOut","$currentReportToCheckGPTimeOut"],"annotations":[{"count":30,"index":0,"kind":"idref"},{"count":30,"index":58,"kind":"idref"}],"code":"$currentReportToCheckGPTimeOut.result.dataUrl !== null && $currentReportToCheckGPTimeOut.result.dataUrl !== undefined","source":"$currentReportToCheckGPTimeOut.result.dataUrl !== null && $currentReportToCheckGPTimeOut.result.dataUrl !== undefined"}},"position":"310,-20","title":"If","transitions":[{"branch":"true","id":4124,"inputs":{},"position":"310,10 230,10 230,70 80,70 80,90","sourceConnector":"left","target":{"id":4114},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":4114,"inputs":{"condition":{"accessors":["$currentReportToCheckGPTimeOut"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$currentReportToCheckGPTimeOut.result.error == null","source":"$currentReportToCheckGPTimeOut.result.error == null "}},"position":"20,90","title":"If","transitions":[{"branch":"true","id":4126,"inputs":{},"position":"20,120 0,120 0,210 70,210 70,230","sourceConnector":"left","target":{"id":4116},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":4116,"inputs":{"condition":{"accessors":["$currentReportToCheckGPTimeOut"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$currentReportToCheckGPTimeOut.result.gpJob.jobStatus == \"esriJobSucceeded\"","source":"$currentReportToCheckGPTimeOut.result.gpJob.jobStatus == \"esriJobSucceeded\""}},"position":"10,230","title":"If","transitions":[{"branch":"false","id":4128,"inputs":{},"position":"130,260 370,260 370,350","sourceConnector":"right","target":{"id":4118},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":4118,"inputs":{"object":{"accessors":["$currentReportToCheckGPTimeOut"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$currentReportToCheckGPTimeOut.result","source":"$currentReportToCheckGPTimeOut.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Timed out executing GP task\"\n}","source":"{\n  \"error\": \"Timed out executing GP task\"\n}"}},"position":"250,350","title":"Set Property"}]},{"id":4130,"steps":[{"action":"gcx:wf:core::TryCatch","id":956,"inputs":{},"name":"tryCatchCheckIfReportFinished","position":"-50,-60","title":"Try Catch"},{"action":"gcx:wf:core::CreateValue","id":1145,"inputs":{"expression":{"accessors":["$forEachreportToCheckFinished"],"annotations":[{"count":29,"index":0,"kind":"idref"}],"code":"$forEachreportToCheckFinished.item","source":"$forEachreportToCheckFinished.item"}},"name":"currentReportToCheckFinish","position":"-40,-190","title":"Create Value","transitions":[{"id":1146,"inputs":{},"position":"80,-120 80,-80 70,-80 70,-60","sourceConnector":"bottom","target":{"id":956},"targetConnector":"top"}]},{"id":4132,"inputs":{},"position":"-10,-300","purpose":"start","title":"For Each","transitions":[{"id":963,"inputs":{},"position":"80,-240 80,-190","sourceConnector":"bottom","target":{"id":1145},"targetConnector":"top"}]}]},{"id":4258,"steps":[{"id":4260,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":4266,"inputs":{},"position":"90,60 90,140","target":{"id":4262}}]},{"action":"gcx:wf:core::CreateValue","id":4262,"inputs":{"expression":{"accessors":["$forEachreportToCheck"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$forEachreportToCheck.item","source":"$forEachreportToCheck.item"}},"name":"currentCheckingGPReport","position":"-30,140","title":"Create Value","transitions":[{"id":4268,"inputs":{},"position":"90,210 90,280","sourceConnector":"bottom","target":{"id":4264}}]},{"action":"gcx:wf:core::TryCatch","id":4264,"inputs":{},"name":"tryCatchCheckGPTask","position":"-30,280","title":"Try Catch"}]},{"id":4270,"steps":[{"action":"gcx:wf:core::ConvertToJson","id":929,"inputs":{"object":{"accessors":["$tryCatchCheckGPTask"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$tryCatchCheckGPTask.error","source":"$tryCatchCheckGPTask.error"}},"name":"errorJsonCheckGPTask","position":"-40,230","title":"Convert To JSON","transitions":[{"id":933,"inputs":{},"position":"80,300 80,360","sourceConnector":"bottom","target":{"id":932}}]},{"action":"gcx:wf:core::Log","id":932,"inputs":{"message":{"accessors":["$currentCheckingGPReport","$errorJsonCheckGPTask"],"annotations":[{"count":24,"index":51,"kind":"idref"},{"count":21,"index":96,"kind":"idref"}],"code":"\"Temporary error caught when check GP task for \" + $currentCheckingGPReport.result.name + \": \" + $errorJsonCheckGPTask.json","source":"\"Temporary error caught when check GP task for \" + $currentCheckingGPReport.result.name + \": \" +$errorJsonCheckGPTask.json"}},"position":"-40,360","title":"Log"},{"id":4272,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":4276,"inputs":{},"position":"90,60 90,210 80,210 80,230","target":{"id":929},"targetConnector":"top"}]}]},{"id":4278,"steps":[{"action":"gcx:wf:core::Log","id":878,"inputs":{"message":{"accessors":["$currentCheckingGPReport","$gpErrorJson"],"annotations":[{"count":24,"index":44,"kind":"idref"},{"count":12,"index":114,"kind":"idref"}],"code":"\"Error received checking GP task from: \" + $currentCheckingGPReport.result.dataUrl + \" with json response: {\" + $gpErrorJson.json + \"}\"","source":" \"Error received checking GP task from: \" + $currentCheckingGPReport.result.dataUrl + \" with json response: {\" +  $gpErrorJson.json + \"}\""}},"position":"270,160","title":"Log"},{"action":"gcx:wf:core::ConvertToJson","id":880,"inputs":{"object":{"accessors":["$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport.result","source":"$currentCheckingGPReport.result"}},"name":"gpErrorJson","position":"270,60","title":"Convert To JSON","transitions":[{"id":882,"inputs":{},"position":"390,130 390,160","sourceConnector":"bottom","target":{"id":878}}]},{"action":"gcx:wf:core::Log","id":928,"inputs":{"message":{"accessors":["$currentGPCheckingUrl"],"annotations":[{"count":21,"index":44,"kind":"idref"}],"code":"\"Can not check geoprocessing task from: \" + $currentGPCheckingUrl.result + \". NO result collected from GP task\"","source":"\"Can not check geoprocessing task from: \" + $currentGPCheckingUrl.result + \". NO result collected from GP task\""}},"position":"260,620","title":"Log"},{"id":4280,"inputs":{},"position":"0,-290","purpose":"start","title":"Try","transitions":[{"id":4300,"inputs":{},"position":"90,-230 90,-160","sourceConnector":"bottom","target":{"id":4282}}]},{"action":"gcx:wf:core::If","id":4282,"inputs":{"condition":{"accessors":["$currentCheckingGPReport","$currentCheckingGPReport","$currentCheckingGPReport","$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":36,"kind":"idref"},{"count":24,"index":79,"kind":"idref"},{"count":24,"index":131,"kind":"idref"}],"code":"$currentCheckingGPReport != null && $currentCheckingGPReport.result != null && $currentCheckingGPReport.result.dataUrl !== null && $currentCheckingGPReport.result.dataUrl !== undefined","source":"$currentCheckingGPReport != null && $currentCheckingGPReport.result != null && $currentCheckingGPReport.result.dataUrl !== null && $currentCheckingGPReport.result.dataUrl !== undefined"}},"position":"30,-160","title":"If","transitions":[{"branch":"true","id":4316,"inputs":{},"position":"30,-130 10,-130 10,-40 90,-40 90,-20","sourceConnector":"left","target":{"id":4296},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":4284,"inputs":{"expression":{"accessors":["$currentCheckingGPReport","$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":53,"kind":"idref"}],"code":"$currentCheckingGPReport.result.dataUrl + \"/jobs/\" + $currentCheckingGPReport.result.gpJob.jobId","source":"$currentCheckingGPReport.result.dataUrl + \"/jobs/\" + $currentCheckingGPReport.result.gpJob.jobId"}},"name":"currentGPCheckingUrl","position":"-30,120","title":"Create Value","transitions":[{"id":4302,"inputs":{},"position":"90,190 90,250","sourceConnector":"bottom","target":{"id":4286},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":4286,"inputs":{"method":"POST","query":{"accessors":[],"annotations":[],"code":"{\n    \"f\": \"json\"\n}","source":"{\n  \"f\":\"json\"\n}"},"url":{"accessors":["$currentGPCheckingUrl"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$currentGPCheckingUrl.result","source":"$currentGPCheckingUrl.result"}},"name":"webRequestCheckGPTask","position":"-30,250","title":"Send Web Request","transitions":[{"id":4304,"inputs":{},"position":"90,320 90,380 80,380 80,400","sourceConnector":"bottom","target":{"id":4288},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":4288,"inputs":{"condition":{"accessors":["$webRequestCheckGPTask","$webRequestCheckGPTask","$webRequestCheckGPTask"],"annotations":[{"count":22,"index":0,"kind":"idref"},{"count":22,"index":34,"kind":"idref"},{"count":22,"index":74,"kind":"idref"}],"code":"$webRequestCheckGPTask != null && $webRequestCheckGPTask.text !== null && $webRequestCheckGPTask.text !== undefined","source":"$webRequestCheckGPTask != null && $webRequestCheckGPTask.text !== null && $webRequestCheckGPTask.text !== undefined"}},"position":"20,400","title":"If","transitions":[{"branch":"true","id":936,"inputs":{},"position":"20,430 0,430 0,620 100,620 100,640","sourceConnector":"left","target":{"id":4290},"targetConnector":"top"},{"branch":"false","id":4308,"inputs":{},"position":"140,430 240,430 240,555 260,555","sourceConnector":"right","target":{"id":4292},"targetConnector":"left"}]},{"action":"gcx:wf:core::ParseJson","id":4290,"inputs":{"json":{"accessors":["$webRequestCheckGPTask"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$webRequestCheckGPTask.text","source":"$webRequestCheckGPTask.text"}},"name":"parseJobJson1","position":"-20,640","title":"Parse JSON","transitions":[{"id":4310,"inputs":{},"position":"100,710 100,790","sourceConnector":"bottom","target":{"id":4294},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":4292,"inputs":{"object":{"accessors":["$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport.result","source":"$currentCheckingGPReport.result"},"propertyName":"error","propertyValue":{"accessors":["$currentGPCheckingUrl"],"annotations":[{"count":21,"index":57,"kind":"idref"}],"code":"{\n    \"error\": \"Can not check geoprocessing task from: \" + $currentGPCheckingUrl.result + \". NO result collected from GP task\"\n}","source":"{\n  \"error\": \"Can not check geoprocessing task from: \" + $currentGPCheckingUrl.result + \". NO result collected from GP task\"\n}"}},"position":"260,540","title":"Set Property","transitions":[{"id":931,"inputs":{},"position":"380,570 380,620","sourceConnector":"bottom","target":{"id":928},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":4294,"inputs":{"object":{"accessors":["$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport.result","source":"$currentCheckingGPReport.result"},"propertyName":"gpJob","propertyValue":{"accessors":["$parseJobJson1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson1.result","source":"$parseJobJson1.result"}},"position":"-20,790","title":"Set Property"},{"action":"gcx:wf:core::If","id":4296,"inputs":{"condition":{"accessors":["$currentCheckingGPReport","$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":50,"kind":"idref"}],"code":"$currentCheckingGPReport.result.error === null || $currentCheckingGPReport.result.error === undefined","source":"$currentCheckingGPReport.result.error === null || $currentCheckingGPReport.result.error === undefined"}},"position":"30,-20","title":"If","transitions":[{"branch":"false","id":927,"inputs":{},"position":"150,10 390,10 390,60","sourceConnector":"right","target":{"id":880},"targetConnector":"top"},{"branch":"true","id":4312,"inputs":{},"position":"30,10 10,10 10,100 90,100 90,120","sourceConnector":"left","target":{"id":4284}}]}]},{"id":4318,"steps":[{"id":4320,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":4330,"inputs":{},"position":"90,60 90,140","target":{"id":4322}}]},{"action":"gcx:wf:core::CreateValue","id":4322,"inputs":{"expression":{"accessors":["$forEachreportToStart"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$forEachreportToStart.item","source":"$forEachreportToStart.item"}},"name":"currentReport","position":"-30,140","title":"Create Value","transitions":[{"id":4332,"inputs":{},"position":"90,210 90,280","sourceConnector":"bottom","target":{"id":4324},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":4324,"inputs":{"message":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":34,"kind":"idref"}],"code":"\"Start processing sub report: \" + $currentReport.result.name","source":"\"Start processing sub report: \" + $currentReport.result.name"}},"position":"-30,280","title":"Log","transitions":[{"id":4336,"inputs":{},"position":"90,310 90,380","sourceConnector":"bottom","target":{"id":4326}}]},{"action":"gcx:wf:core::TryCatch","id":4326,"inputs":{},"name":"tryCatchStartGPTask","position":"-30,380","title":"Try Catch","transitions":[{"id":4334,"inputs":{},"position":"90,500 90,560 100,560 100,580","sourceConnector":"bottom","target":{"id":4328},"targetConnector":"top"}]},{"action":"gcx:wf:core::Delay","description":"Delay","id":4328,"inputs":{"duration":{"accessors":["$millisecondsDelayBetweenGPTask"],"annotations":[{"count":31,"index":0,"kind":"idref"}],"code":"$millisecondsDelayBetweenGPTask.result","source":"$millisecondsDelayBetweenGPTask.result"}},"position":"-20,580","title":"Delay"}]},{"id":4338,"steps":[{"id":4340,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":4346,"inputs":{},"position":"90,60 90,130 80,130 80,150","sourceConnector":"bottom","target":{"id":4342}}]},{"action":"gcx:wf:core::SetProperty","id":4342,"inputs":{"object":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result","source":"$currentReport.result"},"propertyName":"error","propertyValue":{"accessors":["$tryCatchStartGPTask"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$tryCatchStartGPTask.error","source":"$tryCatchStartGPTask.error"}},"position":"-40,150","title":"Set Property","transitions":[{"id":4348,"inputs":{},"position":"80,180 80,220","sourceConnector":"bottom","target":{"id":4344}}]},{"action":"gcx:wf:core::Log","id":4344,"inputs":{"message":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":50,"kind":"idref"}],"code":"\"Error caught when tried to start gp task for \" + $currentReport.result.name","source":"\"Error caught when tried to start gp task for \" + $currentReport.result.name"}},"position":"-40,220","title":"Log"}]},{"id":4350,"steps":[{"id":4352,"inputs":{},"position":"-20,-290","purpose":"start","title":"Try","transitions":[{"id":4386,"inputs":{},"position":"70,-230 70,-170 80,-170 80,-150","sourceConnector":"bottom","target":{"id":4354},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":4354,"inputs":{"condition":{"accessors":["$currentReport","$currentReport","$currentReport","$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"},{"count":14,"index":25,"kind":"idref"},{"count":14,"index":58,"kind":"idref"},{"count":14,"index":100,"kind":"idref"}],"code":"$currentReport != null && $currentReport.result != null && $currentReport.result.dataUrl !== null && $currentReport.result.dataUrl !== undefined","source":"$currentReport!= null && $currentReport.result != null && $currentReport.result.dataUrl !== null && $currentReport.result.dataUrl !== undefined"}},"position":"20,-150","title":"If","transitions":[{"branch":"true","id":4414,"inputs":{},"position":"20,-120 0,-120 0,-20 90,-20 90,0","sourceConnector":"left","target":{"id":4356},"targetConnector":"top"},{"branch":"false","id":4416,"inputs":{},"position":"140,-120 220,-120 220,-115 240,-115","sourceConnector":"right","target":{"id":4384}}]},{"action":"gcx:wf:core::CreateValue","id":4356,"inputs":{"expression":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result.dataUrl + \"/submitJob\"","source":"$currentReport.result.dataUrl + \"/submitJob\""}},"name":"currentGPUrl","position":"-30,0","title":"Create Value","transitions":[{"id":4388,"inputs":{},"position":"90,70 90,130","sourceConnector":"bottom","target":{"id":4358}}]},{"action":"gcx:wf:core::ConvertToJson","id":4358,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.projectLine","source":"$reportConfig.result.projectLine"}},"name":"projectLineJsonString","position":"-30,130","title":"Convert To JSON","transitions":[{"id":4402,"inputs":{},"position":"90,200 90,250","sourceConnector":"bottom","target":{"id":4376}}]},{"action":"gcx:wf:core:request:WebRequest","id":4360,"inputs":{"form":{"accessors":["$projectLineJsonString","$reportConfig","$reportConfig","$reportConfig","$PerfOutcomes","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig"],"annotations":[{"count":22,"index":19,"kind":"idref"},{"count":13,"index":66,"kind":"idref"},{"count":13,"index":117,"kind":"idref"},{"count":13,"index":170,"kind":"idref"},{"count":13,"index":230,"kind":"idref"},{"count":13,"index":269,"kind":"idref"},{"count":13,"index":305,"kind":"idref"},{"count":13,"index":354,"kind":"idref"},{"count":13,"index":422,"kind":"idref"},{"count":13,"index":464,"kind":"idref"},{"count":13,"index":505,"kind":"idref"}],"code":"{\n    \"Project_Line\": $projectLineJsonString.json,\n    \"Project_Name\": $reportConfig.result.projectName,\n    \"Jurisdiction\": $reportConfig.result.jurisdiction,\n    \"Project_Type\": $reportConfig.result.projectType,\n    \"Performance_Outcomes\": $PerfOutcomes.result,\n    \"Project_ADT\": $reportConfig.result.ADT,\n    \"AADT\": $reportConfig.result.ADT,\n    \"Posted_Speed_Limit\": $reportConfig.result.postedSpeedLimit,\n    \"Pavement_Condition_Index\": $reportConfig.result.PCI,\n    \"Project_PCI\": $reportConfig.result.PCI,\n    \"User_Email\": $reportConfig.result.email,\n    \"f\": \"json\"\n}","source":"{\n  \"Project_Line\":$projectLineJsonString.json,\n  \"Project_Name\": $reportConfig.result.projectName,\n  \"Jurisdiction\":$reportConfig.result.jurisdiction,\n  \"Project_Type\": $reportConfig.result.projectType,\n  \"Performance_Outcomes\": $PerfOutcomes.result, \n  \"Project_ADT\":$reportConfig.result.ADT,\n  \"AADT\": $reportConfig.result.ADT,\n  \"Posted_Speed_Limit\":$reportConfig.result.postedSpeedLimit,\n  \"Pavement_Condition_Index\":$reportConfig.result.PCI,\n  \"Project_PCI\":$reportConfig.result.PCI,\n  \"User_Email\":$reportConfig.result.email,\n  \"f\":\"json\"\n}"},"headers":{"accessors":[],"annotations":[],"code":"{\n    \"content-type\": \"application/x-www-form-urlencoded\"\n}","source":"{\n  \"content-type\": \"application/x-www-form-urlencoded\"\n}"},"method":"POST","url":{"accessors":["$currentGPUrl"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$currentGPUrl.result","source":"$currentGPUrl.result"}},"name":"webRequestStartGPTask","position":"-30,320","title":"Send Web Request","transitions":[{"id":4390,"inputs":{},"position":"90,390 90,430","sourceConnector":"bottom","target":{"id":4362}}]},{"action":"gcx:wf:core::Log","id":4362,"inputs":{"message":{"accessors":["$webRequestStartGPTask"],"annotations":[{"count":22,"index":38,"kind":"idref"}],"code":"\"Response collected from GP task: \" + $webRequestStartGPTask.text","source":"\"Response collected from GP task: \" + $webRequestStartGPTask.text "}},"position":"-30,430","title":"Log","transitions":[{"id":4406,"inputs":{},"position":"90,460 90,520","sourceConnector":"bottom","target":{"id":4368}}]},{"action":"gcx:wf:core::SetProperty","id":4364,"inputs":{"object":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result","source":"$currentReport.result"},"propertyName":"gpJob","propertyValue":{"accessors":["$parseJobJson"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$parseJobJson.result","source":"$parseJobJson.result"}},"position":"0,810","title":"Set Property","transitions":[{"id":4392,"inputs":{},"position":"120,840 120,930 140,930 140,950","sourceConnector":"bottom","target":{"id":4366},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":4366,"inputs":{"condition":{"accessors":["$currentReport","$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"},{"count":14,"index":46,"kind":"idref"}],"code":"$currentReport.result.gpJob.jobId === null || $currentReport.result.gpJob.jobId === undefined","source":"$currentReport.result.gpJob.jobId === null || $currentReport.result.gpJob.jobId === undefined"}},"position":"80,950","title":"If","transitions":[{"branch":"true","id":4408,"inputs":{},"position":"80,980 60,980 60,1030 150,1030 150,1050","sourceConnector":"left","target":{"id":4378}}]},{"action":"gcx:wf:core::If","id":4368,"inputs":{"condition":{"accessors":["$webRequestStartGPTask","$webRequestStartGPTask"],"annotations":[{"count":22,"index":0,"kind":"idref"},{"count":22,"index":40,"kind":"idref"}],"code":"$webRequestStartGPTask.text !== null && $webRequestStartGPTask.text !== undefined","source":"$webRequestStartGPTask.text !== null && $webRequestStartGPTask.text !== undefined"}},"position":"30,520","title":"If","transitions":[{"branch":"false","id":4394,"inputs":{},"position":"150,550 240,550 240,555 260,555","sourceConnector":"right","target":{"id":4370},"targetConnector":"left"},{"branch":"true","id":4396,"inputs":{},"position":"30,550 -40,550 -40,675 -20,675","sourceConnector":"left","target":{"id":4372},"targetConnector":"left"}]},{"action":"gcx:wf:core::SetProperty","id":4370,"inputs":{"object":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result","source":"$currentReport.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Can not start geoprocessing task.\"\n}","source":"{\n  \"error\": \"Can not start geoprocessing task.\"\n}"}},"position":"260,540","title":"Set Property","transitions":[{"id":4400,"inputs":{},"position":"380,570 380,600 390,600 390,620","sourceConnector":"bottom","target":{"id":4374}}]},{"action":"gcx:wf:core::ParseJson","id":4372,"inputs":{"json":{"accessors":["$webRequestStartGPTask"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$webRequestStartGPTask.text","source":"$webRequestStartGPTask.text"}},"name":"parseJobJson","position":"-20,640","title":"Parse JSON","transitions":[{"id":4398,"inputs":{},"position":"100,710 100,790 120,790 120,810","sourceConnector":"bottom","target":{"id":4364},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":4374,"inputs":{"message":{"accessors":["$currentGPUrl"],"annotations":[{"count":13,"index":53,"kind":"idref"}],"code":"\"error:  Can not start geoprocessing task from \" + $currentGPUrl.result","source":" \"error:  Can not start geoprocessing task from \" +  $currentGPUrl.result"}},"position":"270,620","title":"Log"},{"action":"gcx:wf:core::Log","id":4376,"inputs":{"message":{"accessors":["$currentGPUrl"],"annotations":[{"count":13,"index":25,"kind":"idref"}],"code":"\"Start GP task from: \" + $currentGPUrl.result","source":"\"Start GP task from: \" + $currentGPUrl.result"}},"position":"-30,250","title":"Log","transitions":[{"id":4404,"inputs":{},"position":"90,280 90,320","sourceConnector":"bottom","target":{"id":4360}}]},{"action":"gcx:wf:core::If","id":4378,"inputs":{"condition":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result.gpJob.error != null","source":"$currentReport.result.gpJob.error != null"}},"position":"90,1050","title":"If","transitions":[{"branch":"true","id":4410,"inputs":{},"position":"90,1080 -20,1080 -20,1170","sourceConnector":"left","target":{"id":4380},"targetConnector":"top"},{"branch":"false","id":4412,"inputs":{},"position":"210,1080 280,1080 280,1170","sourceConnector":"right","target":{"id":4382},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":4380,"inputs":{"object":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result","source":"$currentReport.result"},"propertyName":"error","propertyValue":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result.gpJob.error","source":"$currentReport.result.gpJob.error"}},"position":"-140,1170","title":"Set Property"},{"action":"gcx:wf:core::SetProperty","id":4382,"inputs":{"object":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result","source":"$currentReport.result"},"propertyName":"error","propertyValue":{"accessors":[],"code":"\"Could not start gp task\"","source":"\"Could not start gp task\""}},"position":"160,1170","title":"Set Property"},{"action":"gcx:wf:core::Log","id":4384,"inputs":{"message":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":13,"kind":"idref"}],"code":"\"Report: \" + $currentReport.result.name + \" does not have GP data url\"","source":"\"Report: \" + $currentReport.result.name  + \" does not have GP data url\""}},"position":"240,-130","title":"Log"}]},{"id":4418,"steps":[{"action":"gcx:wf:core::Container","id":848,"inputs":{},"name":"Constants","position":"-60,130","title":"Container"},{"id":4420,"inputs":{},"position":"-20,-600","purpose":"start","title":"Container","transitions":[{"id":4428,"inputs":{},"position":"70,-540 70,-470 60,-470 60,-450","sourceConnector":"bottom","target":{"id":4422},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Report Setting and Configuration","id":4422,"inputs":{},"position":"-60,-450","title":"Report Setting Container","transitions":[{"id":4432,"inputs":{},"position":"60,-310 60,-220","sourceConnector":"bottom","target":{"id":4424},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Mail Settings ","id":4424,"inputs":{},"position":"-60,-220","title":"Mail Settings Container","transitions":[{"id":4430,"inputs":{},"position":"60,-100 60,-30","sourceConnector":"bottom","target":{"id":4426}}]},{"action":"gcx:wf:core::Container","id":4426,"inputs":{},"position":"-60,-30","title":"Variables","transitions":[{"id":852,"inputs":{},"position":"60,60 60,130","sourceConnector":"bottom","target":{"id":848}}]}]},{"id":4434,"steps":[{"action":"gcx:wf:core::CreateValue","id":935,"inputs":{},"name":"projectUniqueID","position":"-30,620","title":"Create Value"},{"id":4436,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":4446,"inputs":{},"position":"90,60 90,110","target":{"id":4438}}]},{"action":"gcx:wf:core::CreateValue","id":4438,"inputs":{"expression":{"accessors":[],"code":"0","source":"0"}},"name":"estimatedProcessingTime","position":"-30,110","title":"Create Value","transitions":[{"id":4448,"inputs":{},"position":"90,180 90,240","sourceConnector":"bottom","target":{"id":4440}}]},{"action":"gcx:wf:core::CreateValue","id":4440,"inputs":{},"name":"projectCommunityType","position":"-30,240","title":"Create Value","transitions":[{"id":4450,"inputs":{},"position":"90,310 90,360","sourceConnector":"bottom","target":{"id":4442}}]},{"action":"gcx:wf:core::CreateValue","id":4442,"inputs":{"expression":{"accessors":[],"code":" 0","source":" 0"}},"name":"projectLength","position":"-30,360","title":"Create Value","transitions":[{"id":4452,"inputs":{},"position":"90,430 90,490","sourceConnector":"bottom","target":{"id":4444}}]},{"action":"gcx:wf:core::CreateValue","id":4444,"inputs":{},"name":"titleReportImageUrl","position":"-30,490","title":"Create Value","transitions":[{"id":937,"inputs":{},"position":"90,560 90,620","sourceConnector":"bottom","target":{"id":935}}]}]},{"id":4454,"steps":[{"id":4456,"inputs":{},"position":"-10,-80","purpose":"start","title":"Container","transitions":[{"id":4492,"inputs":{},"position":"80,-20 80,20","sourceConnector":"bottom","target":{"id":4458}}]},{"action":"gcx:wf:core::GetWorkflowInputs","id":4458,"inputs":{},"name":"getWorkflowInputs","position":"-40,20","title":"Get Workflow Inputs","transitions":[{"id":943,"inputs":{},"position":"80,90 80,140","sourceConnector":"bottom","target":{"id":4460},"targetConnector":"top"}]},{"action":"gcx:wf:core::ConvertToJson","id":4460,"inputs":{"object":{"accessors":["$getWorkflowInputs"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$getWorkflowInputs.inputs","source":"$getWorkflowInputs.inputs"}},"name":"inputJson","position":"-40,140","title":"Convert To JSON","transitions":[{"id":945,"inputs":{},"position":"80,210 80,250","sourceConnector":"bottom","target":{"id":4486},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":4462,"inputs":{},"name":"reportConfig","position":"-30,320","title":"Create Value","transitions":[{"id":946,"inputs":{},"position":"90,390 90,450","sourceConnector":"bottom","target":{"id":4464}}]},{"action":"gcx:wf:core::ParseJson","description":"Need to clone the input to a new object as the original workflow input should not be modified","id":4464,"inputs":{"json":{"accessors":["$inputJson"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$inputJson.json","source":"$inputJson.json"}},"name":"cloneInputJsonToNewObject","position":"-30,450","title":"Clone workflow input","transitions":[{"id":4524,"inputs":{},"position":"90,600 90,680","sourceConnector":"bottom","target":{"id":4488},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":4466,"inputs":{"expression":{"accessors":[],"code":"180","source":"180"}},"name":"reportTimeoutMinutes","position":"0,820","title":"Create Value","transitions":[{"id":4498,"inputs":{},"position":"120,890 120,950","sourceConnector":"bottom","target":{"id":4468},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":4468,"inputs":{"expression":{"accessors":[],"code":"500","source":"500"}},"name":"millisecondsDelay","position":"0,950","title":"Create Value","transitions":[{"id":4500,"inputs":{},"position":"120,1020 120,1050 110,1050 110,1070","sourceConnector":"bottom","target":{"id":4470},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":4470,"inputs":{"expression":{"accessors":[],"code":"1","source":"1"}},"name":"millisecondsDelayBetweenGPTask","position":"-10,1070","title":"Create Value","transitions":[{"id":4526,"inputs":{},"position":"110,1140 110,1160 120,1160 120,1180","sourceConnector":"bottom","target":{"id":4472},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":4472,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":26,"kind":"idref"},{"count":13,"index":57,"kind":"idref"},{"count":13,"index":90,"kind":"idref"},{"count":13,"index":128,"kind":"idref"},{"count":13,"index":169,"kind":"idref"},{"count":13,"index":215,"kind":"idref"}],"code":"$reportConfig === null || $reportConfig === undefined || $reportConfig.result === null || $reportConfig.result === undefined || $reportConfig.result.reports === null || $reportConfig.result.reports === undefined || $reportConfig.result.reports.length <= 0","source":"$reportConfig === null || $reportConfig === undefined || $reportConfig.result === null || $reportConfig.result === undefined || $reportConfig.result.reports === null || $reportConfig.result.reports === undefined || $reportConfig.result.reports.length <= 0"}},"position":"60,1180","title":"If","transitions":[{"branch":"true","id":4502,"inputs":{},"position":"60,1210 -150,1210 -150,1250","sourceConnector":"left","target":{"id":4474},"targetConnector":"top"},{"branch":"false","id":4504,"inputs":{},"position":"180,1210 200,1210 200,1300 120,1300 120,1320","sourceConnector":"right","target":{"id":4476},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetWorkflowOutput","id":4474,"inputs":{"name":"output","value":{"accessors":[],"annotations":[],"code":"{\n    \"error\": {\n        \"message\": \"Invalid report request or no sub reports selected\"\n    },\n    \"message\": \"Invalid report request or no sub reports selected\",\n    \"status\": \"Error\"\n}","source":"{\n   \"error\": {\n        \"message\": \"Invalid report request or no sub reports selected\"\n   },\n   \"message\": \"Invalid report request or no sub reports selected\",\n   \"status\": \"Error\"\n}"}},"position":"-270,1250","title":"Set Workflow Output","transitions":[{"id":4506,"inputs":{},"position":"-270,1265 -350,1265 -350,1340","sourceConnector":"left","target":{"id":4478}}]},{"action":"gcx:wf:core::If","id":4476,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":45,"kind":"idref"}],"code":"$reportConfig.result.projectLine === null || $reportConfig.result.projectLine === undefined","source":"$reportConfig.result.projectLine === null || $reportConfig.result.projectLine === undefined"}},"position":"60,1320","title":"If","transitions":[{"branch":"true","id":4508,"inputs":{},"position":"60,1350 -150,1350 -150,1490","sourceConnector":"left","target":{"id":4480},"targetConnector":"top"},{"branch":"false","id":4510,"inputs":{},"position":"180,1350 200,1350 200,1530 110,1530 110,1550","sourceConnector":"right","target":{"id":4482},"targetConnector":"top"}]},{"action":"gcx:wf:core::Exit","id":4478,"inputs":{},"position":"-440,1340","title":"Exit"},{"action":"gcx:wf:core::SetWorkflowOutput","id":4480,"inputs":{"name":"output","value":{"accessors":[],"annotations":[],"code":"{\n    \"error\": {\n        \"message\": \"No project line specified\"\n    },\n    \"message\": \"No project line specified\",\n    \"status\": \"Error\"\n}","source":"{\n   \"error\": {\n        \"message\": \"No project line specified\"\n   },\n   \"message\": \"No project line specified\",\n   \"status\": \"Error\"\n}"}},"position":"-270,1490","title":"Set Workflow Output","transitions":[{"id":4512,"inputs":{},"position":"-270,1505 -350,1505 -350,1400","sourceConnector":"left","target":{"id":4478}}]},{"action":"gcx:wf:core::If","id":4482,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":39,"kind":"idref"}],"code":"$reportConfig.result.email === null || $reportConfig.result.email === undefined","source":"$reportConfig.result.email === null || $reportConfig.result.email === undefined"}},"position":"50,1550","title":"If","transitions":[{"branch":"true","id":4514,"inputs":{},"position":"50,1580 -150,1580 -150,1610","sourceConnector":"left","target":{"id":4484},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetWorkflowOutput","id":4484,"inputs":{"name":"output","value":{"accessors":[],"annotations":[],"code":"{\n    \"error\": {\n        \"message\": \"No email specified\"\n    },\n    \"message\": \"No email specified\",\n    \"status\": \"Error\"\n}","source":"{\n   \"error\": {\n        \"message\": \"No email specified\"\n   },\n   \"message\": \"No email specified\",\n   \"status\": \"Error\"\n}"}},"position":"-270,1610","title":"Set Workflow Output","transitions":[{"id":4516,"inputs":{},"position":"-270,1625 -350,1625 -350,1400","sourceConnector":"left","target":{"id":4478}}]},{"action":"gcx:wf:core::Log","id":4486,"inputs":{"message":{"accessors":["$inputJson"],"annotations":[{"count":10,"index":31,"kind":"idref"}],"code":"\"Workflow input collected: \" + $inputJson.json","source":"\"Workflow input collected: \" + $inputJson.json"}},"position":"-40,250","title":"Log","transitions":[{"id":4518,"inputs":{},"position":"80,280 80,300 90,300 90,320","sourceConnector":"bottom","target":{"id":4462}}]},{"action":"gcx:wf:core::SetProperty","id":4488,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig","source":"$reportConfig"},"propertyName":"result","propertyValue":{"accessors":["$cloneInputJsonToNewObject"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$cloneInputJsonToNewObject.result","source":"$cloneInputJsonToNewObject.result"}},"position":"-30,680","title":"Set Property","transitions":[{"id":947,"inputs":{},"position":"90,710 90,800 120,800 120,820","sourceConnector":"bottom","target":{"id":4466},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","description":"For testing only, set workflow input for testing","id":4490,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig","source":"$reportConfig"},"propertyName":"result","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"reportName\": \"Community Design\",\n    \"projectLine\": {\n        \"geometryType\": \"esriGeometryPolyline\",\n        \"sr\": {\n            \"wkid\": 102642\n        },\n        \"features\": [\n            {\n                \"geometry\": {\n                    \"spatialReference\": {\n                        \"wkid\": 102642\n                    },\n                    \"paths\": [\n                        [\n                            [\n                                6682834.339038162,\n                                2008827.6448303296\n                            ],\n                            [\n                                6683018.20827164,\n                                2009012.4817155805\n                            ],\n                            [\n                                6683476.581184241,\n                                2009750.5409328379\n                            ],\n                            [\n                                6684306.110269466,\n                                2010122.3934469999\n                            ],\n                            [\n                                6685227.974611226,\n                                2010494.710557597\n                            ],\n                            [\n                                6686331.882748199,\n                                2011419.8228063449\n                            ],\n                            [\n                                6687715.450877168,\n                                2011794.4299993918\n                            ],\n                            [\n                                6689839.628134035,\n                                2011804.8385767544\n                            ],\n                            [\n                                6692426.517112512,\n                                2011633.7909720827\n                            ],\n                            [\n                                6693996.102115986,\n                                2011733.7226217804\n                            ],\n                            [\n                                6695842.745027093,\n                                2011835.1945954629\n                            ],\n                            [\n                                6695664.213016685,\n                                2010638.5007016976\n                            ],\n                            [\n                                6694934.309040888,\n                                2008886.9783839088\n                            ],\n                            [\n                                6694664.759936581,\n                                2007413.700850268\n                            ],\n                            [\n                                6694301.857007742,\n                                2006123.868166893\n                            ],\n                            [\n                                6695146.966101938,\n                                2003460.0532927598\n                            ],\n                            [\n                                6696166.5422928589,\n                                2002821.2443045313\n                            ],\n                            [\n                                6696723.7401365679,\n                                2002272.0614817709\n                            ],\n                            [\n                                6697007.629987034,\n                                2000985.311226373\n                            ],\n                            [\n                                6697108.6667729369,\n                                1999329.4492889876\n                            ],\n                            [\n                                6697109.147001803,\n                                1999237.4286667205\n                            ],\n                            [\n                                6698133.775880099,\n                                1997678.3320476548\n                            ],\n                            [\n                                6699153.165157541,\n                                1997131.5260593456\n                            ],\n                            [\n                                6697956.698354091,\n                                1996204.878183904\n                            ],\n                            [\n                                6695552.101068032,\n                                1996560.4968017708\n                            ],\n                            [\n                                6693796.316915683,\n                                1996551.4995354068\n                            ],\n                            [\n                                6692595.448112842,\n                                1996453.3814971\n                            ],\n                            [\n                                6692225.805271902,\n                                1996451.519558976\n                            ],\n                            [\n                                6691948.578411587,\n                                1996450.1265865807\n                            ],\n                            [\n                                6690842.397732138,\n                                1995892.387712608\n                            ],\n                            [\n                                6690569.278270818,\n                                1995062.68937963\n                            ]\n                        ]\n                    ]\n                }\n            }\n        ]\n    },\n    \"projectName\": \"Community Design Test Project\",\n    \"jurisdiction\": \"Community Design Test Jurisdiction\",\n    \"projectType\": \"Community Design\",\n    \"email\": \"yongzhi.yu@vertigis.com\",\n    \"ADT\": 100,\n    \"postedSpeedLimit\": 48,\n    \"PCI\": 67,\n    \"titleReport\": {\n        \"dataSourceName\": \"TitleReportDataSource\",\n        \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=5407317536c34d60b42e8d4e1de3280a\",\n        \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPTitleAndGuide/GPServer/RPTitleAndGuide\",\n        \"maxProcessingTimeInMins\": 10\n    },\n    \"reports\": [\n        {\n            \"name\": \"reduce VMT\",\n            \"dataSourceName\": \"SACOG_RegionalProgram_Freeway_ReduceVMT\",\n            \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=59a9262a9cd34903a0077acfaad611a1\",\n            \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpVMT/GPServer/RPFwyExpVMT\",\n            \"maxProcessingTimeInMins\": 10\n        },\n        {\n            \"name\": \"Reduce Congestion\",\n            \"dataSourceName\": \"SACOG_RegionalProgram_Freeway_ReduceCongestion\",\n            \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=db062a075fb54faaa0e2ef8ea06e7df7\",\n            \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpCongestion/GPServer/RPFwyExpCongestion\",\n            \"maxProcessingTimeInMins\": 10\n        },\n        {\n            \"name\": \"Encourage Multimodal Travel\",\n            \"dataSourceName\": \"SACOG_RegionalProgram_Freeway_Multimodal\",\n            \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=da0d38a52dd149cb9c9b388208a7f73c\",\n            \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpMultiModal/GPServer/RPFwyExpMultiModal\",\n            \"maxProcessingTimeInMins\": 10\n        },\n        {\n            \"name\": \"Promote Economic Prosperity\",\n            \"dataSourceName\": \"SACOG_RegionalProgram_Freeway_EconProsperity\",\n            \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=30b048081d2f4692aa144a6b10c2a8db\",\n            \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpEconProsp/GPServer/RPFwyExpEconProsp\",\n            \"maxProcessingTimeInMins\": 10\n        },\n        {\n            \"name\": \"Improve Freight Mobility\",\n            \"dataSourceName\": \"SACOG_RegionalProgram_Freeway_Freight\",\n            \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=7ca5af8b74e641bfa0a0cd95f74cd8b5\",\n            \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpFreight/GPServer/RPFwyExpFreight\",\n            \"maxProcessingTimeInMins\": 10\n        },\n        {\n            \"name\": \"Make a Safer Transportation System\",\n            \"dataSourceName\": \"SACOG_RegionalProgram_Freeway_Safety\",\n            \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=cca34d23f77d40d2b52239501b371eb7\",\n            \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpSafety/GPServer/RPFwyExpSafety\",\n            \"maxProcessingTimeInMins\": 10\n        }\n    ]\n}","source":"{\n\t\"reportName\": \"Community Design\",\n\t\"projectLine\": {\n\t\t\"geometryType\": \"esriGeometryPolyline\",\n\t\t\"sr\": {\n\t\t\t\"wkid\": 102642\n\t\t},\n\t\t\"features\": [\n\t\t\t{\n\t\t\t\t\"geometry\": {\n\t\t\t\t\t\"spatialReference\": {\n\t\t\t\t\t\t\"wkid\": 102642\n\t\t\t\t\t},\n\t\t\t\t\t\"paths\": [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6682834.339038162,\n\t\t\t\t\t\t\t\t2008827.6448303296\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6683018.20827164,\n\t\t\t\t\t\t\t\t2009012.4817155805\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6683476.581184241,\n\t\t\t\t\t\t\t\t2009750.5409328379\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6684306.110269466,\n\t\t\t\t\t\t\t\t2010122.3934469999\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6685227.974611226,\n\t\t\t\t\t\t\t\t2010494.710557597\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6686331.882748199,\n\t\t\t\t\t\t\t\t2011419.8228063449\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6687715.450877168,\n\t\t\t\t\t\t\t\t2011794.4299993918\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6689839.628134035,\n\t\t\t\t\t\t\t\t2011804.8385767544\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6692426.517112512,\n\t\t\t\t\t\t\t\t2011633.7909720827\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6693996.102115986,\n\t\t\t\t\t\t\t\t2011733.7226217804\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6695842.745027093,\n\t\t\t\t\t\t\t\t2011835.1945954629\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6695664.213016685,\n\t\t\t\t\t\t\t\t2010638.5007016976\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6694934.309040888,\n\t\t\t\t\t\t\t\t2008886.9783839088\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6694664.759936581,\n\t\t\t\t\t\t\t\t2007413.700850268\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6694301.857007742,\n\t\t\t\t\t\t\t\t2006123.868166893\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6695146.966101938,\n\t\t\t\t\t\t\t\t2003460.0532927598\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6696166.5422928589,\n\t\t\t\t\t\t\t\t2002821.2443045313\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6696723.7401365679,\n\t\t\t\t\t\t\t\t2002272.0614817709\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6697007.629987034,\n\t\t\t\t\t\t\t\t2000985.311226373\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6697108.6667729369,\n\t\t\t\t\t\t\t\t1999329.4492889876\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6697109.147001803,\n\t\t\t\t\t\t\t\t1999237.4286667205\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6698133.775880099,\n\t\t\t\t\t\t\t\t1997678.3320476548\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6699153.165157541,\n\t\t\t\t\t\t\t\t1997131.5260593456\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6697956.698354091,\n\t\t\t\t\t\t\t\t1996204.878183904\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6695552.101068032,\n\t\t\t\t\t\t\t\t1996560.4968017708\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6693796.316915683,\n\t\t\t\t\t\t\t\t1996551.4995354068\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6692595.448112842,\n\t\t\t\t\t\t\t\t1996453.3814971\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6692225.805271902,\n\t\t\t\t\t\t\t\t1996451.519558976\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6691948.578411587,\n\t\t\t\t\t\t\t\t1996450.1265865807\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6690842.397732138,\n\t\t\t\t\t\t\t\t1995892.387712608\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6690569.278270818,\n\t\t\t\t\t\t\t\t1995062.68937963\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t]\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t\"projectName\": \"Community Design Test Project\",\n\t\"jurisdiction\": \"Community Design Test Jurisdiction\",\n\t\"projectType\": \"Community Design\",\n\t\"email\": \"yongzhi.yu@vertigis.com\",\n\t\"ADT\": 100,\n\t\"postedSpeedLimit\": 48,\n\t\"PCI\": 67,\n\t\"titleReport\": {\n\"dataSourceName\": \"TitleReportDataSource\",\n\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=5407317536c34d60b42e8d4e1de3280a\",\n\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPTitleAndGuide/GPServer/RPTitleAndGuide\",\n\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t},\n\t\"reports\": [\n{\n\t\t\t\t\t\"name\": \"reduce VMT\",\n\t\t\t\t\t\"dataSourceName\": \"SACOG_RegionalProgram_Freeway_ReduceVMT\",\n\t\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=59a9262a9cd34903a0077acfaad611a1\",\n\t\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpVMT/GPServer/RPFwyExpVMT\",\n\t\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Reduce Congestion\",\n\t\t\t\t\t\"dataSourceName\": \"SACOG_RegionalProgram_Freeway_ReduceCongestion\",\n\t\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=db062a075fb54faaa0e2ef8ea06e7df7\",\n\t\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpCongestion/GPServer/RPFwyExpCongestion\",\n\t\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Encourage Multimodal Travel\",\n\t\t\t\t\t\"dataSourceName\": \"SACOG_RegionalProgram_Freeway_Multimodal\",\n\t\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=da0d38a52dd149cb9c9b388208a7f73c\",\n\t\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpMultiModal/GPServer/RPFwyExpMultiModal\",\n\t\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Promote Economic Prosperity\",\n\t\t\t\t\t\"dataSourceName\": \"SACOG_RegionalProgram_Freeway_EconProsperity\",\n\t\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=30b048081d2f4692aa144a6b10c2a8db\",\n\t\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpEconProsp/GPServer/RPFwyExpEconProsp\",\n\t\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Improve Freight Mobility\",\n\t\t\t\t\t\"dataSourceName\": \"SACOG_RegionalProgram_Freeway_Freight\",\n\t\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=7ca5af8b74e641bfa0a0cd95f74cd8b5\",\n\t\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpFreight/GPServer/RPFwyExpFreight\",\n\t\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Make a Safer Transportation System\",\n\t\t\t\t\t\"dataSourceName\": \"SACOG_RegionalProgram_Freeway_Safety\",\n\t\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=cca34d23f77d40d2b52239501b371eb7\",\n\t\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpSafety/GPServer/RPFwyExpSafety\",\n\t\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t\t\t\t}\n\t]\n}"}},"position":"410,350","title":"Set Property"}]},{"id":4528,"steps":[{"id":4530,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":4540,"inputs":{},"position":"90,60 90,120 80,120 80,140","target":{"id":4532}}]},{"action":"gcx:wf:core::CreateValue","id":4532,"inputs":{"expression":{"accessors":[],"annotations":[],"code":"{\n    \"subjectTemplate\": \"Confirmation of {reportName} Report\",\n    \"messageTemplate\": \"<div style='font-family:Arial'><p>Dear User</p><p>This is to confirm your request for report: {reportName}, {projectName}, {jurisdiction}, {projectType} has been received and accepted at {currentTime}</p><p>You should expect your report to be ready in {estimatedProcessingTime} minutes</p><p>You will receive another email with the pdf report attached when the report is ready.</p><p><a href=\\\"{viewerUrl}\\\">Open PPT Viewer</a></p><p>SACOG GIS Services</p></div>\",\n    \"fromEmail\": \"ppa@sacog.org\"\n}","source":"{\n  \"subjectTemplate\": \"Confirmation of {reportName} Report\",\n  \"messageTemplate\": \"<div style='font-family:Arial'><p>Dear User</p><p>This is to confirm your request for report: {reportName}, {projectName}, {jurisdiction}, {projectType} has been received and accepted at {currentTime}</p><p>You should expect your report to be ready in {estimatedProcessingTime} minutes</p><p>You will receive another email with the pdf report attached when the report is ready.</p><p><a href=\\\"{viewerUrl}\\\">Open PPT Viewer</a></p><p>SACOG GIS Services</p></div>\",\n  \"fromEmail\": \"ppa@sacog.org\"\n}"}},"name":"confirmationEmailConfig","position":"-40,140","title":"Create Value","transitions":[{"id":4542,"inputs":{},"position":"80,210 80,290","sourceConnector":"bottom","target":{"id":4534}}]},{"action":"gcx:wf:core::CreateValue","id":4534,"inputs":{"expression":{"accessors":[],"annotations":[],"code":"{\n    \"subjectTemplate\": \"Error Generating Report {reportName}\",\n    \"messageTemplate\": \"<div style='font-family:Arial'><p>Error Generating Report: {reportName}, {projectName}, {jurisdiction}, {projectType} due to the following error: </p><p>{errorMessage}</p><p><a href=\\\"{viewerUrl}\\\">Open PPT Viewer</a></p><p>SACOG GIS Services</p></div></div>\",\n    \"fromEmail\": \"ppa@sacog.org\"\n}","source":"{\n  \"subjectTemplate\": \"Error Generating Report {reportName}\",\n  \"messageTemplate\": \"<div style='font-family:Arial'><p>Error Generating Report: {reportName}, {projectName}, {jurisdiction}, {projectType} due to the following error: </p><p>{errorMessage}</p><p><a href=\\\"{viewerUrl}\\\">Open PPT Viewer</a></p><p>SACOG GIS Services</p></div></div>\",\n  \"fromEmail\": \"ppa@sacog.org\"\n}\n"}},"name":"ErrorEmailConfig","position":"-40,290","title":"Create Value","transitions":[{"id":4544,"inputs":{},"position":"80,360 80,450","sourceConnector":"bottom","target":{"id":4536}}]},{"action":"gcx:wf:core::CreateValue","id":4536,"inputs":{"expression":{"accessors":[],"annotations":[],"code":"{\n    \"subjectTemplate\": \"Report {reportName} Ready\",\n    \"messageTemplate\": \"<div style='font-family:Arial'><p>Dear User</p><p>This is to confirm your request for report: {reportName}, {projectName}, {jurisdiction}, {projectType} is ready.</p><a href=\\\"{viewerUrl}\\\">Open Viewer</a></div>\",\n    \"partialSubReportErrorMessage\": \"<p>Some sub reports can not be generated, which includes: </p>\",\n    \"fromEmail\": \"ppa@sacog.org\"\n}","source":"{\n  \"subjectTemplate\": \"Report {reportName} Ready\",\n  \"messageTemplate\": \"<div style='font-family:Arial'><p>Dear User</p><p>This is to confirm your request for report: {reportName}, {projectName}, {jurisdiction}, {projectType} is ready.</p><a href=\\\"{viewerUrl}\\\">Open Viewer</a></div>\",\n  \"partialSubReportErrorMessage\": \"<p>Some sub reports can not be generated, which includes: </p>\",\n  \"fromEmail\": \"ppa@sacog.org\"\n}"}},"name":"FinalReportEmailConfig","position":"-40,450","title":"Create Value","transitions":[{"id":4546,"inputs":{},"position":"80,520 80,590","sourceConnector":"bottom","target":{"id":4538}}]},{"action":"gcx:wf:core::CreateValue","description":"Note: Admin will only receive email if there was errors when generating report","id":4538,"inputs":{"expression":{"accessors":[],"annotations":[],"code":"{\n    \"adminEmail\": \"dconly@sacog.org\",\n    \"subjectTemplate\": \"Error Generating Report {reportName}\",\n    \"messageTemplate\": \"<div style='font-family:Arial'><p>There were some errors generating report: {reportName}, {projectName}, {jurisdiction}, {projectType}: </p><p>{errorMessage}</p><p>The report were for user: {userEmail}</p><p><a href=\\\"{viewerUrl}\\\">Open PPT Viewer</a></p><p>SACOG GIS Services</p></div></div>\",\n    \"fromEmail\": \"ppa@sacog.org\"\n}","source":"{\n  \"adminEmail\": \"dconly@sacog.org\",\n  \"subjectTemplate\": \"Error Generating Report {reportName}\",\n  \"messageTemplate\": \"<div style='font-family:Arial'><p>There were some errors generating report: {reportName}, {projectName}, {jurisdiction}, {projectType}: </p><p>{errorMessage}</p><p>The report were for user: {userEmail}</p><p><a href=\\\"{viewerUrl}\\\">Open PPT Viewer</a></p><p>SACOG GIS Services</p></div></div>\",\n  \"fromEmail\": \"ppa@sacog.org\"\n}\n"}},"name":"AdminEmailConfig","position":"-40,590","title":"Create Value"}]}],"designerVersion":"5.30.1+1","licenseInfo":{"licenseUrl":"https://mapping.sacog.org/vertigisstudio/workflow/service/auth/license"},"start":{"id":3},"transitions":[{"branch":"content","id":851,"inputs":{},"source":{"id":848},"target":{"id":850}},{"branch":"try","id":959,"inputs":{},"source":{"id":956},"target":{"id":958}},{"branch":"catch","id":962,"inputs":{},"source":{"id":956},"target":{"id":961}},{"branch":"content","id":1100,"inputs":{},"source":{"id":1096},"target":{"id":968}},{"branch":"content","id":1138,"inputs":{},"source":{"id":970},"target":{"id":1032}},{"branch":"content","id":1140,"inputs":{},"source":{"id":972},"target":{"id":988}},{"branch":"content","id":4554,"inputs":{},"source":{"id":4548},"target":{"id":4420}},{"branch":"try","id":4556,"inputs":{},"source":{"id":4550},"target":{"id":3156}},{"branch":"catch","id":4558,"inputs":{},"source":{"id":4550},"target":{"id":3084}},{"branch":"try","id":4560,"inputs":{},"source":{"id":4552},"target":{"id":3038}},{"branch":"catch","id":4562,"inputs":{},"source":{"id":4552},"target":{"id":2992}},{"branch":"content","id":4568,"inputs":{},"source":{"id":2996},"target":{"id":3014}},{"branch":"loop","id":4570,"inputs":{},"source":{"id":3052},"target":{"id":3072}},{"branch":"content","id":4572,"inputs":{},"source":{"id":3088},"target":{"id":3132}},{"branch":"content","id":4574,"inputs":{},"source":{"id":3090},"target":{"id":3108}},{"branch":"content","id":4576,"inputs":{},"source":{"id":3160},"target":{"id":3418}},{"branch":"content","id":4578,"inputs":{},"source":{"id":3164},"target":{"id":3204}},{"branch":"content","id":4580,"inputs":{},"source":{"id":3166},"target":{"id":3184}},{"branch":"content","id":4582,"inputs":{},"source":{"id":3220},"target":{"id":3380}},{"branch":"content","id":4584,"inputs":{},"source":{"id":3214},"target":{"id":3312}},{"branch":"content","id":4586,"inputs":{},"source":{"id":3218},"target":{"id":3278}},{"branch":"content","id":4588,"inputs":{},"source":{"id":3222},"target":{"id":3248}},{"branch":"content","id":4590,"inputs":{},"source":{"id":3326},"target":{"id":3350}},{"branch":"loop","id":4592,"inputs":{},"source":{"id":3392},"target":{"id":3410}},{"branch":"loop","id":4594,"inputs":{},"source":{"id":3422},"target":{"id":4320}},{"branch":"content","id":4596,"inputs":{},"source":{"id":3424},"target":{"id":4044}},{"branch":"content","id":4598,"inputs":{},"source":{"id":3426},"target":{"id":3900}},{"branch":"content","id":4600,"inputs":{},"source":{"id":3428},"target":{"id":3442}},{"branch":"try","id":4602,"inputs":{},"source":{"id":3448},"target":{"id":3482}},{"branch":"catch","id":4604,"inputs":{},"source":{"id":3448},"target":{"id":3466}},{"branch":"content","id":4606,"inputs":{},"source":{"id":3486},"target":{"id":3858}},{"branch":"content","id":4608,"inputs":{},"source":{"id":3488},"target":{"id":3500}},{"branch":"content","id":4610,"inputs":{},"source":{"id":3502},"target":{"id":3512}},{"branch":"content","id":4612,"inputs":{},"source":{"id":3510},"target":{"id":3824}},{"branch":"content","id":4614,"inputs":{},"source":{"id":3518},"target":{"id":3622}},{"branch":"try","id":4616,"inputs":{},"source":{"id":3520},"target":{"id":3550}},{"branch":"catch","id":4618,"inputs":{},"source":{"id":3520},"target":{"id":3536}},{"branch":"loop","id":4620,"inputs":{},"source":{"id":3620},"target":{"id":3638}},{"branch":"try","id":4622,"inputs":{},"source":{"id":3634},"target":{"id":3784}},{"branch":"catch","id":4624,"inputs":{},"source":{"id":3634},"target":{"id":3776}},{"branch":"content","id":4626,"inputs":{},"source":{"id":3636},"target":{"id":3672}},{"branch":"content","id":4628,"inputs":{},"source":{"id":3670},"target":{"id":3704}},{"branch":"content","id":4630,"inputs":{},"source":{"id":3706},"target":{"id":3748}},{"branch":"content","id":4632,"inputs":{},"source":{"id":3708},"target":{"id":3716}},{"branch":"loop","id":4634,"inputs":{},"source":{"id":3902},"target":{"id":3908}},{"branch":"try","id":4636,"inputs":{},"source":{"id":3912},"target":{"id":3928}},{"branch":"catch","id":4638,"inputs":{},"source":{"id":3912},"target":{"id":3920}},{"branch":"content","id":4640,"inputs":{},"source":{"id":3936},"target":{"id":4000}},{"branch":"content","id":4642,"inputs":{},"source":{"id":3940},"target":{"id":3960}},{"branch":"loop","id":4644,"inputs":{},"source":{"id":4046},"target":{"id":4056}},{"branch":"loop","id":4646,"inputs":{},"source":{"id":4060},"target":{"id":4260}},{"branch":"content","id":4648,"inputs":{},"source":{"id":4062},"target":{"id":4072}},{"branch":"loop","id":4650,"inputs":{},"source":{"id":4076},"target":{"id":4132}},{"branch":"loop","id":4652,"inputs":{},"source":{"id":4088},"target":{"id":4108}},{"branch":"try","id":4660,"inputs":{},"source":{"id":4264},"target":{"id":4280}},{"branch":"catch","id":4662,"inputs":{},"source":{"id":4264},"target":{"id":4272}},{"branch":"try","id":4664,"inputs":{},"source":{"id":4326},"target":{"id":4352}},{"branch":"catch","id":4666,"inputs":{},"source":{"id":4326},"target":{"id":4340}},{"branch":"content","id":4668,"inputs":{},"source":{"id":4424},"target":{"id":4530}},{"branch":"content","id":4670,"inputs":{},"source":{"id":4422},"target":{"id":4456}},{"branch":"content","id":4672,"inputs":{},"source":{"id":4426},"target":{"id":4436}}]}
{"_properties":{"isServerWorkflow":true},"components":[{"id":2,"steps":[{"id":3,"inputs":{},"position":"0,0","purpose":"start","title":"Start","transitions":[{"id":209,"inputs":{},"position":"90,60 90,110 110,110 110,130","sourceConnector":"bottom","target":{"id":126},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Initialize","id":126,"inputs":{},"name":"InitializationContainer","position":"-10,130","title":"Container","transitions":[{"id":1462,"inputs":{},"position":"110,280 110,330","sourceConnector":"bottom","target":{"id":1402}}]},{"action":"gcx:wf:core::TryCatch","id":128,"inputs":{},"name":"tryCatchGenerateReport","position":"-10,520","title":"Try Catch"},{"action":"gcx:wf:core::TryCatch","id":1402,"inputs":{},"name":"tryCatchSendConfirmationEmail","position":"-10,330","title":"Try Catch","transitions":[{"id":1463,"inputs":{},"position":"110,450 110,520","sourceConnector":"bottom","target":{"id":128}}]}]},{"id":6,"steps":[{"id":8,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":228,"inputs":{},"position":"90,60 90,120 100,120 100,140","sourceConnector":"bottom","target":{"id":227},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"send error email to user","id":10,"inputs":{},"position":"-20,460","title":"Container","transitions":[{"id":841,"inputs":{},"position":"100,580 100,630","sourceConnector":"bottom","target":{"id":836}}]},{"action":"gcx:wf:core::SetWorkflowOutput","id":227,"inputs":{"name":"output","value":{"accessors":["$tryCatchGenerateReport"],"annotations":[{"count":23,"index":12,"kind":"idref"}],"code":"{\n    \"error\": $tryCatchGenerateReport.error\n}","source":"{\n  \"error\":$tryCatchGenerateReport.error\n}"}},"position":"-20,140","title":"Set Workflow Output","transitions":[{"id":625,"inputs":{},"position":"100,170 100,220","sourceConnector":"bottom","target":{"id":623},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":617,"inputs":{"message":{"accessors":["$errorJson"],"annotations":[{"count":10,"index":31,"kind":"idref"}],"code":"\"Error generating report: \" + $errorJson.json","source":" \"Error generating report: \" + $errorJson.json"}},"position":"-20,360","title":"Log","transitions":[{"id":629,"inputs":{},"position":"100,390 100,460","sourceConnector":"bottom","target":{"id":10}}]},{"action":"gcx:wf:core::ConvertToJson","id":623,"inputs":{"object":{"accessors":["$tryCatchGenerateReport"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$tryCatchGenerateReport.error","source":"$tryCatchGenerateReport.error"}},"name":"errorJson","position":"-20,220","title":"Convert To JSON","transitions":[{"id":627,"inputs":{},"position":"100,290 100,360","sourceConnector":"bottom","target":{"id":617},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"send error email to admin","id":836,"inputs":{},"position":"-20,630","title":"Container"}]},{"id":14,"steps":[{"id":16,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":643,"inputs":{},"position":"90,60 90,110 100,110 100,130","target":{"id":641}}]},{"action":"gcx:wf:core::CreateValue","id":641,"inputs":{"expression":{"accessors":["$tryCatchGenerateReport"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$tryCatchGenerateReport.error.message","source":"$tryCatchGenerateReport.error.message"}},"name":"errorMessage","position":"-20,130","title":"Create Value","transitions":[{"id":808,"inputs":{},"position":"100,200 100,260","sourceConnector":"bottom","target":{"id":797},"targetConnector":"top"}]},{"action":"gcx:wf:server::SendEmail","id":795,"inputs":{"body":{"accessors":["$errorEmailBody"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$errorEmailBody.result","source":"$errorEmailBody.result"},"from":{"accessors":["$ErrorEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$ErrorEmailConfig.result.fromEmail","source":"$ErrorEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$errorEmailSubject"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$errorEmailSubject.result","source":"$errorEmailSubject.result"},"to":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.email","source":"$reportConfig.result.email"}},"position":"-20,650","title":"Send Email"},{"action":"gcx:wf:core::FormatDate","id":797,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate1","position":"-20,260","title":"Format Date","transitions":[{"id":803,"inputs":{},"position":"100,330 100,390","sourceConnector":"bottom","target":{"id":799},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":799,"inputs":{"expression":{"accessors":["$ErrorEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate1","$errorMessage"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":13,"index":402,"kind":"idref"}],"code":"$ErrorEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate1.formatted).replace(\"{errorMessage}\", $errorMessage.result)","source":"$ErrorEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate1.formatted).replace(\"{errorMessage}\", $errorMessage.result)"}},"name":"errorEmailSubject","position":"-20,390","title":"Create Value","transitions":[{"id":805,"inputs":{},"position":"100,460 100,530","sourceConnector":"bottom","target":{"id":801}}]},{"action":"gcx:wf:core::CreateValue","id":801,"inputs":{"expression":{"accessors":["$ErrorEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate1","$errorMessage"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":13,"index":402,"kind":"idref"}],"code":"$ErrorEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate1.formatted).replace(\"{errorMessage}\", $errorMessage.result)","source":"$ErrorEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate1.formatted).replace(\"{errorMessage}\", $errorMessage.result)"}},"name":"errorEmailBody","position":"-20,530","title":"Create Value","transitions":[{"id":807,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":795}}]}]},{"id":18,"steps":[{"id":20,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":212,"inputs":{},"position":"90,60 90,140 100,140 100,160","sourceConnector":"bottom","target":{"id":537}}]},{"action":"gcx:wf:core::Container","description":"Collect Sub Reports,","id":24,"inputs":{},"position":"-30,260","title":"Container","transitions":[{"id":546,"inputs":{},"position":"90,380 90,460","sourceConnector":"bottom","target":{"id":541},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"email reports","id":196,"inputs":{},"position":"-30,840","title":"Container"},{"action":"gcx:wf:core::Container","description":"Merge reports","id":337,"inputs":{},"position":"-30,550","title":"Container","transitions":[{"id":548,"inputs":{},"position":"90,670 90,750","sourceConnector":"bottom","target":{"id":545},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":537,"inputs":{"message":"Start collect sub reports"},"position":"-20,160","title":"Log","transitions":[{"id":538,"inputs":{},"position":"100,190 100,240 90,240 90,260","sourceConnector":"bottom","target":{"id":24}}]},{"action":"gcx:wf:core::Log","id":541,"inputs":{"message":"Start merge reports"},"position":"-30,460","title":"Log","transitions":[{"id":547,"inputs":{},"position":"90,490 90,550","sourceConnector":"bottom","target":{"id":337},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":545,"inputs":{"message":"Start email reports"},"position":"-30,750","title":"Log","transitions":[{"id":549,"inputs":{},"position":"90,780 90,840","sourceConnector":"bottom","target":{"id":196}}]}]},{"id":30,"steps":[{"id":32,"inputs":{},"position":"-10,-160","purpose":"start","title":"Container","transitions":[{"id":786,"inputs":{},"position":"80,-100 80,110 90,110 90,130","sourceConnector":"bottom","target":{"id":34},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","description":"Start gp task for each report to collect data","id":34,"inputs":{"items":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports","source":"$reportConfig.result.reports"}},"name":"forEachreportToStart","position":"-30,130","title":"For Each","transitions":[{"id":156,"inputs":{},"position":"90,300 90,370","sourceConnector":"bottom","target":{"id":152}}]},{"action":"gcx:wf:core::Container","description":"Check and Collect report data from GP task","id":152,"inputs":{},"position":"-30,370","title":"Container","transitions":[{"id":161,"inputs":{},"position":"90,510 90,590","sourceConnector":"bottom","target":{"id":157}}]},{"action":"gcx:wf:core::Container","description":"Generate sub reports","id":157,"inputs":{},"position":"-30,590","title":"Container"}]},{"id":38,"steps":[{"id":40,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":46,"inputs":{},"position":"90,60 90,140","target":{"id":42}}]},{"action":"gcx:wf:core::CreateValue","id":42,"inputs":{"expression":{"accessors":["$forEachreportToStart"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$forEachreportToStart.item","source":"$forEachreportToStart.item"}},"name":"currentReport","position":"-30,140","title":"Create Value","transitions":[{"id":551,"inputs":{},"position":"90,210 90,280","sourceConnector":"bottom","target":{"id":550},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":44,"inputs":{},"name":"tryCatchStartGPTask","position":"-30,380","title":"Try Catch","transitions":[{"id":1493,"inputs":{},"position":"90,500 90,560 100,560 100,580","sourceConnector":"bottom","target":{"id":1491},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":550,"inputs":{"message":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":34,"kind":"idref"}],"code":"\"Start processing sub report: \" + $currentReport.result.name","source":"\"Start processing sub report: \" + $currentReport.result.name"}},"position":"-30,280","title":"Log","transitions":[{"id":552,"inputs":{},"position":"90,310 90,380","sourceConnector":"bottom","target":{"id":44}}]},{"action":"gcx:wf:core::Delay","description":"Delay","id":1491,"inputs":{"duration":{"accessors":["$millisecondsDelayBetweenGPTask"],"annotations":[{"count":31,"index":0,"kind":"idref"}],"code":"$millisecondsDelayBetweenGPTask.result","source":"$millisecondsDelayBetweenGPTask.result"}},"position":"-20,580","title":"Delay"}]},{"id":50,"steps":[{"id":52,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":787,"inputs":{},"position":"90,60 90,130 80,130 80,150","sourceConnector":"bottom","target":{"id":54}}]},{"action":"gcx:wf:core::SetProperty","id":54,"inputs":{"object":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result","source":"$currentReport.result"},"propertyName":"error","propertyValue":{"accessors":["$tryCatchStartGPTask"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$tryCatchStartGPTask.error","source":"$tryCatchStartGPTask.error"}},"position":"-40,150","title":"Set Property","transitions":[{"id":802,"inputs":{},"position":"80,180 80,220","sourceConnector":"bottom","target":{"id":793}}]},{"action":"gcx:wf:core::Log","id":793,"inputs":{"message":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":50,"kind":"idref"}],"code":"\"Error caught when tried to start gp task for \" + $currentReport.result.name","source":"\"Error caught when tried to start gp task for \" + $currentReport.result.name"}},"position":"-40,220","title":"Log"}]},{"id":62,"steps":[{"id":64,"inputs":{},"position":"-20,-290","purpose":"start","title":"Try","transitions":[{"id":995,"inputs":{},"position":"70,-230 70,-170 80,-170 80,-150","sourceConnector":"bottom","target":{"id":994},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":66,"inputs":{"expression":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result.dataUrl + \"/submitJob\"","source":"$currentReport.result.dataUrl + \"/submitJob\""}},"name":"currentGPUrl","position":"-30,0","title":"Create Value","transitions":[{"id":231,"inputs":{},"position":"90,70 90,130","sourceConnector":"bottom","target":{"id":230}}]},{"action":"gcx:wf:core:request:WebRequest","id":68,"inputs":{"form":{"accessors":["$projectLineJsonString","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig"],"annotations":[{"count":22,"index":19,"kind":"idref"},{"count":13,"index":66,"kind":"idref"},{"count":13,"index":117,"kind":"idref"},{"count":13,"index":168,"kind":"idref"},{"count":13,"index":204,"kind":"idref"},{"count":13,"index":253,"kind":"idref"},{"count":13,"index":300,"kind":"idref"},{"count":13,"index":342,"kind":"idref"}],"code":"{\n    \"Project_Line\": $projectLineJsonString.json,\n    \"Project_Name\": $reportConfig.result.projectName,\n    \"Jurisdiction\": $reportConfig.result.jurisdiction,\n    \"Project_ADT\": $reportConfig.result.ADT,\n    \"AADT\": $reportConfig.result.ADT,\n    \"Posted_Speed_Limit\": $reportConfig.result.postedSpeedLimit,\n    \"PCI\": $reportConfig.result.PCI,\n    \"Project_PCI\": $reportConfig.result.PCI,\n    \"f\": \"json\"\n}","source":"{\n  \"Project_Line\":$projectLineJsonString.json,\n  \"Project_Name\": $reportConfig.result.projectName,\n  \"Jurisdiction\":$reportConfig.result.jurisdiction,\n  \"Project_ADT\":$reportConfig.result.ADT,\n  \"AADT\": $reportConfig.result.ADT,\n  \"Posted_Speed_Limit\":$reportConfig.result.postedSpeedLimit,\n  \"PCI\":$reportConfig.result.PCI,\n  \"Project_PCI\":$reportConfig.result.PCI,\n  \"f\":\"json\"\n}"},"headers":{"accessors":[],"annotations":[],"code":"{\n    \"content-type\": \"application/x-www-form-urlencoded\"\n}","source":"{\n  \"content-type\": \"application/x-www-form-urlencoded\"\n}"},"method":"POST","url":{"accessors":["$currentGPUrl"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$currentGPUrl.result","source":"$currentGPUrl.result"}},"name":"webRequestStartGPTask","position":"-30,320","title":"Send Web Request","transitions":[{"id":570,"inputs":{},"position":"90,390 90,430","sourceConnector":"bottom","target":{"id":565}}]},{"action":"gcx:wf:core::SetProperty","id":204,"inputs":{"object":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result","source":"$currentReport.result"},"propertyName":"gpJob","propertyValue":{"accessors":["$parseJobJson"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$parseJobJson.result","source":"$parseJobJson.result"}},"position":"0,810","title":"Set Property","transitions":[{"id":1420,"inputs":{},"position":"120,840 120,930 140,930 140,950","sourceConnector":"bottom","target":{"id":809},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":217,"inputs":{"condition":{"accessors":["$webRequestStartGPTask","$webRequestStartGPTask"],"annotations":[{"count":22,"index":0,"kind":"idref"},{"count":22,"index":40,"kind":"idref"}],"code":"$webRequestStartGPTask.text !== null && $webRequestStartGPTask.text !== undefined","source":"$webRequestStartGPTask.text !== null && $webRequestStartGPTask.text !== undefined"}},"position":"30,520","title":"If","transitions":[{"branch":"false","id":226,"inputs":{},"position":"150,550 240,550 240,555 260,555","sourceConnector":"right","target":{"id":225},"targetConnector":"left"},{"branch":"true","id":1418,"inputs":{},"position":"30,550 -40,550 -40,675 -20,675","sourceConnector":"left","target":{"id":220},"targetConnector":"left"}]},{"action":"gcx:wf:core::ParseJson","id":220,"inputs":{"json":{"accessors":["$webRequestStartGPTask"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$webRequestStartGPTask.text","source":"$webRequestStartGPTask.text"}},"name":"parseJobJson","position":"-20,640","title":"Parse JSON","transitions":[{"id":1419,"inputs":{},"position":"100,710 100,790 120,790 120,810","sourceConnector":"bottom","target":{"id":204},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":225,"inputs":{"object":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result","source":"$currentReport.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Can not start geoprocessing task.\"\n}","source":"{\n  \"error\": \"Can not start geoprocessing task.\"\n}"}},"position":"260,540","title":"Set Property","transitions":[{"id":485,"inputs":{},"position":"380,570 380,600 390,600 390,620","sourceConnector":"bottom","target":{"id":484}}]},{"action":"gcx:wf:core::ConvertToJson","id":230,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.projectLine","source":"$reportConfig.result.projectLine"}},"name":"projectLineJsonString","position":"-30,130","title":"Convert To JSON","transitions":[{"id":557,"inputs":{},"position":"90,200 90,250","sourceConnector":"bottom","target":{"id":556}}]},{"action":"gcx:wf:core::Log","id":484,"inputs":{"message":{"accessors":["$currentGPUrl"],"annotations":[{"count":13,"index":53,"kind":"idref"}],"code":"\"error:  Can not start geoprocessing task from \" + $currentGPUrl.result","source":" \"error:  Can not start geoprocessing task from \" +  $currentGPUrl.result"}},"position":"270,620","title":"Log"},{"action":"gcx:wf:core::Log","id":556,"inputs":{"message":{"accessors":["$currentGPUrl"],"annotations":[{"count":13,"index":25,"kind":"idref"}],"code":"\"Start GP task from: \" + $currentGPUrl.result","source":"\"Start GP task from: \" + $currentGPUrl.result"}},"position":"-30,250","title":"Log","transitions":[{"id":559,"inputs":{},"position":"90,280 90,320","sourceConnector":"bottom","target":{"id":68}}]},{"action":"gcx:wf:core::Log","id":565,"inputs":{"message":{"accessors":["$webRequestStartGPTask"],"annotations":[{"count":22,"index":38,"kind":"idref"}],"code":"\"Response collected from GP task: \" + $webRequestStartGPTask.text","source":"\"Response collected from GP task: \" + $webRequestStartGPTask.text "}},"position":"-30,430","title":"Log","transitions":[{"id":571,"inputs":{},"position":"90,460 90,520","sourceConnector":"bottom","target":{"id":217}}]},{"action":"gcx:wf:core::If","id":809,"inputs":{"condition":{"accessors":["$currentReport","$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"},{"count":14,"index":46,"kind":"idref"}],"code":"$currentReport.result.gpJob.jobId === null || $currentReport.result.gpJob.jobId === undefined","source":"$currentReport.result.gpJob.jobId === null || $currentReport.result.gpJob.jobId === undefined"}},"position":"80,950","title":"If","transitions":[{"branch":"true","id":815,"inputs":{},"position":"80,980 60,980 60,1030 150,1030 150,1050","sourceConnector":"left","target":{"id":813}}]},{"action":"gcx:wf:core::SetProperty","id":811,"inputs":{"object":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result","source":"$currentReport.result"},"propertyName":"error","propertyValue":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result.gpJob.error","source":"$currentReport.result.gpJob.error"}},"position":"-140,1170","title":"Set Property"},{"action":"gcx:wf:core::If","id":813,"inputs":{"condition":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result.gpJob.error != null","source":"$currentReport.result.gpJob.error != null"}},"position":"90,1050","title":"If","transitions":[{"branch":"true","id":817,"inputs":{},"position":"90,1080 -20,1080 -20,1170","sourceConnector":"left","target":{"id":811},"targetConnector":"top"},{"branch":"false","id":825,"inputs":{},"position":"210,1080 280,1080 280,1170","sourceConnector":"right","target":{"id":823},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":823,"inputs":{"object":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentReport.result","source":"$currentReport.result"},"propertyName":"error","propertyValue":{"accessors":[],"code":"\"Could not start gp task\"","source":"\"Could not start gp task\""}},"position":"160,1170","title":"Set Property"},{"action":"gcx:wf:core::If","id":994,"inputs":{"condition":{"accessors":["$currentReport","$currentReport"],"annotations":[{"count":14,"index":0,"kind":"idref"},{"count":14,"index":42,"kind":"idref"}],"code":"$currentReport.result.dataUrl !== null && $currentReport.result.dataUrl !== undefined","source":"$currentReport.result.dataUrl !== null && $currentReport.result.dataUrl !== undefined"}},"position":"20,-150","title":"If","transitions":[{"branch":"true","id":996,"inputs":{},"position":"20,-120 0,-120 0,-20 90,-20 90,0","sourceConnector":"left","target":{"id":66},"targetConnector":"top"},{"branch":"false","id":1000,"inputs":{},"position":"140,-120 220,-120 220,-115 240,-115","sourceConnector":"right","target":{"id":999}}]},{"action":"gcx:wf:core::Log","id":999,"inputs":{"message":{"accessors":["$currentReport"],"annotations":[{"count":14,"index":13,"kind":"idref"}],"code":"\"Report: \" + $currentReport.result.name + \" does not have GP data url\"","source":"\"Report: \" + $currentReport.result.name  + \" does not have GP data url\""}},"position":"240,-130","title":"Log"}]},{"id":74,"steps":[{"id":76,"inputs":{},"position":"-20,-600","purpose":"start","title":"Container","transitions":[{"id":582,"inputs":{},"position":"70,-540 70,-470 60,-470 60,-450","sourceConnector":"bottom","target":{"id":576},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Mail Settings ","id":534,"inputs":{},"position":"-60,-220","title":"Mail Settings Container","transitions":[{"id":961,"inputs":{},"position":"60,-100 60,-30","sourceConnector":"bottom","target":{"id":953}}]},{"action":"gcx:wf:core::Container","description":"Report Setting and Configuration","id":576,"inputs":{},"position":"-60,-450","title":"Report Setting Container","transitions":[{"id":585,"inputs":{},"position":"60,-310 60,-220","sourceConnector":"bottom","target":{"id":534},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","id":953,"inputs":{},"position":"-60,-30","title":"Variables"}]},{"id":153,"steps":[{"action":"gcx:wf:core::CreateValue","id":150,"inputs":{"expression":{"accessors":[],"code":"false","source":"false"}},"name":"endGPCheckingLoop","position":"-20,150","title":"Create Value","transitions":[{"id":163,"inputs":{},"position":"100,220 100,290","sourceConnector":"bottom","target":{"id":162}}]},{"id":154,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":151,"inputs":{},"position":"90,60 90,130 100,130 100,150","target":{"id":150}}]},{"action":"gcx:wf:core::CreateValue","id":162,"inputs":{"expression":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"}},"name":"GPCheckingLoopStartTime","position":"-20,290","title":"Create Value","transitions":[{"id":168,"inputs":{},"position":"100,360 100,440 110,440 110,460","sourceConnector":"bottom","target":{"id":164}}]},{"action":"gcx:wf:core:loop:Loop","id":164,"inputs":{"exit":{"accessors":["$endGPCheckingLoop"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$endGPCheckingLoop.result","source":"$endGPCheckingLoop.result"},"limit":{"accessors":["$reportTimeoutMinutes","$millisecondsDelay"],"annotations":[{"count":21,"index":1,"kind":"idref"},{"count":18,"index":40,"kind":"idref"}],"code":"$reportTimeoutMinutes.result * 60 * 1000 / $millisecondsDelay.result","source":" $reportTimeoutMinutes.result*60*1000 / $millisecondsDelay.result"}},"name":"GPCheckingLoop","position":"-10,460","title":"Loop"}]},{"id":158,"steps":[{"id":159,"inputs":{},"position":"-10,-130","purpose":"start","title":"Container","transitions":[{"id":1224,"inputs":{},"position":"80,-70 80,-40 70,-40 70,-20","sourceConnector":"bottom","target":{"id":1223},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","description":"Check gp task results","id":558,"inputs":{"items":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports","source":"$reportConfig.result.reports"}},"name":"forEachReportToGenerate","position":"-40,300","title":"For Each"},{"action":"gcx:wf:core::Container","description":"Collect Title Report\n","id":1198,"inputs":{},"position":"-40,110","title":"Collect Title Report","transitions":[{"id":1220,"inputs":{},"position":"80,230 80,300","sourceConnector":"bottom","target":{"id":558},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1223,"inputs":{"expression":{"accessors":[],"annotations":[],"code":"[]","source":"[]"}},"name":"subReports","position":"-50,-20","title":"Create Value","transitions":[{"id":1225,"inputs":{},"position":"70,50 70,90 80,90 80,110","sourceConnector":"bottom","target":{"id":1198},"targetConnector":"top"}]}]},{"id":165,"steps":[{"id":166,"inputs":{},"position":"10,-110","purpose":"start","title":"Loop","transitions":[{"id":286,"inputs":{},"position":"100,-50 100,40","sourceConnector":"bottom","target":{"id":283},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","description":"Check gp task results","id":260,"inputs":{"items":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports","source":"$reportConfig.result.reports"}},"name":"forEachreportToCheck","position":"-20,130","title":"For Each","transitions":[{"id":280,"inputs":{},"position":"100,280 100,360","sourceConnector":"bottom","target":{"id":276},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Check if loop can be finished","id":276,"inputs":{},"position":"-20,360","title":"Container"},{"action":"gcx:wf:core::Delay","id":283,"inputs":{"duration":{"accessors":["$millisecondsDelay"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$millisecondsDelay.result","source":"$millisecondsDelay.result"}},"position":"-20,40","title":"Delay","transitions":[{"id":287,"inputs":{},"position":"100,70 100,130","sourceConnector":"bottom","target":{"id":260}}]}]},{"id":176,"steps":[{"id":179,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":191,"inputs":{},"position":"90,60 90,140","target":{"id":183}}]},{"action":"gcx:wf:core::CreateValue","id":183,"inputs":{"expression":{"accessors":["$forEachreportToCheck"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$forEachreportToCheck.item","source":"$forEachreportToCheck.item"}},"name":"currentCheckingGPReport","position":"-30,140","title":"Create Value","transitions":[{"id":195,"inputs":{},"position":"90,210 90,280","sourceConnector":"bottom","target":{"id":187}}]},{"action":"gcx:wf:core::TryCatch","id":187,"inputs":{},"name":"tryCatchCheckGPTask","position":"-30,280","title":"Try Catch"}]},{"id":178,"steps":[{"id":180,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":186,"inputs":{},"position":"0,30 -170,30 -170,0 -310,0 -310,20","target":{"id":210},"targetConnector":"top"}]},{"action":"gcx:wf:core::ConvertToJson","id":184,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result","source":"$reportConfig.result"}},"name":"json1","position":"-430,100","title":"Convert To JSON","transitions":[{"id":840,"inputs":{},"position":"-310,170 -310,220","sourceConnector":"bottom","target":{"id":839}}]},{"action":"gcx:wf:core::SetWorkflowOutput","id":210,"inputs":{"name":"output","value":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result","source":"$reportConfig.result"}},"position":"-430,20","title":"Set Workflow Output","transitions":[{"id":211,"inputs":{},"position":"-310,50 -310,100","sourceConnector":"bottom","target":{"id":184},"targetConnector":"top"}]},{"action":"gcx:wf:server::CreateEmailAttachment","id":359,"inputs":{"content":{"accessors":["$mergeFinalPdfsReport"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$mergeFinalPdfsReport.result","source":"$mergeFinalPdfsReport.result"},"contentType":"application/pdf","filename":"report.pdf"},"name":"createReportAttachment","position":"-410,600","title":"Create Email Attachment","transitions":[{"id":893,"inputs":{},"position":"-290,670 -290,740","sourceConnector":"bottom","target":{"id":890}}]},{"action":"gcx:wf:core::If","id":363,"inputs":{"condition":{"accessors":["$mergeFinalPdfsReport","$mergeFinalPdfsReport","$mergeFinalPdfsReport"],"annotations":[{"count":21,"index":0,"kind":"idref"},{"count":21,"index":33,"kind":"idref"},{"count":21,"index":73,"kind":"idref"}],"code":"$mergeFinalPdfsReport != null && $mergeFinalPdfsReport.result != null && $mergeFinalPdfsReport.totalPages > 0","source":"$mergeFinalPdfsReport != null && $mergeFinalPdfsReport.result != null && $mergeFinalPdfsReport.totalPages > 0"}},"position":"-340,470","title":"If","transitions":[{"branch":"true","id":369,"inputs":{},"position":"-340,500 -360,500 -360,580 -290,580 -290,600","sourceConnector":"left","target":{"id":359}},{"branch":"false","id":933,"inputs":{},"position":"-220,500 30,500","sourceConnector":"right","target":{"id":930},"targetConnector":"left"}]},{"action":"gcx:wf:core::Log","id":839,"inputs":{"message":{"accessors":["$json1"],"annotations":[{"count":6,"index":26,"kind":"idref"}],"code":"\"Report summary json: \" + $json1.json","source":"\"Report summary json: \" + $json1.json"}},"position":"-430,220","title":"Log","transitions":[{"id":846,"inputs":{},"position":"-310,250 -310,300","sourceConnector":"bottom","target":{"id":842}}]},{"action":"gcx:wf:core::Container","description":"Collect error messages if any","id":842,"inputs":{},"position":"-430,300","title":"Container","transitions":[{"id":847,"inputs":{},"position":"-310,420 -310,450 -280,450 -280,470","sourceConnector":"bottom","target":{"id":363},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Send successful email","id":890,"inputs":{},"position":"-410,740","title":"Container"},{"action":"gcx:wf:core::Container","description":"send error email to user","id":930,"inputs":{},"position":"30,440","title":"Container","transitions":[{"id":938,"inputs":{},"position":"270,500 360,500","sourceConnector":"right","target":{"id":934}}]},{"action":"gcx:wf:core::Container","description":"send error email to admin","id":934,"inputs":{},"position":"360,440","title":"Container"}]},{"id":199,"steps":[{"id":205,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":213,"inputs":{},"position":"90,60 90,130 80,130 80,150","target":{"id":207}}]},{"action":"gcx:wf:core::SetProperty","id":207,"inputs":{"object":{"accessors":["$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport.result","source":"$currentCheckingGPReport.result"},"propertyName":"error","propertyValue":{"accessors":["$tryCatchCheckGPTask"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$tryCatchCheckGPTask.error","source":"$tryCatchCheckGPTask.error"}},"position":"-40,150","title":"Set Property"}]},{"id":215,"steps":[{"id":219,"inputs":{},"position":"0,-290","purpose":"start","title":"Try","transitions":[{"id":1004,"inputs":{},"position":"90,-230 90,-160","sourceConnector":"bottom","target":{"id":1003}}]},{"action":"gcx:wf:core::CreateValue","id":224,"inputs":{"expression":{"accessors":["$currentCheckingGPReport","$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":53,"kind":"idref"}],"code":"$currentCheckingGPReport.result.dataUrl + \"/jobs/\" + $currentCheckingGPReport.result.gpJob.jobId","source":"$currentCheckingGPReport.result.dataUrl + \"/jobs/\" + $currentCheckingGPReport.result.gpJob.jobId"}},"name":"currentGPCheckingUrl","position":"-30,120","title":"Create Value","transitions":[{"id":268,"inputs":{},"position":"90,190 90,250","sourceConnector":"bottom","target":{"id":236},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":236,"inputs":{"method":"POST","query":{"accessors":[],"annotations":[],"code":"{\n    \"f\": \"json\"\n}","source":"{\n  \"f\":\"json\"\n}"},"url":{"accessors":["$currentGPCheckingUrl"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$currentGPCheckingUrl.result","source":"$currentGPCheckingUrl.result"}},"name":"webRequestCheckGPTask","position":"-30,250","title":"Send Web Request","transitions":[{"id":250,"inputs":{},"position":"90,320 90,380 80,380 80,400","sourceConnector":"bottom","target":{"id":238},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":238,"inputs":{"condition":{"accessors":["$webRequestCheckGPTask","$webRequestCheckGPTask"],"annotations":[{"count":22,"index":0,"kind":"idref"},{"count":22,"index":40,"kind":"idref"}],"code":"$webRequestCheckGPTask.text !== null && $webRequestCheckGPTask.text !== undefined","source":"$webRequestCheckGPTask.text !== null && $webRequestCheckGPTask.text !== undefined"}},"position":"20,400","title":"If","transitions":[{"branch":"true","id":252,"inputs":{},"position":"20,430 -40,430 -40,675 -20,675","sourceConnector":"left","target":{"id":242}},{"branch":"false","id":254,"inputs":{},"position":"140,430 240,430 240,555 260,555","sourceConnector":"right","target":{"id":244},"targetConnector":"left"}]},{"action":"gcx:wf:core::SetProperty","id":240,"inputs":{"object":{"accessors":["$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport.result","source":"$currentCheckingGPReport.result"},"propertyName":"gpJob","propertyValue":{"accessors":["$parseJobJson1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson1.result","source":"$parseJobJson1.result"}},"position":"-20,790","title":"Set Property"},{"action":"gcx:wf:core::ParseJson","id":242,"inputs":{"json":{"accessors":["$webRequestCheckGPTask"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$webRequestCheckGPTask.text","source":"$webRequestCheckGPTask.text"}},"name":"parseJobJson1","position":"-20,640","title":"Parse JSON","transitions":[{"id":256,"inputs":{},"position":"100,710 100,790","sourceConnector":"bottom","target":{"id":240},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":244,"inputs":{"object":{"accessors":["$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport.result","source":"$currentCheckingGPReport.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Can not check geoprocessing task.\"\n}","source":"{\n  \"error\": \"Can not check geoprocessing task.\"\n}"}},"position":"260,540","title":"Set Property"},{"action":"gcx:wf:core::If","id":269,"inputs":{"condition":{"accessors":["$currentCheckingGPReport","$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":50,"kind":"idref"}],"code":"$currentCheckingGPReport.result.error === null || $currentCheckingGPReport.result.error === undefined","source":"$currentCheckingGPReport.result.error === null || $currentCheckingGPReport.result.error === undefined"}},"position":"30,-20","title":"If","transitions":[{"branch":"true","id":271,"inputs":{},"position":"30,10 10,10 10,100 90,100 90,120","sourceConnector":"left","target":{"id":224}},{"branch":"false","id":275,"inputs":{},"position":"150,10 250,10 250,15 270,15","sourceConnector":"right","target":{"id":274}}]},{"action":"gcx:wf:core::SetProperty","id":274,"inputs":{"object":{"accessors":["$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport.result","source":"$currentCheckingGPReport.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Gp task has no job id.\"\n}","source":"{\n  \"error\": \"Gp task has no job id.\"\n}"}},"position":"270,0","title":"Set Property"},{"action":"gcx:wf:core::If","id":1003,"inputs":{"condition":{"accessors":["$currentCheckingGPReport","$currentCheckingGPReport"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":52,"kind":"idref"}],"code":"$currentCheckingGPReport.result.dataUrl !== null && $currentCheckingGPReport.result.dataUrl !== undefined","source":"$currentCheckingGPReport.result.dataUrl !== null && $currentCheckingGPReport.result.dataUrl !== undefined"}},"position":"30,-160","title":"If","transitions":[{"branch":"true","id":1005,"inputs":{},"position":"30,-130 10,-130 10,-40 90,-40 90,-20","sourceConnector":"left","target":{"id":269},"targetConnector":"top"}]}]},{"id":277,"steps":[{"id":278,"inputs":{},"position":"0,-30","purpose":"start","title":"Container","transitions":[{"id":282,"inputs":{},"position":"90,30 90,110 100,110 100,130","target":{"id":281}}]},{"action":"gcx:wf:core::CreateValue","id":281,"inputs":{"expression":{"accessors":[],"code":"0","source":"0"}},"name":"numberOfGPFinished","position":"-20,130","title":"Create Value","transitions":[{"id":353,"inputs":{},"position":"100,200 100,118 232,118 232,295 220,295","sourceConnector":"bottom","target":{"id":346}}]},{"action":"gcx:wf:core:loop:ForEach","description":"Check gp task results","id":346,"inputs":{"items":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports","source":"$reportConfig.result.reports"}},"name":"forEachreportToCheckFinished","position":"-20,220","title":"For Each","transitions":[{"id":1096,"inputs":{},"position":"100,370 100,410 120,410 120,430","sourceConnector":"bottom","target":{"id":1095}}]},{"action":"gcx:wf:core::If","id":377,"inputs":{"condition":{"accessors":["$numberOfGPFinished","$reportConfig"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":13,"index":30,"kind":"idref"}],"code":"$numberOfGPFinished.result >= $reportConfig.result.reports.length","source":"$numberOfGPFinished.result >= $reportConfig.result.reports.length"}},"position":"30,490","title":"If","transitions":[{"branch":"true","id":380,"inputs":{},"position":"30,520 -70,520 -70,670","sourceConnector":"left","target":{"id":379},"targetConnector":"top"},{"branch":"false","id":382,"inputs":{},"position":"150,520 260,520 260,610","sourceConnector":"right","target":{"id":381},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":379,"inputs":{"object":{"accessors":["$endGPCheckingLoop"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$endGPCheckingLoop","source":"$endGPCheckingLoop"},"propertyName":"result","propertyValue":{"accessors":[],"code":"true","source":"true"}},"position":"-190,670","title":"Set Property"},{"action":"gcx:wf:core::If","id":381,"inputs":{"condition":{"accessors":["Date","$GPCheckingLoopStartTime","$reportTimeoutMinutes"],"annotations":[{"count":4,"index":2,"kind":"idref"},{"count":24,"index":15,"kind":"idref"},{"count":21,"index":50,"kind":"idref"}],"code":"(Date.now() - $GPCheckingLoopStartTime.result) > $reportTimeoutMinutes.result * 60 * 1000","source":" (Date.now() - $GPCheckingLoopStartTime.result) > $reportTimeoutMinutes.result*60*1000"}},"position":"200,610","title":"If","transitions":[{"branch":"true","id":386,"inputs":{},"position":"200,640 180,640 180,720 270,720 270,740","sourceConnector":"left","target":{"id":385},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":385,"inputs":{"object":{"accessors":["$endGPCheckingLoop"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$endGPCheckingLoop","source":"$endGPCheckingLoop"},"propertyName":"result","propertyValue":{"accessors":[],"code":"true","source":"true"}},"position":"150,740","title":"Set Property","transitions":[{"id":1610,"inputs":{},"position":"270,770 270,830","sourceConnector":"bottom","target":{"id":1601}}]},{"action":"gcx:wf:core::Log","id":1095,"inputs":{"message":{"accessors":["$numberOfGPFinished","$reportConfig"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":13,"index":42,"kind":"idref"}],"code":"$numberOfGPFinished.result + \" out of \" + $reportConfig.result.reports.length + \" had finished gp stage processing\"","source":"$numberOfGPFinished.result + \" out of \" + $reportConfig.result.reports.length + \" had finished gp stage processing\""}},"position":"0,430","title":"Log","transitions":[{"id":1097,"inputs":{},"position":"120,460 120,475 90,475 90,490","sourceConnector":"bottom","target":{"id":377},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","description":"Set GP task timed out if task is still executing","id":1601,"inputs":{"items":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports","source":"$reportConfig.result.reports"}},"name":"forEachReportToCheckGPTimeOut","position":"150,830","title":"For Each"}]},{"id":290,"steps":[{"id":292,"inputs":{},"position":"0,-200","purpose":"start","title":"For Each","transitions":[{"id":298,"inputs":{},"position":"90,-140 90,-60","target":{"id":294}}]},{"action":"gcx:wf:core::CreateValue","id":294,"inputs":{"expression":{"accessors":["$forEachreportToCheckFinished"],"annotations":[{"count":29,"index":0,"kind":"idref"}],"code":"$forEachreportToCheckFinished.item","source":"$forEachreportToCheckFinished.item"}},"name":"currentReportToCheckFinish","position":"-30,-60","title":"Create Value","transitions":[{"id":837,"inputs":{},"position":"210,-25 290,-25 290,-40 370,-40 370,-20","sourceConnector":"right","target":{"id":827},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":354,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish","$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"},{"count":27,"index":53,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.error !== null && $currentReportToCheckFinish.result.error !== undefined","source":"$currentReportToCheckFinish.result.error !== null && $currentReportToCheckFinish.result.error !== undefined"}},"position":"20,90","title":"If","transitions":[{"branch":"true","id":357,"inputs":{},"position":"20,120 -90,120 -90,260","sourceConnector":"left","target":{"id":356},"targetConnector":"top"},{"branch":"false","id":361,"inputs":{},"position":"140,120 180,120 180,510","sourceConnector":"right","target":{"id":360},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":356,"inputs":{"object":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished","source":"$numberOfGPFinished"},"propertyName":"result","propertyValue":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished.result + 1","source":"$numberOfGPFinished.result + 1"}},"position":"-210,260","title":"Set Property"},{"action":"gcx:wf:core::If","id":360,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.gpJob.jobStatus == \"esriJobFailed\"","source":"$currentReportToCheckFinish.result.gpJob.jobStatus == \"esriJobFailed\""}},"position":"120,510","title":"If","transitions":[{"branch":"true","id":366,"inputs":{},"position":"120,540 100,540 100,660 130,660 130,680","sourceConnector":"left","target":{"id":365},"targetConnector":"top"},{"branch":"false","id":372,"inputs":{},"position":"240,540 430,540 430,730","sourceConnector":"right","target":{"id":371},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":365,"inputs":{"object":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished","source":"$numberOfGPFinished"},"propertyName":"result","propertyValue":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished.result + 1","source":"$numberOfGPFinished.result + 1"}},"position":"10,680","title":"Set Property","transitions":[{"id":368,"inputs":{},"position":"130,710 130,780","sourceConnector":"bottom","target":{"id":367}}]},{"action":"gcx:wf:core::SetProperty","id":367,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"esriJobFailed\"\n}","source":"{\n  \"error\": \"esriJobFailed\"\n}"}},"position":"10,780","title":"Set Property"},{"action":"gcx:wf:core::If","id":371,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.gpJob.jobStatus == \"esriJobSucceeded\"","source":"$currentReportToCheckFinish.result.gpJob.jobStatus == \"esriJobSucceeded\""}},"position":"370,730","title":"If","transitions":[{"branch":"true","id":376,"inputs":{},"position":"370,760 330,760 330,940","sourceConnector":"left","target":{"id":375},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":375,"inputs":{"object":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished","source":"$numberOfGPFinished"},"propertyName":"result","propertyValue":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished.result + 1","source":"$numberOfGPFinished.result + 1"}},"position":"210,940","title":"Set Property","transitions":[{"id":388,"inputs":{},"position":"330,970 330,1050","sourceConnector":"bottom","target":{"id":387},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":387,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish","$currentReportToCheckFinish","$currentReportToCheckFinish","$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"},{"count":27,"index":60,"kind":"idref"},{"count":27,"index":132,"kind":"idref"},{"count":27,"index":214,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.gpJob.results != null && $currentReportToCheckFinish.result.gpJob.results.Output_JSON != null && $currentReportToCheckFinish.result.gpJob.results.Output_JSON.paramUrl !== null && $currentReportToCheckFinish.result.gpJob.results.Output_JSON.paramUrl !== undefined","source":"$currentReportToCheckFinish.result.gpJob.results != null && $currentReportToCheckFinish.result.gpJob.results.Output_JSON != null && $currentReportToCheckFinish.result.gpJob.results.Output_JSON.paramUrl !== null && $currentReportToCheckFinish.result.gpJob.results.Output_JSON.paramUrl !== undefined"}},"position":"270,1050","title":"If","transitions":[{"branch":"false","id":392,"inputs":{},"position":"390,1080 490,1080 490,1095 510,1095","sourceConnector":"right","target":{"id":391}},{"branch":"true","id":399,"inputs":{},"position":"270,1080 250,1080 250,1140 260,1140 260,1230 240,1230","sourceConnector":"left","target":{"id":395}}]},{"action":"gcx:wf:core::SetProperty","id":391,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"GP job finished without json output\"\n}","source":"{\n  \"error\": \"GP job finished without json output\"\n}"}},"position":"510,1080","title":"Set Property"},{"action":"gcx:wf:core::Container","description":"Collect gp result data json for report","id":395,"inputs":{},"position":"0,1160","title":"Container"},{"action":"gcx:wf:core::If","id":827,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish","$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"},{"count":27,"index":55,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.dataUrl !== null && $currentReportToCheckFinish.result.dataUrl !== undefined","source":"$currentReportToCheckFinish.result.dataUrl !== null && $currentReportToCheckFinish.result.dataUrl !== undefined"}},"position":"310,-20","title":"If","transitions":[{"branch":"false","id":835,"inputs":{},"position":"430,10 550,10 550,35 570,35","sourceConnector":"right","target":{"id":831},"targetConnector":"left"},{"branch":"true","id":864,"inputs":{},"position":"310,10 230,10 230,70 80,70 80,90","sourceConnector":"left","target":{"id":354},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":831,"inputs":{"object":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished","source":"$numberOfGPFinished"},"propertyName":"result","propertyValue":{"accessors":["$numberOfGPFinished"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$numberOfGPFinished.result + 1","source":"$numberOfGPFinished.result + 1"}},"position":"570,20","title":"Set Property"}]},{"id":338,"steps":[{"id":339,"inputs":{},"position":"0,-160","purpose":"start","title":"Container","transitions":[{"id":344,"inputs":{},"position":"90,-100 90,-20","target":{"id":343}}]},{"action":"gcx:wf:core::If","id":343,"inputs":{"condition":{"accessors":["$subReports","$subReports","$subReports"],"annotations":[{"count":11,"index":1,"kind":"idref"},{"count":11,"index":24,"kind":"idref"},{"count":11,"index":54,"kind":"idref"}],"code":"$subReports != null && $subReports.result != null && $subReports.result.length > 0","source":" $subReports != null && $subReports.result != null && $subReports.result.length > 0"}},"position":"30,-20","title":"If","transitions":[{"branch":"false","id":515,"inputs":{},"position":"150,10 250,10 250,45 270,45","sourceConnector":"right","target":{"id":513},"targetConnector":"left"},{"branch":"true","id":1117,"inputs":{},"position":"30,10 -100,10 -100,400","sourceConnector":"left","target":{"id":349},"targetConnector":"top"}]},{"action":"gcx:wf:pdf::MergePdfs","id":349,"inputs":{"sources":{"accessors":["$subReports"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$subReports.result","source":"$subReports.result"}},"name":"mergeFinalPdfsReport","position":"-220,400","title":"Merge PDFs"},{"action":"gcx:wf:core::SetWorkflowOutput","id":513,"inputs":{"name":"output","value":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"No sub report collected\"\n}","source":"{\n  \"error\":\"No sub report collected\"\n}"}},"position":"270,30","title":"Set Workflow Output","transitions":[{"id":637,"inputs":{},"position":"390,60 390,150","sourceConnector":"bottom","target":{"id":635},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":635,"inputs":{"message":{"accessors":[],"code":" \"Error generating report, no sub reports collected\"","source":" \"Error generating report, no sub reports collected\""}},"position":"270,150","title":"Log"}]},{"id":396,"steps":[{"id":397,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":454,"inputs":{},"position":"90,60 90,130 80,130 80,150","sourceConnector":"bottom","target":{"id":450}}]},{"action":"gcx:wf:core::Container","description":"Get GP job json infor","id":450,"inputs":{},"position":"-40,150","title":"Container","transitions":[{"id":483,"inputs":{},"position":"80,270 80,350","sourceConnector":"bottom","target":{"id":479}}]},{"action":"gcx:wf:core::Container","description":"Download json data for report","id":479,"inputs":{},"position":"-40,350","title":"Container"}]},{"id":451,"steps":[{"id":452,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":478,"inputs":{},"position":"90,60 90,240 210,240 210,260","sourceConnector":"bottom","target":{"id":457},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":457,"inputs":{"expression":{"accessors":["$currentReportToCheckFinish","$currentReportToCheckFinish","$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"},{"count":27,"index":56,"kind":"idref"},{"count":27,"index":111,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.dataUrl + \"/jobs/\" + $currentReportToCheckFinish.result.gpJob.jobId + \"/\" + $currentReportToCheckFinish.result.gpJob.results.Output_JSON.paramUrl","source":"$currentReportToCheckFinish.result.dataUrl + \"/jobs/\" + $currentReportToCheckFinish.result.gpJob.jobId + \"/\" + $currentReportToCheckFinish.result.gpJob.results.Output_JSON.paramUrl"}},"name":"reportJsonUrl","position":"90,260","title":"Create Value","transitions":[{"id":469,"inputs":{},"position":"210,330 210,440 180,440 180,460","sourceConnector":"bottom","target":{"id":459},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":459,"inputs":{"method":"POST","query":{"accessors":[],"annotations":[],"code":"{\n    \"f\": \"json\"\n}","source":"{\n  \"f\":\"json\"\n}"},"url":{"accessors":["$reportJsonUrl"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$reportJsonUrl.result","source":"$reportJsonUrl.result"}},"name":"webRequestGetReportJson","position":"60,460","title":"Send Web Request","transitions":[{"id":471,"inputs":{},"position":"180,530 180,590 170,590 170,610","sourceConnector":"bottom","target":{"id":461},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":461,"inputs":{"condition":{"accessors":["$webRequestGetReportJson","$webRequestGetReportJson"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":42,"kind":"idref"}],"code":"$webRequestGetReportJson.text !== null && $webRequestGetReportJson.text !== undefined","source":"$webRequestGetReportJson.text !== null && $webRequestGetReportJson.text !== undefined"}},"position":"110,610","title":"If","transitions":[{"branch":"false","id":473,"inputs":{},"position":"230,640 330,640 330,765 350,765","sourceConnector":"right","target":{"id":463},"targetConnector":"left"},{"branch":"true","id":475,"inputs":{},"position":"110,640 90,640 90,800 170,800 170,820","sourceConnector":"left","target":{"id":465}}]},{"action":"gcx:wf:core::SetProperty","id":463,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"},"propertyName":"error","propertyValue":{"accessors":["$reportJsonUrl"],"annotations":[{"count":14,"index":54,"kind":"idref"}],"code":"{\n    \"error\": \"Can not get report json result from \" + $reportJsonUrl.result\n}","source":"{\n  \"error\": \"Can not get report json result from \" + $reportJsonUrl.result\n}"}},"position":"350,750","title":"Set Property"},{"action":"gcx:wf:core::ParseJson","id":465,"inputs":{"json":{"accessors":["$webRequestGetReportJson"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$webRequestGetReportJson.text","source":"$webRequestGetReportJson.text"}},"name":"parseJobJson2","position":"50,820","title":"Parse JSON","transitions":[{"id":477,"inputs":{},"position":"170,890 170,1000","sourceConnector":"bottom","target":{"id":467},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":467,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.gpJob","source":"$currentReportToCheckFinish.result.gpJob"},"propertyName":"outputJsonInfo","propertyValue":{"accessors":["$parseJobJson2"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson2.result","source":"$parseJobJson2.result"}},"position":"50,1000","title":"Set Property"}]},{"id":480,"steps":[{"id":481,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":511,"inputs":{},"position":"90,60 90,290 290,290 290,310","sourceConnector":"bottom","target":{"id":486},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":486,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish","$currentReportToCheckFinish","$currentReportToCheckFinish","$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"},{"count":27,"index":67,"kind":"idref"},{"count":27,"index":140,"kind":"idref"},{"count":27,"index":218,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.gpJob.outputJsonInfo != null && $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value != null && $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url !== null && $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url !== undefined","source":"$currentReportToCheckFinish.result.gpJob.outputJsonInfo != null && $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value != null && $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url !== null && $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url !== undefined"}},"position":"230,310","title":"If","transitions":[{"branch":"true","id":508,"inputs":{},"position":"230,340 160,340 160,530","sourceConnector":"left","target":{"id":488},"targetConnector":"top"},{"branch":"false","id":510,"inputs":{},"position":"350,340 540,340 540,430","sourceConnector":"right","target":{"id":498},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":488,"inputs":{"method":"POST","query":{"accessors":[],"annotations":[],"code":"{\n    \"f\": \"json\"\n}","source":"{\n  \"f\":\"json\"\n}"},"url":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url","source":"$currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url"}},"name":"webRequestGetReportData","position":"40,530","title":"Send Web Request","transitions":[{"id":500,"inputs":{},"position":"160,600 160,660 150,660 150,680","sourceConnector":"bottom","target":{"id":490},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":490,"inputs":{"condition":{"accessors":["$webRequestGetReportData","$webRequestGetReportData"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":42,"kind":"idref"}],"code":"$webRequestGetReportData.text !== null && $webRequestGetReportData.text !== undefined","source":"$webRequestGetReportData.text !== null && $webRequestGetReportData.text !== undefined"}},"position":"90,680","title":"If","transitions":[{"branch":"false","id":502,"inputs":{},"position":"210,710 310,710 310,835 330,835","sourceConnector":"right","target":{"id":492},"targetConnector":"left"},{"branch":"true","id":504,"inputs":{},"position":"90,710 70,710 70,870 150,870 150,890","sourceConnector":"left","target":{"id":494}}]},{"action":"gcx:wf:core::SetProperty","id":492,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"},"propertyName":"error","propertyValue":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":50,"kind":"idref"}],"code":"{\n    \"error\": \"Can not download json data from \" + $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url\n}","source":"{\n  \"error\": \"Can not download json data from \" + $currentReportToCheckFinish.result.gpJob.outputJsonInfo.value.url\n}"}},"position":"330,820","title":"Set Property"},{"action":"gcx:wf:core::ParseJson","id":494,"inputs":{"json":{"accessors":["$webRequestGetReportData"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$webRequestGetReportData.text","source":"$webRequestGetReportData.text"}},"name":"parseJobJson3","position":"30,890","title":"Parse JSON","transitions":[{"id":506,"inputs":{},"position":"150,960 150,1070","sourceConnector":"bottom","target":{"id":496},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":496,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"},"propertyName":"data","propertyValue":{"accessors":["$parseJobJson3"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson3.result","source":"$parseJobJson3.result"}},"position":"30,1070","title":"Set Property"},{"action":"gcx:wf:core::SetProperty","id":498,"inputs":{"object":{"accessors":["$currentReportToCheckFinish"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish.result","source":"$currentReportToCheckFinish.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Gp json output does not have a valid url to download json data \"\n}","source":"{\n  \"error\": \"Gp json output does not have a valid url to download json data \"\n}"}},"position":"420,430","title":"Set Property"}]},{"id":491,"steps":[{"id":495,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":507,"inputs":{},"position":"90,60 90,140","target":{"id":499}}]},{"action":"gcx:wf:core::CreateValue","id":499,"inputs":{"expression":{"accessors":["$forEachReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$forEachReportToGenerate.item","source":"$forEachReportToGenerate.item"}},"name":"currentReportToGenerate","position":"-30,140","title":"Create Value","transitions":[{"id":512,"inputs":{},"position":"90,210 90,280","sourceConnector":"bottom","target":{"id":503}}]},{"action":"gcx:wf:core::TryCatch","id":503,"inputs":{},"name":"tryCatchGenerateSubreport","position":"-30,280","title":"Try Catch"}]},{"id":514,"steps":[{"id":516,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":520,"inputs":{},"position":"90,60 90,130 80,130 80,150","target":{"id":518}}]},{"action":"gcx:wf:core::SetProperty","id":518,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"error","propertyValue":{"accessors":["$tryCatchGenerateSubreport"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$tryCatchGenerateSubreport.error","source":"$tryCatchGenerateSubreport.error"}},"position":"-40,150","title":"Set Property"}]},{"id":522,"steps":[{"id":524,"inputs":{},"position":"-20,-250","purpose":"start","title":"Try","transitions":[{"id":542,"inputs":{},"position":"70,-190 70,-130 -50,-130 -50,-110","sourceConnector":"bottom","target":{"id":1050},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":526,"inputs":{"condition":{"accessors":["$currentReportToGenerate","$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":48,"kind":"idref"}],"code":"$currentReportToGenerate.result.data != null && $currentReportToGenerate.result.error == null","source":"$currentReportToGenerate.result.data != null && $currentReportToGenerate.result.error == null"}},"position":"30,-20","title":"If","transitions":[{"branch":"false","id":345,"inputs":{},"position":"150,10 290,10 290,0 370,0 370,20","sourceConnector":"right","target":{"id":569},"targetConnector":"top"},{"branch":"true","id":1115,"inputs":{},"position":"30,10 10,10 10,360 30,360","sourceConnector":"left","target":{"id":1011}}]},{"action":"gcx:wf:core::If","id":569,"inputs":{"condition":{"accessors":["$currentReportToGenerate","$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":50,"kind":"idref"}],"code":"$currentReportToGenerate.result.error === null || $currentReportToGenerate.result.error === undefined","source":"$currentReportToGenerate.result.error === null || $currentReportToGenerate.result.error === undefined"}},"position":"310,20","title":"If","transitions":[{"branch":"true","id":1315,"inputs":{},"position":"310,50 280,50 280,120","sourceConnector":"left","target":{"id":573},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":573,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"No report data collected from gp task\"\n}","source":"{\n  \"error\": \"No report data collected from gp task\"\n}"}},"position":"160,120","title":"Set Property"},{"action":"gcx:wf:core::Container","description":"Run report with GP data source","id":1011,"inputs":{},"position":"30,300","title":"Container"},{"action":"gcx:wf:core::If","id":1050,"inputs":{"condition":{"accessors":["$currentReportToGenerate","$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":24,"index":52,"kind":"idref"}],"code":"$currentReportToGenerate.result.dataUrl === null || $currentReportToGenerate.result.dataUrl === undefined","source":"$currentReportToGenerate.result.dataUrl === null || $currentReportToGenerate.result.dataUrl === undefined"}},"position":"-110,-110","title":"If","transitions":[{"branch":"false","id":1051,"inputs":{},"position":"10,-80 90,-80 90,-20","sourceConnector":"right","target":{"id":526},"targetConnector":"top"},{"branch":"true","id":1093,"inputs":{},"position":"-110,-80 -180,-80 -180,80 -200,80","sourceConnector":"left","target":{"id":1090}}]},{"action":"gcx:wf:core::Container","description":"Run report without GP data source","id":1090,"inputs":{},"position":"-440,10","title":"Container"}]},{"id":539,"steps":[{"id":540,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":554,"inputs":{},"position":"90,60 90,120 80,120 80,140","target":{"id":553}}]},{"action":"gcx:wf:core::CreateValue","id":553,"inputs":{"expression":{"accessors":[],"annotations":[],"code":"{\n    \"subjectTemplate\": \"Confirmation of {reportName} Report\",\n    \"messageTemplate\": \"<div style='font-family:Arial'><p>Dear User</p><p>This is to confirm your request for report: {reportName}, {projectName}, {jurisdiction}, {projectType} has been received and accepted at {currentTime}</p><p>You should expect your report to be ready in {estimatedProcessingTime} minutes</p><p>You will receive another email with the pdf report attached when the report is ready.</p><p><a href=\\\"{viewerUrl}\\\">Open PPT Viewer</a></p><p>SACOG GIS Services</p></div>\",\n    \"fromEmail\": \"ppa@sacog.org\"\n}","source":"{\n  \"subjectTemplate\": \"Confirmation of {reportName} Report\",\n  \"messageTemplate\": \"<div style='font-family:Arial'><p>Dear User</p><p>This is to confirm your request for report: {reportName}, {projectName}, {jurisdiction}, {projectType} has been received and accepted at {currentTime}</p><p>You should expect your report to be ready in {estimatedProcessingTime} minutes</p><p>You will receive another email with the pdf report attached when the report is ready.</p><p><a href=\\\"{viewerUrl}\\\">Open PPT Viewer</a></p><p>SACOG GIS Services</p></div>\",\n  \"fromEmail\": \"ppa@sacog.org\"\n}"}},"name":"confirmationEmailConfig","position":"-40,140","title":"Create Value","transitions":[{"id":563,"inputs":{},"position":"80,210 80,290","sourceConnector":"bottom","target":{"id":561}}]},{"action":"gcx:wf:core::CreateValue","id":561,"inputs":{"expression":{"accessors":[],"annotations":[],"code":"{\n    \"subjectTemplate\": \"Error Generating Report {reportName}\",\n    \"messageTemplate\": \"<div style='font-family:Arial'><p>Error Generating Report: {reportName}, {projectName}, {jurisdiction}, {projectType} due to the following error: </p><p>{errorMessage}</p><p><a href=\\\"{viewerUrl}\\\">Open PPT Viewer</a></p><p>SACOG GIS Services</p></div></div>\",\n    \"fromEmail\": \"ppa@sacog.org\"\n}","source":"{\n  \"subjectTemplate\": \"Error Generating Report {reportName}\",\n  \"messageTemplate\": \"<div style='font-family:Arial'><p>Error Generating Report: {reportName}, {projectName}, {jurisdiction}, {projectType} due to the following error: </p><p>{errorMessage}</p><p><a href=\\\"{viewerUrl}\\\">Open PPT Viewer</a></p><p>SACOG GIS Services</p></div></div>\",\n  \"fromEmail\": \"ppa@sacog.org\"\n}\n"}},"name":"ErrorEmailConfig","position":"-40,290","title":"Create Value","transitions":[{"id":575,"inputs":{},"position":"80,360 80,450","sourceConnector":"bottom","target":{"id":572}}]},{"action":"gcx:wf:core::CreateValue","id":572,"inputs":{"expression":{"accessors":[],"annotations":[],"code":"{\n    \"subjectTemplate\": \"Report {reportName} Ready\",\n    \"messageTemplate\": \"<div style='font-family:Arial'><p>Dear User</p><p>This is to confirm your request for report: {reportName}, {projectName}, {jurisdiction}, {projectType} is ready.</p><a href=\\\"{viewerUrl}\\\">Open Viewer</a></div>\",\n    \"partialSubReportErrorMessage\": \"<p>Some sub reports can not be generated, which includes: </p>\",\n    \"fromEmail\": \"ppa@sacog.org\"\n}","source":"{\n  \"subjectTemplate\": \"Report {reportName} Ready\",\n  \"messageTemplate\": \"<div style='font-family:Arial'><p>Dear User</p><p>This is to confirm your request for report: {reportName}, {projectName}, {jurisdiction}, {projectType} is ready.</p><a href=\\\"{viewerUrl}\\\">Open Viewer</a></div>\",\n  \"partialSubReportErrorMessage\": \"<p>Some sub reports can not be generated, which includes: </p>\",\n  \"fromEmail\": \"ppa@sacog.org\"\n}"}},"name":"FinalReportEmailConfig","position":"-40,450","title":"Create Value","transitions":[{"id":800,"inputs":{},"position":"80,520 80,590","sourceConnector":"bottom","target":{"id":798}}]},{"action":"gcx:wf:core::CreateValue","description":"Note: Admin will only receive email if there was errors when generating report","id":798,"inputs":{"expression":{"accessors":[],"annotations":[],"code":"{\n    \"adminEmail\": \"dconly@sacog.org\",\n    \"subjectTemplate\": \"Error Generating Report {reportName}\",\n    \"messageTemplate\": \"<div style='font-family:Arial'><p>There were some errors generating report: {reportName}, {projectName}, {jurisdiction}, {projectType}: </p><p>{errorMessage}</p><p>The report were for user: {userEmail}</p><p><a href=\\\"{viewerUrl}\\\">Open PPT Viewer</a></p><p>SACOG GIS Services</p></div></div>\",\n    \"fromEmail\": \"ppa@sacog.org\"\n}","source":"{\n  \"adminEmail\": \"dconly@sacog.org\",\n  \"subjectTemplate\": \"Error Generating Report {reportName}\",\n  \"messageTemplate\": \"<div style='font-family:Arial'><p>There were some errors generating report: {reportName}, {projectName}, {jurisdiction}, {projectType}: </p><p>{errorMessage}</p><p>The report were for user: {userEmail}</p><p><a href=\\\"{viewerUrl}\\\">Open PPT Viewer</a></p><p>SACOG GIS Services</p></div></div>\",\n  \"fromEmail\": \"ppa@sacog.org\"\n}\n"}},"name":"AdminEmailConfig","position":"-40,590","title":"Create Value"}]},{"id":577,"steps":[{"id":578,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":661,"inputs":{},"position":"90,60 90,120","sourceConnector":"bottom","target":{"id":590}}]},{"action":"gcx:wf:core::GetWorkflowInputs","id":590,"inputs":{},"name":"getWorkflowInputs","position":"-30,120","title":"Get Workflow Inputs","transitions":[{"id":624,"inputs":{},"position":"90,190 90,210 100,210 100,230","sourceConnector":"bottom","target":{"id":620},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":592,"inputs":{},"name":"reportConfig","position":"-20,410","title":"Create Value","transitions":[{"id":1320,"inputs":{},"position":"100,480 100,520","sourceConnector":"bottom","target":{"id":622}}]},{"action":"gcx:wf:core::CreateValue","id":594,"inputs":{"expression":{"accessors":[],"code":"180","source":"180"}},"name":"reportTimeoutMinutes","position":"0,820","title":"Create Value","transitions":[{"id":626,"inputs":{},"position":"120,890 120,950","sourceConnector":"bottom","target":{"id":596},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":596,"inputs":{"expression":{"accessors":[],"code":"500","source":"500"}},"name":"millisecondsDelay","position":"0,950","title":"Create Value","transitions":[{"id":1495,"inputs":{},"position":"120,1020 120,1050 110,1050 110,1070","sourceConnector":"bottom","target":{"id":1494},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":598,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":33,"kind":"idref"},{"count":13,"index":69,"kind":"idref"},{"count":13,"index":110,"kind":"idref"},{"count":13,"index":156,"kind":"idref"}],"code":"$reportConfig.result === null || $reportConfig.undefined === null || $reportConfig.result.reports === null || $reportConfig.result.reports === undefined || $reportConfig.result.reports.length <= 0","source":"$reportConfig.result === null || $reportConfig.undefined === null || $reportConfig.result.reports === null || $reportConfig.result.reports === undefined || $reportConfig.result.reports.length <= 0"}},"position":"60,1180","title":"If","transitions":[{"branch":"true","id":628,"inputs":{},"position":"60,1210 -150,1210 -150,1250","sourceConnector":"left","target":{"id":600},"targetConnector":"top"},{"branch":"false","id":630,"inputs":{},"position":"180,1210 200,1210 200,1300 120,1300 120,1320","sourceConnector":"right","target":{"id":602},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetWorkflowOutput","id":600,"inputs":{"name":"output","value":{"accessors":[],"annotations":[],"code":"{\n    \"error\": {\n        \"message\": \"Invalid report request or no sub reports selected\"\n    },\n    \"message\": \"Invalid report request or no sub reports selected\",\n    \"status\": \"Error\"\n}","source":"{\n   \"error\": {\n        \"message\": \"Invalid report request or no sub reports selected\"\n   },\n   \"message\": \"Invalid report request or no sub reports selected\",\n   \"status\": \"Error\"\n}"}},"position":"-270,1250","title":"Set Workflow Output","transitions":[{"id":632,"inputs":{},"position":"-270,1265 -350,1265 -350,1340","sourceConnector":"left","target":{"id":604}}]},{"action":"gcx:wf:core::If","id":602,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":45,"kind":"idref"}],"code":"$reportConfig.result.projectLine === null || $reportConfig.result.projectLine === undefined","source":"$reportConfig.result.projectLine === null || $reportConfig.result.projectLine === undefined"}},"position":"60,1320","title":"If","transitions":[{"branch":"true","id":634,"inputs":{},"position":"60,1350 -150,1350 -150,1490","sourceConnector":"left","target":{"id":606},"targetConnector":"top"},{"branch":"false","id":636,"inputs":{},"position":"180,1350 200,1350 200,1530 110,1530 110,1550","sourceConnector":"right","target":{"id":608},"targetConnector":"top"}]},{"action":"gcx:wf:core::Exit","id":604,"inputs":{},"position":"-440,1340","title":"Exit"},{"action":"gcx:wf:core::SetWorkflowOutput","id":606,"inputs":{"name":"output","value":{"accessors":[],"annotations":[],"code":"{\n    \"error\": {\n        \"message\": \"No project line specified\"\n    },\n    \"message\": \"No project line specified\",\n    \"status\": \"Error\"\n}","source":"{\n   \"error\": {\n        \"message\": \"No project line specified\"\n   },\n   \"message\": \"No project line specified\",\n   \"status\": \"Error\"\n}"}},"position":"-270,1490","title":"Set Workflow Output","transitions":[{"id":638,"inputs":{},"position":"-270,1505 -350,1505 -350,1400","sourceConnector":"left","target":{"id":604}}]},{"action":"gcx:wf:core::If","id":608,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":39,"kind":"idref"}],"code":"$reportConfig.result.email === null || $reportConfig.result.email === undefined","source":"$reportConfig.result.email === null || $reportConfig.result.email === undefined"}},"position":"50,1550","title":"If","transitions":[{"branch":"true","id":640,"inputs":{},"position":"50,1580 -150,1580 -150,1610","sourceConnector":"left","target":{"id":610},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetWorkflowOutput","id":610,"inputs":{"name":"output","value":{"accessors":[],"annotations":[],"code":"{\n    \"error\": {\n        \"message\": \"No email specified\"\n    },\n    \"message\": \"No email specified\",\n    \"status\": \"Error\"\n}","source":"{\n   \"error\": {\n        \"message\": \"No email specified\"\n   },\n   \"message\": \"No email specified\",\n   \"status\": \"Error\"\n}"}},"position":"-270,1610","title":"Set Workflow Output","transitions":[{"id":642,"inputs":{},"position":"-270,1625 -350,1625 -350,1400","sourceConnector":"left","target":{"id":604}}]},{"action":"gcx:wf:core::Log","id":612,"inputs":{"message":{"accessors":["$inputJson"],"annotations":[{"count":10,"index":31,"kind":"idref"}],"code":"\"Workflow input collected: \" + $inputJson.json","source":"\"Workflow input collected: \" + $inputJson.json"}},"position":"-20,340","title":"Log","transitions":[{"id":796,"inputs":{},"position":"100,370 100,410","sourceConnector":"bottom","target":{"id":592}}]},{"action":"gcx:wf:core::SetProperty","id":618,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig","source":"$reportConfig"},"propertyName":"result","propertyValue":{"accessors":["$cloneInputJsonToNewObject"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$cloneInputJsonToNewObject.result","source":"$cloneInputJsonToNewObject.result"}},"position":"-10,720","title":"Set Property","transitions":[{"id":986,"inputs":{},"position":"110,750 110,800 120,800 120,820","sourceConnector":"bottom","target":{"id":594},"targetConnector":"top"}]},{"action":"gcx:wf:core::ConvertToJson","id":620,"inputs":{"object":{"accessors":["$getWorkflowInputs"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$getWorkflowInputs.inputs","source":"$getWorkflowInputs.inputs"}},"name":"inputJson","position":"-20,230","title":"Convert To JSON","transitions":[{"id":654,"inputs":{},"position":"100,300 100,340","sourceConnector":"bottom","target":{"id":612},"targetConnector":"top"}]},{"action":"gcx:wf:core::ParseJson","description":"Need to clone the input to a new object as the original workflow input should not be modified","id":622,"inputs":{"json":{"accessors":["$inputJson"],"annotations":[{"count":10,"index":0,"kind":"idref"}],"code":"$inputJson.json","source":"$inputJson.json"}},"name":"cloneInputJsonToNewObject","position":"-20,520","title":"Clone workflow input","transitions":[{"id":1459,"inputs":{},"position":"100,670 100,700 110,700 110,720","sourceConnector":"bottom","target":{"id":618},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","description":"For testing only, set workflow input for testing","id":789,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig","source":"$reportConfig"},"propertyName":"result","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"reportName\": \"Community Design\",\n    \"projectLine\": {\n        \"geometryType\": \"esriGeometryPolyline\",\n        \"sr\": {\n            \"wkid\": 102642\n        },\n        \"features\": [\n            {\n                \"geometry\": {\n                    \"spatialReference\": {\n                        \"wkid\": 102642\n                    },\n                    \"paths\": [\n                        [\n                            [\n                                6682834.339038162,\n                                2008827.6448303296\n                            ],\n                            [\n                                6683018.20827164,\n                                2009012.4817155805\n                            ],\n                            [\n                                6683476.581184241,\n                                2009750.5409328379\n                            ],\n                            [\n                                6684306.110269466,\n                                2010122.3934469999\n                            ],\n                            [\n                                6685227.974611226,\n                                2010494.710557597\n                            ],\n                            [\n                                6686331.882748199,\n                                2011419.8228063449\n                            ],\n                            [\n                                6687715.450877168,\n                                2011794.4299993918\n                            ],\n                            [\n                                6689839.628134035,\n                                2011804.8385767544\n                            ],\n                            [\n                                6692426.517112512,\n                                2011633.7909720827\n                            ],\n                            [\n                                6693996.102115986,\n                                2011733.7226217804\n                            ],\n                            [\n                                6695842.745027093,\n                                2011835.1945954629\n                            ],\n                            [\n                                6695664.213016685,\n                                2010638.5007016976\n                            ],\n                            [\n                                6694934.309040888,\n                                2008886.9783839088\n                            ],\n                            [\n                                6694664.759936581,\n                                2007413.700850268\n                            ],\n                            [\n                                6694301.857007742,\n                                2006123.868166893\n                            ],\n                            [\n                                6695146.966101938,\n                                2003460.0532927598\n                            ],\n                            [\n                                6696166.5422928589,\n                                2002821.2443045313\n                            ],\n                            [\n                                6696723.7401365679,\n                                2002272.0614817709\n                            ],\n                            [\n                                6697007.629987034,\n                                2000985.311226373\n                            ],\n                            [\n                                6697108.6667729369,\n                                1999329.4492889876\n                            ],\n                            [\n                                6697109.147001803,\n                                1999237.4286667205\n                            ],\n                            [\n                                6698133.775880099,\n                                1997678.3320476548\n                            ],\n                            [\n                                6699153.165157541,\n                                1997131.5260593456\n                            ],\n                            [\n                                6697956.698354091,\n                                1996204.878183904\n                            ],\n                            [\n                                6695552.101068032,\n                                1996560.4968017708\n                            ],\n                            [\n                                6693796.316915683,\n                                1996551.4995354068\n                            ],\n                            [\n                                6692595.448112842,\n                                1996453.3814971\n                            ],\n                            [\n                                6692225.805271902,\n                                1996451.519558976\n                            ],\n                            [\n                                6691948.578411587,\n                                1996450.1265865807\n                            ],\n                            [\n                                6690842.397732138,\n                                1995892.387712608\n                            ],\n                            [\n                                6690569.278270818,\n                                1995062.68937963\n                            ]\n                        ]\n                    ]\n                }\n            }\n        ]\n    },\n    \"projectName\": \"Community Design Test Project\",\n    \"jurisdiction\": \"Community Design Test Jurisdiction\",\n    \"projectType\": \"Community Design\",\n    \"email\": \"yongzhi.yu@vertigis.com\",\n    \"ADT\": 100,\n    \"postedSpeedLimit\": 48,\n    \"PCI\": 67,\n    \"titleReport\": {\n        \"dataSourceName\": \"TitleReportDataSource\",\n        \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=5407317536c34d60b42e8d4e1de3280a\",\n        \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPTitleAndGuide/GPServer/RPTitleAndGuide\",\n        \"maxProcessingTimeInMins\": 10\n    },\n    \"reports\": [\n        {\n            \"name\": \"reduce VMT\",\n            \"dataSourceName\": \"SACOG_RegionalProgram_Freeway_ReduceVMT\",\n            \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=59a9262a9cd34903a0077acfaad611a1\",\n            \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpVMT/GPServer/RPFwyExpVMT\",\n            \"maxProcessingTimeInMins\": 10\n        },\n        {\n            \"name\": \"Reduce Congestion\",\n            \"dataSourceName\": \"SACOG_RegionalProgram_Freeway_ReduceCongestion\",\n            \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=db062a075fb54faaa0e2ef8ea06e7df7\",\n            \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpCongestion/GPServer/RPFwyExpCongestion\",\n            \"maxProcessingTimeInMins\": 10\n        },\n        {\n            \"name\": \"Encourage Multimodal Travel\",\n            \"dataSourceName\": \"SACOG_RegionalProgram_Freeway_Multimodal\",\n            \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=da0d38a52dd149cb9c9b388208a7f73c\",\n            \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpMultiModal/GPServer/RPFwyExpMultiModal\",\n            \"maxProcessingTimeInMins\": 10\n        },\n        {\n            \"name\": \"Promote Economic Prosperity\",\n            \"dataSourceName\": \"SACOG_RegionalProgram_Freeway_EconProsperity\",\n            \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=30b048081d2f4692aa144a6b10c2a8db\",\n            \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpEconProsp/GPServer/RPFwyExpEconProsp\",\n            \"maxProcessingTimeInMins\": 10\n        },\n        {\n            \"name\": \"Improve Freight Mobility\",\n            \"dataSourceName\": \"SACOG_RegionalProgram_Freeway_Freight\",\n            \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=7ca5af8b74e641bfa0a0cd95f74cd8b5\",\n            \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpFreight/GPServer/RPFwyExpFreight\",\n            \"maxProcessingTimeInMins\": 10\n        },\n        {\n            \"name\": \"Make a Safer Transportation System\",\n            \"dataSourceName\": \"SACOG_RegionalProgram_Freeway_Safety\",\n            \"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=cca34d23f77d40d2b52239501b371eb7\",\n            \"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpSafety/GPServer/RPFwyExpSafety\",\n            \"maxProcessingTimeInMins\": 10\n        }\n    ]\n}","source":"{\n\t\"reportName\": \"Community Design\",\n\t\"projectLine\": {\n\t\t\"geometryType\": \"esriGeometryPolyline\",\n\t\t\"sr\": {\n\t\t\t\"wkid\": 102642\n\t\t},\n\t\t\"features\": [\n\t\t\t{\n\t\t\t\t\"geometry\": {\n\t\t\t\t\t\"spatialReference\": {\n\t\t\t\t\t\t\"wkid\": 102642\n\t\t\t\t\t},\n\t\t\t\t\t\"paths\": [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6682834.339038162,\n\t\t\t\t\t\t\t\t2008827.6448303296\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6683018.20827164,\n\t\t\t\t\t\t\t\t2009012.4817155805\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6683476.581184241,\n\t\t\t\t\t\t\t\t2009750.5409328379\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6684306.110269466,\n\t\t\t\t\t\t\t\t2010122.3934469999\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6685227.974611226,\n\t\t\t\t\t\t\t\t2010494.710557597\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6686331.882748199,\n\t\t\t\t\t\t\t\t2011419.8228063449\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6687715.450877168,\n\t\t\t\t\t\t\t\t2011794.4299993918\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6689839.628134035,\n\t\t\t\t\t\t\t\t2011804.8385767544\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6692426.517112512,\n\t\t\t\t\t\t\t\t2011633.7909720827\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6693996.102115986,\n\t\t\t\t\t\t\t\t2011733.7226217804\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6695842.745027093,\n\t\t\t\t\t\t\t\t2011835.1945954629\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6695664.213016685,\n\t\t\t\t\t\t\t\t2010638.5007016976\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6694934.309040888,\n\t\t\t\t\t\t\t\t2008886.9783839088\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6694664.759936581,\n\t\t\t\t\t\t\t\t2007413.700850268\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6694301.857007742,\n\t\t\t\t\t\t\t\t2006123.868166893\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6695146.966101938,\n\t\t\t\t\t\t\t\t2003460.0532927598\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6696166.5422928589,\n\t\t\t\t\t\t\t\t2002821.2443045313\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6696723.7401365679,\n\t\t\t\t\t\t\t\t2002272.0614817709\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6697007.629987034,\n\t\t\t\t\t\t\t\t2000985.311226373\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6697108.6667729369,\n\t\t\t\t\t\t\t\t1999329.4492889876\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6697109.147001803,\n\t\t\t\t\t\t\t\t1999237.4286667205\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6698133.775880099,\n\t\t\t\t\t\t\t\t1997678.3320476548\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6699153.165157541,\n\t\t\t\t\t\t\t\t1997131.5260593456\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6697956.698354091,\n\t\t\t\t\t\t\t\t1996204.878183904\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6695552.101068032,\n\t\t\t\t\t\t\t\t1996560.4968017708\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6693796.316915683,\n\t\t\t\t\t\t\t\t1996551.4995354068\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6692595.448112842,\n\t\t\t\t\t\t\t\t1996453.3814971\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6692225.805271902,\n\t\t\t\t\t\t\t\t1996451.519558976\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6691948.578411587,\n\t\t\t\t\t\t\t\t1996450.1265865807\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6690842.397732138,\n\t\t\t\t\t\t\t\t1995892.387712608\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t6690569.278270818,\n\t\t\t\t\t\t\t\t1995062.68937963\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t]\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t\"projectName\": \"Community Design Test Project\",\n\t\"jurisdiction\": \"Community Design Test Jurisdiction\",\n\t\"projectType\": \"Community Design\",\n\t\"email\": \"yongzhi.yu@vertigis.com\",\n\t\"ADT\": 100,\n\t\"postedSpeedLimit\": 48,\n\t\"PCI\": 67,\n\t\"titleReport\": {\n\"dataSourceName\": \"TitleReportDataSource\",\n\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=5407317536c34d60b42e8d4e1de3280a\",\n\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPTitleAndGuide/GPServer/RPTitleAndGuide\",\n\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t},\n\t\"reports\": [\n{\n\t\t\t\t\t\"name\": \"reduce VMT\",\n\t\t\t\t\t\"dataSourceName\": \"SACOG_RegionalProgram_Freeway_ReduceVMT\",\n\t\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=59a9262a9cd34903a0077acfaad611a1\",\n\t\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpVMT/GPServer/RPFwyExpVMT\",\n\t\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Reduce Congestion\",\n\t\t\t\t\t\"dataSourceName\": \"SACOG_RegionalProgram_Freeway_ReduceCongestion\",\n\t\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=db062a075fb54faaa0e2ef8ea06e7df7\",\n\t\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpCongestion/GPServer/RPFwyExpCongestion\",\n\t\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Encourage Multimodal Travel\",\n\t\t\t\t\t\"dataSourceName\": \"SACOG_RegionalProgram_Freeway_Multimodal\",\n\t\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=da0d38a52dd149cb9c9b388208a7f73c\",\n\t\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpMultiModal/GPServer/RPFwyExpMultiModal\",\n\t\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Promote Economic Prosperity\",\n\t\t\t\t\t\"dataSourceName\": \"SACOG_RegionalProgram_Freeway_EconProsperity\",\n\t\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=30b048081d2f4692aa144a6b10c2a8db\",\n\t\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpEconProsp/GPServer/RPFwyExpEconProsp\",\n\t\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Improve Freight Mobility\",\n\t\t\t\t\t\"dataSourceName\": \"SACOG_RegionalProgram_Freeway_Freight\",\n\t\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=7ca5af8b74e641bfa0a0cd95f74cd8b5\",\n\t\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpFreight/GPServer/RPFwyExpFreight\",\n\t\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"Make a Safer Transportation System\",\n\t\t\t\t\t\"dataSourceName\": \"SACOG_RegionalProgram_Freeway_Safety\",\n\t\t\t\t\t\"reportUrl\": \"https://latitudegeo.maps.arcgis.com/home/item.html?id=cca34d23f77d40d2b52239501b371eb7\",\n\t\t\t\t\t\"dataUrl\": \"https://services.sacog.org/hosting/rest/services/RPFwyExpSafety/GPServer/RPFwyExpSafety\",\n\t\t\t\t\t\"maxProcessingTimeInMins\": 10\n\t\t\t\t}\n\t]\n}"}},"position":"360,500","title":"Set Property"},{"action":"gcx:wf:core::CreateValue","id":1494,"inputs":{"expression":{"accessors":[],"code":"1","source":"1"}},"name":"millisecondsDelayBetweenGPTask","position":"-10,1070","title":"Create Value","transitions":[{"id":1499,"inputs":{},"position":"110,1140 110,1160 120,1160 120,1180","sourceConnector":"bottom","target":{"id":598},"targetConnector":"top"}]}]},{"id":812,"steps":[{"id":814,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":826,"inputs":{},"position":"90,60 90,110 100,110 100,130","target":{"id":816}}]},{"action":"gcx:wf:core::CreateValue","id":816,"inputs":{"expression":{"accessors":["$tryCatchGenerateReport"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$tryCatchGenerateReport.error.message","source":"$tryCatchGenerateReport.error.message"}},"name":"errorMessage2","position":"-20,130","title":"Create Value","transitions":[{"id":828,"inputs":{},"position":"100,200 100,260","sourceConnector":"bottom","target":{"id":818},"targetConnector":"top"}]},{"action":"gcx:wf:core::FormatDate","id":818,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate4","position":"-20,260","title":"Format Date","transitions":[{"id":830,"inputs":{},"position":"100,330 100,390","sourceConnector":"bottom","target":{"id":822},"targetConnector":"top"}]},{"action":"gcx:wf:server::SendEmail","id":820,"inputs":{"body":{"accessors":["$errorEmailBody2"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$errorEmailBody2.result","source":"$errorEmailBody2.result"},"from":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.fromEmail","source":"$AdminEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$errorEmailSubject2"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$errorEmailSubject2.result","source":"$errorEmailSubject2.result"},"to":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.adminEmail","source":"$AdminEmailConfig.result.adminEmail"}},"position":"-20,650","title":"Send Email"},{"action":"gcx:wf:core::CreateValue","id":822,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate4","$errorMessage2","$reportConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"}],"code":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate4.formatted).replace(\"{errorMessage}\", $errorMessage2.result).replace(\"{userEmail}\", $reportConfig.result.email)","source":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate4.formatted).replace(\"{errorMessage}\", $errorMessage2.result).replace(\"{userEmail}\", $reportConfig.result.email)"}},"name":"errorEmailSubject2","position":"-20,390","title":"Create Value","transitions":[{"id":832,"inputs":{},"position":"100,460 100,530","sourceConnector":"bottom","target":{"id":824}}]},{"action":"gcx:wf:core::CreateValue","id":824,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate4","$errorMessage2","$reportConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"}],"code":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate4.formatted).replace(\"{errorMessage}\", $errorMessage2.result).replace(\"{userEmail}\", $reportConfig.result.email)","source":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate4.formatted).replace(\"{errorMessage}\", $errorMessage2.result).replace(\"{userEmail}\", $reportConfig.result.email)"}},"name":"errorEmailBody2","position":"-20,530","title":"Create Value","transitions":[{"id":834,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":820}}]}]},{"id":843,"steps":[{"id":844,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":849,"inputs":{},"position":"90,60 90,130","target":{"id":848}}]},{"action":"gcx:wf:core::CreateValue","id":848,"inputs":{"expression":{"accessors":[],"code":"\"\"","source":"\"\""}},"name":"finalErrorMessages","position":"-30,130","title":"Create Value","transitions":[{"id":851,"inputs":{},"position":"90,200 90,250 80,250 80,270","sourceConnector":"bottom","target":{"id":850}}]},{"action":"gcx:wf:core::If","id":850,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":44,"kind":"idref"}],"code":"$reportConfig.result.titleReport != null && $reportConfig.result.titleReport.error != null","source":"$reportConfig.result.titleReport != null && $reportConfig.result.titleReport.error != null"}},"position":"20,270","title":"If","transitions":[{"branch":"true","id":854,"inputs":{},"position":"20,300 -60,300 -60,380","sourceConnector":"left","target":{"id":853},"targetConnector":"top"},{"branch":"false","id":857,"inputs":{},"position":"140,300 160,300 160,480 120,480 120,500","sourceConnector":"right","target":{"id":855},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":852,"inputs":{"condition":{"accessors":["$errorSubReports","$errorSubReports","$errorSubReports"],"annotations":[{"count":16,"index":0,"kind":"idref"},{"count":16,"index":28,"kind":"idref"},{"count":16,"index":63,"kind":"idref"}],"code":"$errorSubReports != null && $errorSubReports.result != null && $errorSubReports.result.length > 0","source":"$errorSubReports != null && $errorSubReports.result != null && $errorSubReports.result.length > 0"}},"position":"60,650","title":"If","transitions":[{"branch":"true","id":863,"inputs":{},"position":"60,680 40,680 40,740 120,740 120,760","sourceConnector":"left","target":{"id":859},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":853,"inputs":{"object":{"accessors":["$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$finalErrorMessages","source":"$finalErrorMessages"},"propertyName":"result","propertyValue":{"accessors":["$finalErrorMessages","$reportConfig"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":13,"index":52,"kind":"idref"}],"code":"$finalErrorMessages.result + \"<li>Title Report: \" + $reportConfig.result.titleReport.error.error + \"</li>\"","source":"$finalErrorMessages.result + \"<li>Title Report: \" + $reportConfig.result.titleReport.error.error + \"</li>\""}},"position":"-180,380","title":"Set Property","transitions":[{"id":856,"inputs":{},"position":"-60,410 -60,480 120,480 120,500","sourceConnector":"bottom","target":{"id":855},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":855,"inputs":{"expression":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports.filter(function (x) { return x.error != null; })","source":"$reportConfig.result.reports.filter(x => x.error != null)"}},"name":"errorSubReports","position":"0,500","title":"Create Value","transitions":[{"id":858,"inputs":{},"position":"120,570 120,650","sourceConnector":"bottom","target":{"id":852},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":859,"inputs":{"items":{"accessors":["$errorSubReports"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$errorSubReports.result","source":"$errorSubReports.result"}},"name":"forEachSubReportError","position":"0,760","title":"For Each"}]},{"id":860,"steps":[{"id":861,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":867,"inputs":{},"position":"90,60 90,120 100,120 100,140","sourceConnector":"bottom","target":{"id":866},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":866,"inputs":{"object":{"accessors":["$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$finalErrorMessages","source":"$finalErrorMessages"},"propertyName":"result","propertyValue":{"accessors":["$finalErrorMessages","$forEachSubReportError","$forEachSubReportError"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":22,"index":38,"kind":"idref"},{"count":22,"index":80,"kind":"idref"}],"code":"$finalErrorMessages.result + \"<li>\" + $forEachSubReportError.item.name + \": \" + $forEachSubReportError.item.error.error + \"</li>\"","source":"$finalErrorMessages.result + \"<li>\" + $forEachSubReportError.item.name + \": \" + $forEachSubReportError.item.error.error + \"</li>\""}},"position":"-20,140","title":"Set Property"}]},{"id":868,"steps":[{"action":"gcx:wf:core::SetProperty","id":871,"inputs":{"object":{"accessors":["$errorMessage3"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$errorMessage3","source":"$errorMessage3"},"propertyName":"result","propertyValue":{"accessors":["$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$finalErrorMessages.result","source":"$finalErrorMessages.result"}},"position":"-320,220","title":"Set Property","transitions":[{"id":929,"inputs":{},"position":"-200,250 -200,295 -20,295","sourceConnector":"bottom","target":{"id":895}}]},{"id":873,"inputs":{},"position":"0,-80","purpose":"start","title":"Container","transitions":[{"id":904,"inputs":{},"position":"0,-50 -40,-50 -40,45 -20,45","target":{"id":877}}]},{"action":"gcx:wf:core::CreateValue","id":877,"inputs":{"expression":"Can not generate report"},"name":"errorMessage3","position":"-20,10","title":"Create Value","transitions":[{"id":911,"inputs":{},"position":"100,80 100,110 -10,110 -10,130","sourceConnector":"bottom","target":{"id":888},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":881,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate5","$errorMessage3","$reportConfig","$estimatedProcessingTime"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"},{"count":24,"index":513,"kind":"idref"}],"code":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate5.formatted).replace(\"{errorMessage}\", $errorMessage3.result).replace(\"{userEmail}\", $reportConfig.result.email).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate5.formatted).replace(\"{errorMessage}\", $errorMessage3.result).replace(\"{userEmail}\", $reportConfig.result.email).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"errorEmailSubject3","position":"-20,390","title":"Create Value","transitions":[{"id":907,"inputs":{},"position":"100,460 100,530","sourceConnector":"bottom","target":{"id":885}}]},{"action":"gcx:wf:core::CreateValue","id":885,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate5","$errorMessage3","$reportConfig","$estimatedProcessingTime"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"},{"count":24,"index":513,"kind":"idref"}],"code":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate5.formatted).replace(\"{errorMessage}\", $errorMessage3.result).replace(\"{userEmail}\", $reportConfig.result.email).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate5.formatted).replace(\"{errorMessage}\", $errorMessage3.result).replace(\"{userEmail}\", $reportConfig.result.email).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"errorEmailBody3","position":"-20,530","title":"Create Value","transitions":[{"id":915,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":891}}]},{"action":"gcx:wf:core::If","id":888,"inputs":{"condition":{"accessors":["$finalErrorMessages","$finalErrorMessages","$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":39,"kind":"idref"},{"count":19,"index":83,"kind":"idref"}],"code":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0","source":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0"}},"position":"-70,130","title":"If","transitions":[{"branch":"true","id":923,"inputs":{},"position":"-70,160 -200,160 -200,220","sourceConnector":"left","target":{"id":871},"targetConnector":"top"},{"branch":"false","id":925,"inputs":{},"position":"50,160 100,160 100,260","sourceConnector":"right","target":{"id":895}}]},{"action":"gcx:wf:server::SendEmail","id":891,"inputs":{"body":{"accessors":["$errorEmailBody3"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$errorEmailBody3.result","source":"$errorEmailBody3.result"},"from":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.fromEmail","source":"$AdminEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$errorEmailSubject3"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$errorEmailSubject3.result","source":"$errorEmailSubject3.result"},"to":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.adminEmail","source":"$AdminEmailConfig.result.adminEmail"}},"position":"-20,650","title":"Send Email"},{"action":"gcx:wf:core::FormatDate","id":895,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate5","position":"-20,260","title":"Format Date","transitions":[{"id":919,"inputs":{},"position":"100,330 100,390","sourceConnector":"bottom","target":{"id":881},"targetConnector":"top"}]}]},{"id":870,"steps":[{"id":874,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":882,"inputs":{},"position":"90,60 90,140 80,140 80,160","target":{"id":876}}]},{"action":"gcx:wf:core::FormatDate","id":876,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate2","position":"-40,160","title":"Format Date","transitions":[{"id":884,"inputs":{},"position":"80,230 80,290","sourceConnector":"bottom","target":{"id":878},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":878,"inputs":{"expression":{"accessors":["$FinalReportEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate2","$estimatedProcessingTime"],"annotations":[{"count":23,"index":0,"kind":"idref"},{"count":13,"index":70,"kind":"idref"},{"count":13,"index":127,"kind":"idref"},{"count":13,"index":186,"kind":"idref"},{"count":13,"index":245,"kind":"idref"},{"count":13,"index":301,"kind":"idref"},{"count":13,"index":357,"kind":"idref"},{"count":24,"index":419,"kind":"idref"}],"code":"$FinalReportEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate2.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$FinalReportEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate2.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"successfulEmailSubject","position":"-40,290","title":"Create Value","transitions":[{"id":886,"inputs":{},"position":"80,360 80,430","sourceConnector":"bottom","target":{"id":880}}]},{"action":"gcx:wf:core::CreateValue","id":880,"inputs":{"expression":{"accessors":["$FinalReportEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate2","$estimatedProcessingTime"],"annotations":[{"count":23,"index":0,"kind":"idref"},{"count":13,"index":70,"kind":"idref"},{"count":13,"index":127,"kind":"idref"},{"count":13,"index":186,"kind":"idref"},{"count":13,"index":245,"kind":"idref"},{"count":13,"index":301,"kind":"idref"},{"count":13,"index":357,"kind":"idref"},{"count":24,"index":419,"kind":"idref"}],"code":"$FinalReportEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate2.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$FinalReportEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate2.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"successfulEmailBody","position":"-40,430","title":"Create Value","transitions":[{"id":899,"inputs":{},"position":"80,500 80,560","sourceConnector":"bottom","target":{"id":898},"targetConnector":"top"}]},{"action":"gcx:wf:server::SendEmail","description":"Send email to user","id":896,"inputs":{"attachments":{"accessors":["$createReportAttachment"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$createReportAttachment.result","source":"$createReportAttachment.result"},"body":{"accessors":["$successfulEmailBody"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$successfulEmailBody.result","source":"$successfulEmailBody.result"},"from":{"accessors":["$FinalReportEmailConfig"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$FinalReportEmailConfig.result.fromEmail","source":"$FinalReportEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$successfulEmailSubject"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$successfulEmailSubject.result","source":"$successfulEmailSubject.result"},"to":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.email","source":"$reportConfig.result.email"}},"position":"-50,870","title":"Send Email"},{"action":"gcx:wf:core::If","id":898,"inputs":{"condition":{"accessors":["$finalErrorMessages","$finalErrorMessages","$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":39,"kind":"idref"},{"count":19,"index":83,"kind":"idref"}],"code":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0","source":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0"}},"position":"20,560","title":"If","transitions":[{"branch":"false","id":900,"inputs":{},"position":"140,590 160,590 160,850 70,850 70,870","sourceConnector":"right","target":{"id":896},"targetConnector":"top"},{"branch":"true","id":902,"inputs":{},"position":"20,590 -110,590 -110,650","sourceConnector":"left","target":{"id":901},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":901,"inputs":{"object":{"accessors":["$successfulEmailBody"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$successfulEmailBody","source":"$successfulEmailBody"},"propertyName":"result","propertyValue":{"accessors":["$successfulEmailBody","$FinalReportEmailConfig","$finalErrorMessages"],"annotations":[{"count":20,"index":0,"kind":"idref"},{"count":23,"index":30,"kind":"idref"},{"count":19,"index":92,"kind":"idref"}],"code":"$successfulEmailBody.result + $FinalReportEmailConfig.result.partialSubReportErrorMessage + $finalErrorMessages.result","source":"$successfulEmailBody.result + $FinalReportEmailConfig.result.partialSubReportErrorMessage + $finalErrorMessages.result"}},"position":"-230,650","title":"Set Property","transitions":[{"id":983,"inputs":{},"position":"-110,680 -110,710 -280,710 -280,730","sourceConnector":"bottom","target":{"id":980},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"report error to admin if any","id":980,"inputs":{},"position":"-400,730","title":"Container","transitions":[{"id":984,"inputs":{},"position":"-280,850 -280,905 -50,905","sourceConnector":"bottom","target":{"id":896}}]}]},{"id":906,"steps":[{"id":908,"inputs":{},"position":"0,-80","purpose":"start","title":"Container","transitions":[{"id":922,"inputs":{},"position":"0,-50 -40,-50 -40,45 -20,45","target":{"id":912}}]},{"action":"gcx:wf:core::CreateValue","id":910,"inputs":{"expression":{"accessors":["$ErrorEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate3","$errorMessage1","$estimatedProcessingTime"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":24,"index":462,"kind":"idref"}],"code":"$ErrorEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate3.formatted).replace(\"{errorMessage}\", $errorMessage1.result).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$ErrorEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate3.formatted).replace(\"{errorMessage}\", $errorMessage1.result).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"errorEmailSubject1","position":"-20,390","title":"Create Value","transitions":[{"id":920,"inputs":{},"position":"100,460 100,530","sourceConnector":"bottom","target":{"id":914}}]},{"action":"gcx:wf:core::CreateValue","id":912,"inputs":{"expression":"Can not generate report"},"name":"errorMessage1","position":"-20,10","title":"Create Value","transitions":[{"id":942,"inputs":{},"position":"100,80 100,110 -10,110 -10,130","sourceConnector":"bottom","target":{"id":937},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":914,"inputs":{"expression":{"accessors":["$ErrorEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate3","$errorMessage1","$estimatedProcessingTime"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":24,"index":462,"kind":"idref"}],"code":"$ErrorEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate3.formatted).replace(\"{errorMessage}\", $errorMessage1.result).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$ErrorEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate3.formatted).replace(\"{errorMessage}\", $errorMessage1.result).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"errorEmailBody1","position":"-20,530","title":"Create Value","transitions":[{"id":926,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":916}}]},{"action":"gcx:wf:server::SendEmail","id":916,"inputs":{"body":{"accessors":["$errorEmailBody1"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$errorEmailBody1.result","source":"$errorEmailBody1.result"},"from":{"accessors":["$ErrorEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$ErrorEmailConfig.result.fromEmail","source":"$ErrorEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$errorEmailSubject1"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$errorEmailSubject1.result","source":"$errorEmailSubject1.result"},"to":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.email","source":"$reportConfig.result.email"}},"position":"-20,650","title":"Send Email"},{"action":"gcx:wf:core::FormatDate","id":918,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate3","position":"-20,260","title":"Format Date","transitions":[{"id":928,"inputs":{},"position":"100,330 100,390","sourceConnector":"bottom","target":{"id":910},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":937,"inputs":{"condition":{"accessors":["$finalErrorMessages","$finalErrorMessages","$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":39,"kind":"idref"},{"count":19,"index":83,"kind":"idref"}],"code":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0","source":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0"}},"position":"-70,130","title":"If","transitions":[{"branch":"true","id":941,"inputs":{},"position":"-70,160 -200,160 -200,220","sourceConnector":"left","target":{"id":939},"targetConnector":"top"},{"branch":"false","id":944,"inputs":{},"position":"50,160 100,160 100,260","sourceConnector":"right","target":{"id":918}}]},{"action":"gcx:wf:core::SetProperty","id":939,"inputs":{"object":{"accessors":["$errorMessage1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$errorMessage1","source":"$errorMessage1"},"propertyName":"result","propertyValue":{"accessors":["$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$finalErrorMessages.result","source":"$finalErrorMessages.result"}},"position":"-320,220","title":"Set Property","transitions":[{"id":943,"inputs":{},"position":"-200,250 -200,295 -20,295","sourceConnector":"bottom","target":{"id":918}}]}]},{"id":921,"steps":[{"id":927,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":949,"inputs":{},"position":"90,60 90,130 80,130 80,150","sourceConnector":"bottom","target":{"id":935}}]},{"action":"gcx:wf:core::Container","description":"Get GP job json infor","id":935,"inputs":{},"position":"-40,150","title":"Container","transitions":[{"id":997,"inputs":{},"position":"80,270 80,350","sourceConnector":"bottom","target":{"id":945}}]},{"action":"gcx:wf:core::Container","description":"Download json data for report","id":945,"inputs":{},"position":"-40,350","title":"Container"}]},{"id":946,"steps":[{"action":"gcx:wf:core::SetProperty","id":948,"inputs":{"object":{"accessors":["$errorMessage4"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$errorMessage4","source":"$errorMessage4"},"propertyName":"result","propertyValue":{"accessors":["$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$finalErrorMessages.result","source":"$finalErrorMessages.result"}},"position":"-320,220","title":"Set Property","transitions":[{"id":978,"inputs":{},"position":"-200,250 -200,295 -20,295","sourceConnector":"bottom","target":{"id":962}}]},{"id":950,"inputs":{},"position":"0,-80","purpose":"start","title":"Container","transitions":[{"id":964,"inputs":{},"position":"0,-50 -40,-50 -40,45 -20,45","target":{"id":952}}]},{"action":"gcx:wf:core::CreateValue","id":952,"inputs":{"expression":"Can not generate report"},"name":"errorMessage4","position":"-20,10","title":"Create Value","transitions":[{"id":968,"inputs":{},"position":"100,80 100,110 -10,110 -10,130","sourceConnector":"bottom","target":{"id":958},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":954,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate6","$errorMessage4","$reportConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"}],"code":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate6.formatted).replace(\"{errorMessage}\", $errorMessage4.result).replace(\"{userEmail}\", $reportConfig.result.email)","source":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate6.formatted).replace(\"{errorMessage}\", $errorMessage4.result).replace(\"{userEmail}\", $reportConfig.result.email)"}},"name":"errorEmailSubject4","position":"-20,390","title":"Create Value","transitions":[{"id":966,"inputs":{},"position":"100,460 100,530","sourceConnector":"bottom","target":{"id":956}}]},{"action":"gcx:wf:core::CreateValue","id":956,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate6","$errorMessage4","$reportConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"}],"code":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate6.formatted).replace(\"{errorMessage}\", $errorMessage4.result).replace(\"{userEmail}\", $reportConfig.result.email)","source":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate6.formatted).replace(\"{errorMessage}\", $errorMessage4.result).replace(\"{userEmail}\", $reportConfig.result.email)"}},"name":"errorEmailBody4","position":"-20,530","title":"Create Value","transitions":[{"id":970,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":960}}]},{"action":"gcx:wf:core::If","id":958,"inputs":{"condition":{"accessors":["$finalErrorMessages","$finalErrorMessages","$finalErrorMessages"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":39,"kind":"idref"},{"count":19,"index":83,"kind":"idref"}],"code":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0","source":"$finalErrorMessages.result !== null && $finalErrorMessages.result !== undefined && $finalErrorMessages.result.length > 0"}},"position":"-70,130","title":"If","transitions":[{"branch":"true","id":974,"inputs":{},"position":"-70,160 -200,160 -200,220","sourceConnector":"left","target":{"id":948},"targetConnector":"top"},{"branch":"false","id":976,"inputs":{},"position":"50,160 100,160 100,260","sourceConnector":"right","target":{"id":962}}]},{"action":"gcx:wf:server::SendEmail","id":960,"inputs":{"body":{"accessors":["$errorEmailBody4"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$errorEmailBody4.result","source":"$errorEmailBody4.result"},"from":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.fromEmail","source":"$AdminEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$errorEmailSubject4"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$errorEmailSubject4.result","source":"$errorEmailSubject4.result"},"to":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.adminEmail","source":"$AdminEmailConfig.result.adminEmail"}},"position":"-20,650","title":"Send Email"},{"action":"gcx:wf:core::FormatDate","id":962,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate6","position":"-20,260","title":"Format Date","transitions":[{"id":972,"inputs":{},"position":"100,330 100,390","sourceConnector":"bottom","target":{"id":954},"targetConnector":"top"}]}]},{"id":955,"steps":[{"id":957,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":965,"inputs":{},"position":"90,60 90,110","target":{"id":963}}]},{"action":"gcx:wf:core::CreateValue","id":963,"inputs":{"expression":{"accessors":[],"code":"0","source":"0"}},"name":"estimatedProcessingTime","position":"-30,110","title":"Create Value","transitions":[{"id":1116,"inputs":{},"position":"90,180 90,240","sourceConnector":"bottom","target":{"id":1114}}]},{"action":"gcx:wf:core::CreateValue","id":1114,"inputs":{},"name":"projectCommunityType","position":"-30,240","title":"Create Value","transitions":[{"id":1219,"inputs":{},"position":"90,310 90,360","sourceConnector":"bottom","target":{"id":1218}}]},{"action":"gcx:wf:core::CreateValue","id":1218,"inputs":{"expression":{"accessors":[],"code":" 0","source":" 0"}},"name":"projectLength","position":"-30,360","title":"Create Value","transitions":[{"id":2297,"inputs":{},"position":"90,430 90,490","sourceConnector":"bottom","target":{"id":2296}}]},{"action":"gcx:wf:core::CreateValue","id":2296,"inputs":{},"name":"titleReportImageUrl","position":"-30,490","title":"Create Value"}]},{"id":1001,"steps":[{"id":1006,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1035,"inputs":{},"position":"90,60 90,290 290,290 290,310","sourceConnector":"bottom","target":{"id":1008},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1008,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish1","$currentReportToCheckFinish1","$currentReportToCheckFinish1","$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"},{"count":28,"index":68,"kind":"idref"},{"count":28,"index":142,"kind":"idref"},{"count":28,"index":221,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.gpJob.outputJsonInfo != null && $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value != null && $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url !== null && $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url !== undefined","source":"$currentReportToCheckFinish1.result.gpJob.outputJsonInfo != null && $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value != null && $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url !== null && $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url !== undefined"}},"position":"230,310","title":"If","transitions":[{"branch":"true","id":1039,"inputs":{},"position":"230,340 160,340 160,530","sourceConnector":"left","target":{"id":1010},"targetConnector":"top"},{"branch":"false","id":1043,"inputs":{},"position":"350,340 540,340 540,430","sourceConnector":"right","target":{"id":1016},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":1010,"inputs":{"method":"POST","query":{"accessors":[],"annotations":[],"code":"{\n    \"f\": \"json\"\n}","source":"{\n  \"f\":\"json\"\n}"},"url":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url","source":"$currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url"}},"name":"webRequestGetReportData1","position":"40,530","title":"Send Web Request","transitions":[{"id":1047,"inputs":{},"position":"160,600 160,660 150,660 150,680","sourceConnector":"bottom","target":{"id":1019},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1016,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result","source":"$currentReportToCheckFinish1.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Gp json output does not have a valid url to download json data \"\n}","source":"{\n  \"error\": \"Gp json output does not have a valid url to download json data \"\n}"}},"position":"420,430","title":"Set Property"},{"action":"gcx:wf:core::If","id":1019,"inputs":{"condition":{"accessors":["$webRequestGetReportData1","$webRequestGetReportData1"],"annotations":[{"count":25,"index":0,"kind":"idref"},{"count":25,"index":43,"kind":"idref"}],"code":"$webRequestGetReportData1.text !== null && $webRequestGetReportData1.text !== undefined","source":"$webRequestGetReportData1.text !== null && $webRequestGetReportData1.text !== undefined"}},"position":"90,680","title":"If","transitions":[{"branch":"false","id":1049,"inputs":{},"position":"210,710 310,710 310,835 330,835","sourceConnector":"right","target":{"id":1023},"targetConnector":"left"},{"branch":"true","id":1053,"inputs":{},"position":"90,710 70,710 70,870 150,870 150,890","sourceConnector":"left","target":{"id":1027}}]},{"action":"gcx:wf:core::SetProperty","id":1023,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result","source":"$currentReportToCheckFinish1.result"},"propertyName":"error","propertyValue":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":50,"kind":"idref"}],"code":"{\n    \"error\": \"Can not download json data from \" + $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url\n}","source":"{\n  \"error\": \"Can not download json data from \" + $currentReportToCheckFinish1.result.gpJob.outputJsonInfo.value.url\n}"}},"position":"330,820","title":"Set Property"},{"action":"gcx:wf:core::ParseJson","id":1027,"inputs":{"json":{"accessors":["$webRequestGetReportData1"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$webRequestGetReportData1.text","source":"$webRequestGetReportData1.text"}},"name":"parseJobJson5","position":"30,890","title":"Parse JSON","transitions":[{"id":1057,"inputs":{},"position":"150,960 150,1070","sourceConnector":"bottom","target":{"id":1031},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1031,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result","source":"$currentReportToCheckFinish1.result"},"propertyName":"data","propertyValue":{"accessors":["$parseJobJson5"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson5.result","source":"$parseJobJson5.result"}},"position":"30,1070","title":"Set Property"}]},{"id":1012,"steps":[{"id":1013,"inputs":{},"position":"30,-50","purpose":"start","title":"Container","transitions":[{"id":1119,"inputs":{},"position":"120,10 120,40 140,40 140,60","sourceConnector":"bottom","target":{"id":1118}}]},{"action":"gcx:wf:geocortex::RunReport","id":1018,"inputs":{"dataSources":{"accessors":["$currentReportToGenerate","$currentReportToGenerate"],"annotations":[{"count":24,"index":13,"kind":"idref"},{"count":24,"index":74,"kind":"idref"}],"code":"{\n    \"name\": $currentReportToGenerate.result.dataSourceName,\n    \"value\": $currentReportToGenerate.result.data\n}","source":"{\n    \"name\":$currentReportToGenerate.result.dataSourceName,\n    \"value\": $currentReportToGenerate.result.data\n}"},"parameters":{"accessors":["$reportConfig","$projectCommunityType","$projectLength"],"annotations":[{"count":13,"index":17,"kind":"idref"},{"count":21,"index":75,"kind":"idref"},{"count":14,"index":122,"kind":"idref"}],"code":"{\n    \"projectName\": $reportConfig.result.projectName,\n    \"projectCommunityType\": $projectCommunityType.result,\n    \"projectLength\": $projectLength.result,\n}","source":"{\n\n\"projectName\":$reportConfig.result.projectName,\n\"projectCommunityType\": $projectCommunityType.result,\n\"projectLength\": $projectLength.result,\n\n}"},"url":{"accessors":["$subReportUrl"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$subReportUrl.result","source":"$subReportUrl.result"}},"name":"runSubReport","position":"20,170","title":"Run Report","transitions":[{"id":1034,"inputs":{},"position":"140,240 140,290 130,290 130,310","sourceConnector":"bottom","target":{"id":1022},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":1020,"inputs":{"expect":"blob","url":{"accessors":["$runSubReport"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$runSubReport.href","source":"$runSubReport.href"}},"name":"webRequestGetPdfSubReport","position":"-40,450","title":"Send Web Request","transitions":[{"id":1036,"inputs":{},"position":"-40,485 -60,485 -60,540 70,540 70,560","sourceConnector":"left","target":{"id":1026},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1022,"inputs":{"condition":{"accessors":["$runSubReport","$runSubReport"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":31,"kind":"idref"}],"code":"$runSubReport.href !== null && $runSubReport.href !== undefined","source":"$runSubReport.href !== null && $runSubReport.href !== undefined"}},"position":"70,310","title":"If","transitions":[{"branch":"false","id":1040,"inputs":{},"position":"190,340 280,340 280,345 300,345","sourceConnector":"right","target":{"id":1028}},{"branch":"true","id":1044,"inputs":{},"position":"70,340 -170,340 -170,390","sourceConnector":"left","target":{"id":1032},"targetConnector":"top"}]},{"action":"gcx:wf:core::AddItem","id":1024,"inputs":{"collection":{"accessors":["$subReports"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$subReports.result","source":"$subReports.result"},"item":{"accessors":["$webRequestGetPdfSubReport"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$webRequestGetPdfSubReport.blob","source":"$webRequestGetPdfSubReport.blob"}},"position":"-40,710","title":"Add Item"},{"action":"gcx:wf:core::If","id":1026,"inputs":{"condition":{"accessors":["$webRequestGetPdfSubReport"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$webRequestGetPdfSubReport.blob != null","source":"$webRequestGetPdfSubReport.blob != null"}},"position":"10,560","title":"If","transitions":[{"branch":"true","id":1038,"inputs":{},"position":"10,590 -10,590 -10,690 80,690 80,710","sourceConnector":"left","target":{"id":1024},"targetConnector":"top"},{"branch":"false","id":1042,"inputs":{},"position":"130,590 210,585","sourceConnector":"right","target":{"id":1030}}]},{"action":"gcx:wf:core::SetProperty","id":1028,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"error","propertyValue":{"accessors":["$subReportUrl"],"annotations":[{"count":13,"index":45,"kind":"idref"}],"code":"{\n    \"error\": \"Can not run subreport from \" + $subReportUrl.result\n}","source":"{\n  \"error\": \"Can not run subreport from \" + $subReportUrl.result\n}"}},"position":"300,330","title":"Set Property"},{"action":"gcx:wf:core::SetProperty","id":1030,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"error","propertyValue":{"accessors":["$runSubReport"],"annotations":[{"count":13,"index":50,"kind":"idref"}],"code":"{\n    \"error\": \"Can not download subreport from \" + $runSubReport.href\n}","source":"{\n  \"error\": \"Can not download subreport from \" + $runSubReport.href\n}"}},"position":"210,570","title":"Set Property"},{"action":"gcx:wf:core::SetProperty","id":1032,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"reportDownloadUrl","propertyValue":{"accessors":["$runSubReport"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$runSubReport.href","source":"$runSubReport.href "}},"position":"-290,390","title":"Set Property","transitions":[{"id":1046,"inputs":{},"position":"-170,420 -170,440 -310,440 -310,370 50,370 50,430 80,430 80,450","sourceConnector":"bottom","target":{"id":1020},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1118,"inputs":{"expression":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result.reportUrl","source":"$currentReportToGenerate.result.reportUrl"}},"name":"subReportUrl","position":"20,60","title":"Create Value","transitions":[{"id":1120,"inputs":{},"position":"140,130 140,170","sourceConnector":"bottom","target":{"id":1018}}]}]},{"id":1054,"steps":[{"action":"gcx:wf:core::Log","id":865,"inputs":{"message":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":26,"kind":"idref"}],"code":"\"Generate sub report: \" + $currentReportToGenerate.result.name + \" with no gp task provided\"","source":"\"Generate sub report: \" + $currentReportToGenerate.result.name + \" with no gp task provided\""}},"position":"0,50","title":"Log","transitions":[{"id":869,"inputs":{},"position":"120,80 120,150 140,150 140,170","sourceConnector":"bottom","target":{"id":1060},"targetConnector":"top"}]},{"id":1056,"inputs":{},"position":"0,-300","purpose":"start","title":"Container","transitions":[{"id":1124,"inputs":{},"position":"90,-240 90,-140 100,-140 100,-120","sourceConnector":"bottom","target":{"id":1123},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1058,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"reportDownloadUrl","propertyValue":{"accessors":["$runSubReport1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$runSubReport1.href","source":"$runSubReport1.href "}},"position":"-290,390","title":"Set Property","transitions":[{"id":1086,"inputs":{},"position":"-170,420 -170,440 -310,440 -310,370 50,370 50,430 80,430 80,450","sourceConnector":"bottom","target":{"id":1062},"targetConnector":"top"}]},{"action":"gcx:wf:geocortex::RunReport","id":1060,"inputs":{"parameters":{"accessors":["$reportConfig","$projectCommunityType","$projectLength"],"annotations":[{"count":13,"index":18,"kind":"idref"},{"count":21,"index":76,"kind":"idref"},{"count":14,"index":123,"kind":"idref"}],"code":"{\n    \"projectName\": $reportConfig.result.projectName,\n    \"projectCommunityType\": $projectCommunityType.result,\n    \"projectLength\": $projectLength.result,\n}","source":"{\n\n\"projectName\": $reportConfig.result.projectName,\n\"projectCommunityType\": $projectCommunityType.result,\n\"projectLength\": $projectLength.result,\n\n}"},"url":{"accessors":["$subReportUrl1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$subReportUrl1.result","source":"$subReportUrl1.result"}},"name":"runSubReport1","position":"20,170","title":"Run Report","transitions":[{"id":1074,"inputs":{},"position":"140,240 140,290 130,290 130,310","sourceConnector":"bottom","target":{"id":1064},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":1062,"inputs":{"expect":"blob","url":{"accessors":["$runSubReport1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$runSubReport1.href","source":"$runSubReport1.href"}},"name":"webRequestGetPdfSubReport1","position":"-40,450","title":"Send Web Request","transitions":[{"id":1076,"inputs":{},"position":"-40,485 -60,485 -60,540 70,540 70,560","sourceConnector":"left","target":{"id":1068},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1064,"inputs":{"condition":{"accessors":["$runSubReport1","$runSubReport1"],"annotations":[{"count":14,"index":0,"kind":"idref"},{"count":14,"index":32,"kind":"idref"}],"code":"$runSubReport1.href !== null && $runSubReport1.href !== undefined","source":"$runSubReport1.href !== null && $runSubReport1.href !== undefined"}},"position":"70,310","title":"If","transitions":[{"branch":"false","id":1080,"inputs":{},"position":"190,340 280,340 280,345 300,345","sourceConnector":"right","target":{"id":1070}},{"branch":"true","id":1084,"inputs":{},"position":"70,340 -170,340 -170,390","sourceConnector":"left","target":{"id":1058},"targetConnector":"top"}]},{"action":"gcx:wf:core::AddItem","id":1066,"inputs":{"collection":{"accessors":["$subReports"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$subReports.result","source":"$subReports.result"},"item":{"accessors":["$webRequestGetPdfSubReport1"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$webRequestGetPdfSubReport1.blob","source":"$webRequestGetPdfSubReport1.blob"}},"position":"-40,710","title":"Add Item"},{"action":"gcx:wf:core::If","id":1068,"inputs":{"condition":{"accessors":["$webRequestGetPdfSubReport1"],"annotations":[{"count":27,"index":0,"kind":"idref"}],"code":"$webRequestGetPdfSubReport1.blob != null","source":"$webRequestGetPdfSubReport1.blob != null"}},"position":"10,560","title":"If","transitions":[{"branch":"true","id":1078,"inputs":{},"position":"10,590 -10,590 -10,690 80,690 80,710","sourceConnector":"left","target":{"id":1066},"targetConnector":"top"},{"branch":"false","id":1082,"inputs":{},"position":"130,590 210,585","sourceConnector":"right","target":{"id":1072}}]},{"action":"gcx:wf:core::SetProperty","id":1070,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"error","propertyValue":{"accessors":["$subReportUrl"],"annotations":[{"count":13,"index":45,"kind":"idref"}],"code":"{\n    \"error\": \"Can not run subreport from \" + $subReportUrl.result\n}","source":"{\n  \"error\": \"Can not run subreport from \" + $subReportUrl.result\n}"}},"position":"300,330","title":"Set Property"},{"action":"gcx:wf:core::SetProperty","id":1072,"inputs":{"object":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result","source":"$currentReportToGenerate.result"},"propertyName":"error","propertyValue":{"accessors":["$runSubReport1"],"annotations":[{"count":14,"index":50,"kind":"idref"}],"code":"{\n    \"error\": \"Can not download subreport from \" + $runSubReport1.href\n}","source":"{\n  \"error\": \"Can not download subreport from \" + $runSubReport1.href\n}"}},"position":"210,570","title":"Set Property"},{"action":"gcx:wf:core::CreateValue","id":1123,"inputs":{"expression":{"accessors":["$currentReportToGenerate"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$currentReportToGenerate.result.reportUrl","source":"$currentReportToGenerate.result.reportUrl"}},"name":"subReportUrl1","position":"-20,-120","title":"Create Value","transitions":[{"id":1125,"inputs":{},"position":"100,-50 100,30 120,30 120,50","sourceConnector":"bottom","target":{"id":865},"targetConnector":"top"}]}]},{"id":1061,"steps":[{"id":1065,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1094,"inputs":{},"position":"90,60 90,240 210,240 210,260","sourceConnector":"bottom","target":{"id":1069},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1069,"inputs":{"expression":{"accessors":["$currentReportToCheckFinish1","$currentReportToCheckFinish1","$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"},{"count":28,"index":57,"kind":"idref"},{"count":28,"index":113,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.dataUrl + \"/jobs/\" + $currentReportToCheckFinish1.result.gpJob.jobId + \"/\" + $currentReportToCheckFinish1.result.gpJob.results.Output_JSON.paramUrl","source":"$currentReportToCheckFinish1.result.dataUrl + \"/jobs/\" + $currentReportToCheckFinish1.result.gpJob.jobId + \"/\" + $currentReportToCheckFinish1.result.gpJob.results.Output_JSON.paramUrl"}},"name":"reportJsonUrl1","position":"90,260","title":"Create Value","transitions":[{"id":1099,"inputs":{},"position":"210,330 210,440 180,440 180,460","sourceConnector":"bottom","target":{"id":1073},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":1073,"inputs":{"method":"POST","query":{"accessors":[],"annotations":[],"code":"{\n    \"f\": \"json\"\n}","source":"{\n  \"f\":\"json\"\n}"},"url":{"accessors":["$reportJsonUrl1"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$reportJsonUrl1.result","source":"$reportJsonUrl1.result"}},"name":"webRequestGetReportJson1","position":"60,460","title":"Send Web Request","transitions":[{"id":1101,"inputs":{},"position":"180,530 180,590 170,590 170,610","sourceConnector":"bottom","target":{"id":1079},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1079,"inputs":{"condition":{"accessors":["$webRequestGetReportJson1","$webRequestGetReportJson1"],"annotations":[{"count":25,"index":0,"kind":"idref"},{"count":25,"index":43,"kind":"idref"}],"code":"$webRequestGetReportJson1.text !== null && $webRequestGetReportJson1.text !== undefined","source":"$webRequestGetReportJson1.text !== null && $webRequestGetReportJson1.text !== undefined"}},"position":"110,610","title":"If","transitions":[{"branch":"false","id":1107,"inputs":{},"position":"230,640 330,640 330,765 350,765","sourceConnector":"right","target":{"id":1083},"targetConnector":"left"},{"branch":"true","id":1111,"inputs":{},"position":"110,640 90,640 90,800 170,800 170,820","sourceConnector":"left","target":{"id":1087}}]},{"action":"gcx:wf:core::SetProperty","id":1083,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result","source":"$currentReportToCheckFinish1.result"},"propertyName":"error","propertyValue":{"accessors":["$reportJsonUrl1"],"annotations":[{"count":15,"index":54,"kind":"idref"}],"code":"{\n    \"error\": \"Can not get report json result from \" + $reportJsonUrl1.result\n}","source":"{\n  \"error\": \"Can not get report json result from \" + $reportJsonUrl1.result\n}"}},"position":"350,750","title":"Set Property"},{"action":"gcx:wf:core::ParseJson","id":1087,"inputs":{"json":{"accessors":["$webRequestGetReportJson1"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$webRequestGetReportJson1.text","source":"$webRequestGetReportJson1.text"}},"name":"parseJobJson6","position":"50,820","title":"Parse JSON","transitions":[{"id":1122,"inputs":{},"position":"170,890 170,1000","sourceConnector":"bottom","target":{"id":1089},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1089,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.gpJob","source":"$currentReportToCheckFinish1.result.gpJob"},"propertyName":"outputJsonInfo","propertyValue":{"accessors":["$parseJobJson6"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson6.result","source":"$parseJobJson6.result"}},"position":"50,1000","title":"Set Property"}]},{"id":1108,"steps":[{"id":1110,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":1121,"inputs":{},"position":"90,60 90,130 80,130 80,150","target":{"id":1112}}]},{"action":"gcx:wf:core::SetProperty","id":1112,"inputs":{"object":{"accessors":["$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport1.result","source":"$currentCheckingGPReport1.result"},"propertyName":"error","propertyValue":{"accessors":["$tryCatchCheckGPTask1"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$tryCatchCheckGPTask1.error","source":"$tryCatchCheckGPTask1.error"}},"position":"-40,150","title":"Set Property"}]},{"id":1126,"steps":[{"id":1128,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1138,"inputs":{},"position":"90,60 90,120 80,120 80,140","target":{"id":1130}}]},{"action":"gcx:wf:core::If","id":1130,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig","$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":44,"kind":"idref"},{"count":13,"index":99,"kind":"idref"},{"count":13,"index":159,"kind":"idref"}],"code":"$reportConfig.result.titleReport != null && $reportConfig.result.titleReport.reportUrl !== null && $reportConfig.result.titleReport.reportUrl !== undefined && $reportConfig.result.titleReport.reportUrl.length > 0","source":"$reportConfig.result.titleReport != null && $reportConfig.result.titleReport.reportUrl !== null && $reportConfig.result.titleReport.reportUrl !== undefined && $reportConfig.result.titleReport.reportUrl.length > 0"}},"position":"20,140","title":"If","transitions":[{"branch":"false","id":1140,"inputs":{},"position":"140,170 300,170 300,270","sourceConnector":"right","target":{"id":1132},"targetConnector":"top"},{"branch":"true","id":1142,"inputs":{},"position":"20,170 -330,170 -330,280","sourceConnector":"left","target":{"id":1134},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":1132,"inputs":{"message":{"accessors":[],"code":" \"The report submitted does not contain a title report configuration, or its report url is invalid\"","source":" \"The report submitted does not contain a title report configuration, or its report url is invalid\""}},"position":"180,270","title":"Log","transitions":[{"id":1425,"inputs":{},"position":"300,300 300,380","sourceConnector":"bottom","target":{"id":1424},"targetConnector":"top"}]},{"action":"gcx:wf:core::TryCatch","id":1134,"inputs":{},"name":"tryCatchGenerateTitleReport","position":"-450,280","title":"Try Catch"},{"action":"gcx:wf:core::SetProperty","id":1136,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport","source":"$reportConfig.result.titleReport"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"The report submitted does not contain a title report configuration, or its report url is invalid\"\n}","source":"{\n  \"error\": \"The report submitted does not contain a title report configuration, or its report url is invalid\"\n}"}},"position":"190,480","title":"Set Property"},{"action":"gcx:wf:core::If","id":1424,"inputs":{"condition":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport != null","source":"$reportConfig.result.titleReport != null"}},"position":"240,380","title":"If","transitions":[{"branch":"true","id":1426,"inputs":{},"position":"240,410 170,410 170,495 190,495","sourceConnector":"left","target":{"id":1136}}]}]},{"id":1127,"steps":[{"id":1131,"inputs":{},"position":"0,-290","purpose":"start","title":"Try","transitions":[{"id":1168,"inputs":{},"position":"90,-230 90,-160","sourceConnector":"bottom","target":{"id":1135}}]},{"action":"gcx:wf:core::If","id":1135,"inputs":{"condition":{"accessors":["$currentCheckingGPReport1","$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"},{"count":25,"index":53,"kind":"idref"}],"code":"$currentCheckingGPReport1.result.dataUrl !== null && $currentCheckingGPReport1.result.dataUrl !== undefined","source":"$currentCheckingGPReport1.result.dataUrl !== null && $currentCheckingGPReport1.result.dataUrl !== undefined"}},"position":"30,-160","title":"If","transitions":[{"branch":"true","id":1170,"inputs":{},"position":"30,-130 10,-130 10,-40 90,-40 90,-20","sourceConnector":"left","target":{"id":1139},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1139,"inputs":{"condition":{"accessors":["$currentCheckingGPReport1","$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"},{"count":25,"index":51,"kind":"idref"}],"code":"$currentCheckingGPReport1.result.error === null || $currentCheckingGPReport1.result.error === undefined","source":"$currentCheckingGPReport1.result.error === null || $currentCheckingGPReport1.result.error === undefined"}},"position":"30,-20","title":"If","transitions":[{"branch":"true","id":1172,"inputs":{},"position":"30,10 10,10 10,100 90,100 90,120","sourceConnector":"left","target":{"id":1143}},{"branch":"false","id":1174,"inputs":{},"position":"150,10 250,10 250,15 270,15","sourceConnector":"right","target":{"id":1147}}]},{"action":"gcx:wf:core::CreateValue","id":1143,"inputs":{"expression":{"accessors":["$currentCheckingGPReport1","$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"},{"count":25,"index":54,"kind":"idref"}],"code":"$currentCheckingGPReport1.result.dataUrl + \"/jobs/\" + $currentCheckingGPReport1.result.gpJob.jobId","source":"$currentCheckingGPReport1.result.dataUrl + \"/jobs/\" + $currentCheckingGPReport1.result.gpJob.jobId"}},"name":"currentGPCheckingUrl1","position":"-30,120","title":"Create Value","transitions":[{"id":1176,"inputs":{},"position":"90,190 90,250","sourceConnector":"bottom","target":{"id":1151},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1147,"inputs":{"object":{"accessors":["$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport1.result","source":"$currentCheckingGPReport1.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Gp task has no job id.\"\n}","source":"{\n  \"error\": \"Gp task has no job id.\"\n}"}},"position":"270,0","title":"Set Property"},{"action":"gcx:wf:core:request:WebRequest","id":1151,"inputs":{"method":"POST","query":{"accessors":[],"annotations":[],"code":"{\n    \"f\": \"json\"\n}","source":"{\n  \"f\":\"json\"\n}"},"url":{"accessors":["$currentGPCheckingUrl1"],"annotations":[{"count":22,"index":0,"kind":"idref"}],"code":"$currentGPCheckingUrl1.result","source":"$currentGPCheckingUrl1.result"}},"name":"webRequestCheckGPTask1","position":"-30,250","title":"Send Web Request","transitions":[{"id":1178,"inputs":{},"position":"90,320 90,380 80,380 80,400","sourceConnector":"bottom","target":{"id":1155},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1155,"inputs":{"condition":{"accessors":["$webRequestCheckGPTask1","$webRequestCheckGPTask1"],"annotations":[{"count":23,"index":0,"kind":"idref"},{"count":23,"index":41,"kind":"idref"}],"code":"$webRequestCheckGPTask1.text !== null && $webRequestCheckGPTask1.text !== undefined","source":"$webRequestCheckGPTask1.text !== null && $webRequestCheckGPTask1.text !== undefined"}},"position":"20,400","title":"If","transitions":[{"branch":"true","id":1180,"inputs":{},"position":"20,430 -40,430 -40,675 -20,675","sourceConnector":"left","target":{"id":1159}},{"branch":"false","id":1183,"inputs":{},"position":"140,430 240,430 240,555 260,555","sourceConnector":"right","target":{"id":1163},"targetConnector":"left"}]},{"action":"gcx:wf:core::ParseJson","id":1159,"inputs":{"json":{"accessors":["$webRequestCheckGPTask1"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$webRequestCheckGPTask1.text","source":"$webRequestCheckGPTask1.text"}},"name":"parseJobJson7","position":"-20,640","title":"Parse JSON","transitions":[{"id":1185,"inputs":{},"position":"100,710 100,790","sourceConnector":"bottom","target":{"id":1166},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1163,"inputs":{"object":{"accessors":["$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport1.result","source":"$currentCheckingGPReport1.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Can not check geoprocessing task.\"\n}","source":"{\n  \"error\": \"Can not check geoprocessing task.\"\n}"}},"position":"260,540","title":"Set Property"},{"action":"gcx:wf:core::SetProperty","id":1166,"inputs":{"object":{"accessors":["$currentCheckingGPReport1"],"annotations":[{"count":25,"index":0,"kind":"idref"}],"code":"$currentCheckingGPReport1.result","source":"$currentCheckingGPReport1.result"},"propertyName":"gpJob","propertyValue":{"accessors":["$parseJobJson7"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson7.result","source":"$parseJobJson7.result"}},"position":"-20,790","title":"Set Property"}]},{"id":1146,"steps":[{"id":1148,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":1156,"inputs":{},"position":"90,60 90,130","sourceConnector":"bottom","target":{"id":1150},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1150,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport","source":"$reportConfig.result.titleReport"},"propertyName":"error","propertyValue":{"accessors":["$tryCatchGenerateTitleReport"],"annotations":[{"count":28,"index":49,"kind":"idref"}],"code":"{\n    \"error\": \"Error generating title report: \" + $tryCatchGenerateTitleReport.error.message\n}","source":"{\n  \"error\": \"Error generating title report: \" + $tryCatchGenerateTitleReport.error.message\n}"}},"position":"-30,130","title":"Set Property","transitions":[{"id":1158,"inputs":{},"position":"90,160 90,220","sourceConnector":"bottom","target":{"id":1152}}]},{"action":"gcx:wf:core::ConvertToJson","id":1152,"inputs":{"object":{"accessors":["$tryCatchGenerateTitleReport"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$tryCatchGenerateTitleReport.error","source":"$tryCatchGenerateTitleReport.error"}},"name":"json2","position":"-30,220","title":"Convert To JSON","transitions":[{"id":1160,"inputs":{},"position":"90,290 90,340","sourceConnector":"bottom","target":{"id":1154}}]},{"action":"gcx:wf:core::Log","id":1154,"inputs":{"message":{"accessors":["$json2"],"annotations":[{"count":6,"index":35,"kind":"idref"}],"code":"\"Error generate title report: \" + $json2.json","source":" \"Error generate title report: \" + $json2.json"}},"position":"-30,340","title":"Log"}]},{"id":1162,"steps":[{"id":1164,"inputs":{},"position":"40,-370","purpose":"start","title":"Try","transitions":[{"id":1182,"inputs":{},"position":"130,-310 130,-250 -30,-250 -30,-230","sourceConnector":"bottom","target":{"id":1819}}]},{"action":"gcx:wf:core::Container","description":"Run title report","id":1278,"inputs":{},"position":"-20,230","title":"Container"},{"action":"gcx:wf:core::If","id":1819,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":53,"kind":"idref"}],"code":"$reportConfig.result.titleReport.dataUrl !== null && $reportConfig.result.titleReport.dataUrl !== undefined","source":"$reportConfig.result.titleReport.dataUrl !== null && $reportConfig.result.titleReport.dataUrl !== undefined"}},"position":"-90,-230","title":"If","transitions":[{"branch":"false","id":1416,"inputs":{},"position":"30,-200 100,-200 100,230","sourceConnector":"right","target":{"id":1278},"targetConnector":"top"},{"branch":"true","id":1824,"inputs":{},"position":"-90,-200 -230,-200 -230,0","sourceConnector":"left","target":{"id":1820}}]},{"action":"gcx:wf:core::Container","description":"Collect Title report data with GP task if any","id":1820,"inputs":{},"position":"-350,0","title":"Container","transitions":[{"id":1417,"inputs":{},"position":"-230,140 -230,290 -20,290","sourceConnector":"bottom","target":{"id":1278},"targetConnector":"left"}]}]},{"id":1252,"steps":[{"id":1253,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1257,"inputs":{},"position":"90,60 90,160","target":{"id":1256}}]},{"action":"gcx:wf:core::If","id":1256,"inputs":{"condition":{"accessors":["$currentTitleReport","$currentTitleReport","$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":38,"kind":"idref"},{"count":19,"index":81,"kind":"idref"}],"code":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Project Length Centerline Miles\"] != null","source":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Project Length Centerline Miles\"] != null "}},"position":"30,160","title":"If","transitions":[{"branch":"true","id":1259,"inputs":{},"position":"30,190 0,190 0,320","sourceConnector":"left","target":{"id":1258},"targetConnector":"top"},{"branch":"false","id":1268,"inputs":{},"position":"150,190 170,190 170,390 80,390 80,410","sourceConnector":"right","target":{"id":1262},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1258,"inputs":{"object":{"accessors":["$projectLength"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$projectLength","source":"$projectLength"},"propertyName":"result","propertyValue":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.data[\"Project Length Centerline Miles\"]","source":"$currentTitleReport.result.data[\"Project Length Centerline Miles\"]"}},"position":"-120,320","title":"Set Property","transitions":[{"id":1267,"inputs":{},"position":"0,350 0,390 80,390 80,410","sourceConnector":"bottom","target":{"id":1262},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1262,"inputs":{"condition":{"accessors":["$currentTitleReport","$currentTitleReport","$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":38,"kind":"idref"},{"count":19,"index":81,"kind":"idref"}],"code":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Project Community Type\"] != null","source":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Project Community Type\"] != null "}},"position":"20,410","title":"If","transitions":[{"branch":"true","id":1266,"inputs":{},"position":"20,440 -10,440 -10,570","sourceConnector":"left","target":{"id":1264},"targetConnector":"top"},{"branch":"false","id":1277,"inputs":{},"position":"140,440 160,440 160,630 120,630 120,650","sourceConnector":"right","target":{"id":1271},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1264,"inputs":{"object":{"accessors":["$projectCommunityType"],"annotations":[{"count":21,"index":0,"kind":"idref"}],"code":"$projectCommunityType","source":"$projectCommunityType"},"propertyName":"result","propertyValue":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.data[\"Project Community Type\"]","source":"$currentTitleReport.result.data[\"Project Community Type\"]"}},"position":"-130,570","title":"Set Property","transitions":[{"id":1276,"inputs":{},"position":"-10,600 -10,630 120,630 120,650","sourceConnector":"bottom","target":{"id":1271},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1271,"inputs":{"condition":{"accessors":["$currentTitleReport","$currentTitleReport","$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":38,"kind":"idref"},{"count":19,"index":81,"kind":"idref"}],"code":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Image Url\"] != null","source":"$currentTitleReport.result != null && $currentTitleReport.result.data != null && $currentTitleReport.result.data[\"Image Url\"] != null "}},"position":"60,650","title":"If","transitions":[{"branch":"true","id":1275,"inputs":{},"position":"60,680 30,680 30,810","sourceConnector":"left","target":{"id":1273},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1273,"inputs":{"object":{"accessors":["$titleReportImageUrl"],"annotations":[{"count":20,"index":0,"kind":"idref"}],"code":"$titleReportImageUrl","source":"$titleReportImageUrl"},"propertyName":"result","propertyValue":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.data[\"Image Url\"]","source":"$currentTitleReport.result.data[\"Image Url\"]"}},"position":"-90,810","title":"Set Property"}]},{"id":1279,"steps":[{"id":1280,"inputs":{},"position":"-10,-110","purpose":"start","title":"Container","transitions":[{"id":1467,"inputs":{},"position":"80,-50 80,10","sourceConnector":"bottom","target":{"id":1477},"targetConnector":"top"}]},{"action":"gcx:wf:geocortex::RunReport","description":"","id":1284,"inputs":{"dataSources":{"accessors":["$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$projectLength","$projectCommunityType","$titleReportImageUrl"],"annotations":[{"count":13,"index":13,"kind":"idref"},{"count":13,"index":99,"kind":"idref"},{"count":13,"index":155,"kind":"idref"},{"count":13,"index":212,"kind":"idref"},{"count":13,"index":268,"kind":"idref"},{"count":13,"index":336,"kind":"idref"},{"count":13,"index":390,"kind":"idref"},{"count":14,"index":469,"kind":"idref"},{"count":21,"index":523,"kind":"idref"},{"count":20,"index":570,"kind":"idref"}],"code":"{\n    \"name\": $reportConfig.result.titleReport.dataSourceName,\n    \"value\": {\n        \"project_name\": $reportConfig.result.projectName,\n        \"jurisdiction\": $reportConfig.result.jurisdiction,\n        \"project_type\": $reportConfig.result.projectType,\n        \"project_AADT\": $reportConfig.result.ADT,\n        \"project_pavement_condition_index\": $reportConfig.result.PCI,\n        \"posted_speed_limit\": $reportConfig.result.postedSpeedLimit,\n        \"project_length_centerline_miles\": $projectLength.result,\n        \"project_community_type\": $projectCommunityType.result,\n        \"imageURL\": $titleReportImageUrl.result\n    }\n}","source":"{\n    \"name\":$reportConfig.result.titleReport.dataSourceName,\n    \"value\": {\n      \"project_name\": $reportConfig.result.projectName,\n      \"jurisdiction\": $reportConfig.result.jurisdiction,\n      \"project_type\": $reportConfig.result.projectType,\n      \"project_AADT\": $reportConfig.result.ADT,\n      \"project_pavement_condition_index\": $reportConfig.result.PCI,\n      \"posted_speed_limit\": $reportConfig.result.postedSpeedLimit,\n      \"project_length_centerline_miles\":$projectLength.result,\n      \"project_community_type\":$projectCommunityType.result,\n      \"imageURL\":$titleReportImageUrl.result\n    }\n}"},"url":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport.reportUrl","source":"$reportConfig.result.titleReport.reportUrl"}},"name":"runTitleReport","position":"-30,200","title":"Run Report","transitions":[{"id":1300,"inputs":{},"position":"90,270 90,300 340,300 340,320","sourceConnector":"bottom","target":{"id":1286},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1286,"inputs":{"condition":{"accessors":["$runTitleReport","$runTitleReport"],"annotations":[{"count":15,"index":0,"kind":"idref"},{"count":15,"index":33,"kind":"idref"}],"code":"$runTitleReport.href !== null && $runTitleReport.href !== undefined","source":"$runTitleReport.href !== null && $runTitleReport.href !== undefined"}},"position":"280,320","title":"If","transitions":[{"branch":"false","id":1302,"inputs":{},"position":"400,350 490,350 490,355 510,355","sourceConnector":"right","target":{"id":1288}},{"branch":"true","id":1304,"inputs":{},"position":"280,350 40,350 40,400","sourceConnector":"left","target":{"id":1290},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1288,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport","source":"$reportConfig.result.titleReport"},"propertyName":"error","propertyValue":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":53,"kind":"idref"}],"code":"{\n    \"error\": \"Can not generate title report from \" + $reportConfig.result.titleReport.reportUrl\n}","source":"{\n  \"error\": \"Can not generate title report from \" + $reportConfig.result.titleReport.reportUrl\n}"}},"position":"510,340","title":"Set Property"},{"action":"gcx:wf:core::SetProperty","id":1290,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport","source":"$reportConfig.result.titleReport"},"propertyName":"reportDownloadUrl","propertyValue":{"accessors":["$runTitleReport"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$runTitleReport.href","source":"$runTitleReport.href "}},"position":"-80,400","title":"Set Property","transitions":[{"id":1306,"inputs":{},"position":"40,430 40,540 -80,540 -80,560","sourceConnector":"bottom","target":{"id":1292},"targetConnector":"top"}]},{"action":"gcx:wf:core:request:WebRequest","id":1292,"inputs":{"expect":"blob","url":{"accessors":["$runTitleReport"],"annotations":[{"count":15,"index":0,"kind":"idref"}],"code":"$runTitleReport.href","source":"$runTitleReport.href"}},"name":"webRequestGetPdfTitleReport","position":"-200,560","title":"Send Web Request","transitions":[{"id":1308,"inputs":{},"position":"-200,595 -220,595 -220,700 -10,700 -10,720","sourceConnector":"left","target":{"id":1294},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1294,"inputs":{"condition":{"accessors":["$webRequestGetPdfTitleReport"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$webRequestGetPdfTitleReport.blob != null","source":"$webRequestGetPdfTitleReport.blob != null"}},"position":"-70,720","title":"If","transitions":[{"branch":"false","id":1310,"inputs":{},"position":"50,750 110,750 110,850","sourceConnector":"right","target":{"id":1296}},{"branch":"true","id":1312,"inputs":{},"position":"-70,750 -310,750 -310,840","sourceConnector":"left","target":{"id":1298},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1296,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport","source":"$reportConfig.result.titleReport"},"propertyName":"error","propertyValue":{"accessors":["$runTitleReport"],"annotations":[{"count":15,"index":53,"kind":"idref"}],"code":"{\n    \"error\": \"Can not download title report from \" + $runTitleReport.href\n}","source":"{\n  \"error\": \"Can not download title report from \" + $runTitleReport.href\n}"}},"position":"-10,850","title":"Set Property"},{"action":"gcx:wf:core::AddItem","id":1298,"inputs":{"collection":{"accessors":["$subReports"],"annotations":[{"count":11,"index":0,"kind":"idref"}],"code":"$subReports.result","source":"$subReports.result"},"index":{"accessors":[],"code":"0","source":"0"},"item":{"accessors":["$webRequestGetPdfTitleReport"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$webRequestGetPdfTitleReport.blob","source":"$webRequestGetPdfTitleReport.blob"}},"position":"-430,840","title":"Add Item"},{"action":"gcx:wf:core::Log","id":1469,"inputs":{"message":{"accessors":["$json3"],"annotations":[{"count":6,"index":46,"kind":"idref"}],"code":"\"Parameters sent to generate title report\" + $json3.json","source":" \"Parameters sent to generate title report\" + $json3.json"}},"position":"-30,130","title":"Log","transitions":[{"id":1481,"inputs":{},"position":"90,160 90,200","sourceConnector":"bottom","target":{"id":1284}}]},{"action":"gcx:wf:core::ConvertToJson","id":1477,"inputs":{"object":{"accessors":["$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$projectLength","$projectCommunityType","$titleReportImageUrl"],"annotations":[{"count":13,"index":13,"kind":"idref"},{"count":13,"index":99,"kind":"idref"},{"count":13,"index":155,"kind":"idref"},{"count":13,"index":212,"kind":"idref"},{"count":13,"index":268,"kind":"idref"},{"count":13,"index":336,"kind":"idref"},{"count":13,"index":390,"kind":"idref"},{"count":14,"index":469,"kind":"idref"},{"count":21,"index":523,"kind":"idref"},{"count":20,"index":570,"kind":"idref"}],"code":"{\n    \"name\": $reportConfig.result.titleReport.dataSourceName,\n    \"value\": {\n        \"project_name\": $reportConfig.result.projectName,\n        \"jurisdiction\": $reportConfig.result.jurisdiction,\n        \"project_type\": $reportConfig.result.projectType,\n        \"project_AADT\": $reportConfig.result.ADT,\n        \"project_pavement_condition_index\": $reportConfig.result.PCI,\n        \"posted_speed_limit\": $reportConfig.result.postedSpeedLimit,\n        \"project_length_centerline_miles\": $projectLength.result,\n        \"project_community_type\": $projectCommunityType.result,\n        \"imageURL\": $titleReportImageUrl.result\n    }\n}","source":"{\n    \"name\":$reportConfig.result.titleReport.dataSourceName,\n    \"value\": {\n      \"project_name\": $reportConfig.result.projectName,\n      \"jurisdiction\": $reportConfig.result.jurisdiction,\n      \"project_type\": $reportConfig.result.projectType,\n      \"project_AADT\": $reportConfig.result.ADT,\n      \"project_pavement_condition_index\": $reportConfig.result.PCI,\n      \"posted_speed_limit\": $reportConfig.result.postedSpeedLimit,\n      \"project_length_centerline_miles\":$projectLength.result,\n      \"project_community_type\":$projectCommunityType.result,\n      \"imageURL\":$titleReportImageUrl.result\n    }\n}"}},"name":"json3","position":"-40,10","title":"Convert To JSON","transitions":[{"id":1479,"inputs":{},"position":"80,80 80,110 90,110 90,130","sourceConnector":"bottom","target":{"id":1469}}]}]},{"id":1403,"steps":[{"id":1404,"inputs":{},"position":"0,0","purpose":"start","title":"Try","transitions":[{"id":1461,"inputs":{},"position":"90,60 90,260 60,260 60,280","sourceConnector":"bottom","target":{"id":1440},"targetConnector":"top"}]},{"action":"gcx:wf:core::FormatDate","id":1432,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate7","position":"-70,730","title":"Format Date","transitions":[{"id":1448,"inputs":{},"position":"50,800 50,860","sourceConnector":"bottom","target":{"id":1434},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1434,"inputs":{"expression":{"accessors":["$confirmationEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate7","$estimatedProcessingTime"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":13,"index":71,"kind":"idref"},{"count":13,"index":128,"kind":"idref"},{"count":13,"index":187,"kind":"idref"},{"count":13,"index":246,"kind":"idref"},{"count":13,"index":302,"kind":"idref"},{"count":13,"index":358,"kind":"idref"},{"count":24,"index":420,"kind":"idref"}],"code":"$confirmationEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate7.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$confirmationEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate7.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"confirmationEmailSubject1","position":"-70,860","title":"Create Value","transitions":[{"id":1450,"inputs":{},"position":"50,930 50,1000","sourceConnector":"bottom","target":{"id":1436}}]},{"action":"gcx:wf:core::CreateValue","id":1436,"inputs":{"expression":{"accessors":["$confirmationEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate7","$estimatedProcessingTime"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":13,"index":71,"kind":"idref"},{"count":13,"index":128,"kind":"idref"},{"count":13,"index":187,"kind":"idref"},{"count":13,"index":246,"kind":"idref"},{"count":13,"index":302,"kind":"idref"},{"count":13,"index":358,"kind":"idref"},{"count":24,"index":420,"kind":"idref"}],"code":"$confirmationEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate7.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)","source":"$confirmationEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate7.formatted).replace(\"{estimatedProcessingTime}\", $estimatedProcessingTime.result)"}},"name":"confirmationEmailBody1","position":"-70,1000","title":"Create Value","transitions":[{"id":1452,"inputs":{},"position":"50,1070 50,1120","sourceConnector":"bottom","target":{"id":1438}}]},{"action":"gcx:wf:server::SendEmail","id":1438,"inputs":{"body":{"accessors":["$confirmationEmailBody1"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$confirmationEmailBody1.result","source":"$confirmationEmailBody1.result"},"from":{"accessors":["$confirmationEmailConfig"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$confirmationEmailConfig.result.fromEmail","source":"$confirmationEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$confirmationEmailSubject1"],"annotations":[{"count":26,"index":0,"kind":"idref"}],"code":"$confirmationEmailSubject1.result","source":"$confirmationEmailSubject1.result"},"to":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.email","source":"$reportConfig.result.email"}},"position":"-70,1120","title":"Send Email"},{"action":"gcx:wf:core::If","id":1440,"inputs":{"condition":{"accessors":["$reportConfig","$reportConfig","$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"},{"count":13,"index":44,"kind":"idref"},{"count":13,"index":118,"kind":"idref"}],"code":"$reportConfig.result.titleReport != null && $reportConfig.result.titleReport.maxProcessingTimeInMins !== undefined && $reportConfig.result.titleReport.maxProcessingTimeInMins !== null","source":"$reportConfig.result.titleReport != null && $reportConfig.result.titleReport.maxProcessingTimeInMins !== undefined && $reportConfig.result.titleReport.maxProcessingTimeInMins !== null"}},"position":"0,280","title":"If","transitions":[{"branch":"true","id":1454,"inputs":{},"position":"0,310 -110,310 -110,390","sourceConnector":"left","target":{"id":1442}},{"branch":"false","id":1458,"inputs":{},"position":"120,310 140,310 140,490 40,490 40,510","sourceConnector":"right","target":{"id":1444},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1442,"inputs":{"object":{"accessors":["$estimatedProcessingTime"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$estimatedProcessingTime","source":"$estimatedProcessingTime"},"propertyName":"result","propertyValue":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport.maxProcessingTimeInMins","source":"$reportConfig.result.titleReport.maxProcessingTimeInMins"}},"position":"-230,390","title":"Set Property","transitions":[{"id":1456,"inputs":{},"position":"-110,420 -110,490 40,490 40,510","sourceConnector":"bottom","target":{"id":1444},"targetConnector":"top"}]},{"action":"gcx:wf:core:loop:ForEach","id":1444,"inputs":{"items":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.reports","source":"$reportConfig.result.reports"}},"name":"forEachReportsForEstimateTime1","position":"-80,510","title":"For Each","transitions":[{"id":1460,"inputs":{},"position":"40,630 40,710 50,710 50,730","sourceConnector":"bottom","target":{"id":1432}}]}]},{"id":1406,"steps":[{"action":"gcx:wf:core::Exit","id":1199,"inputs":{},"position":"30,710","title":"Exit"},{"id":1407,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":1505,"inputs":{},"position":"90,60 90,120 120,120 120,140","sourceConnector":"bottom","target":{"id":1500},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"send error email to admin","id":1490,"inputs":{},"position":"0,490","title":"Container","transitions":[{"id":1201,"inputs":{},"position":"120,610 120,710","sourceConnector":"bottom","target":{"id":1199}}]},{"action":"gcx:wf:core::Log","id":1496,"inputs":{"message":{"accessors":["$errorJson1"],"annotations":[{"count":11,"index":31,"kind":"idref"}],"code":"\"Error generating report: \" + $errorJson1.json","source":" \"Error generating report: \" + $errorJson1.json"}},"position":"0,360","title":"Log","transitions":[{"id":1506,"inputs":{},"position":"120,390 120,490","sourceConnector":"bottom","target":{"id":1490}}]},{"action":"gcx:wf:core::ConvertToJson","id":1498,"inputs":{"object":{"accessors":["$tryCatchSendConfirmationEmail"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$tryCatchSendConfirmationEmail.error","source":"$tryCatchSendConfirmationEmail.error"}},"name":"errorJson1","position":"0,220","title":"Convert To JSON","transitions":[{"id":1502,"inputs":{},"position":"120,290 120,360","sourceConnector":"bottom","target":{"id":1496},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetWorkflowOutput","id":1500,"inputs":{"name":"output","value":{"accessors":["$tryCatchSendConfirmationEmail"],"annotations":[{"count":30,"index":12,"kind":"idref"}],"code":"{\n    \"error\": $tryCatchSendConfirmationEmail.error\n}","source":"{\n  \"error\":$tryCatchSendConfirmationEmail.error\n}"}},"position":"0,140","title":"Set Workflow Output","transitions":[{"id":1504,"inputs":{},"position":"120,170 120,220","sourceConnector":"bottom","target":{"id":1498},"targetConnector":"top"}]}]},{"id":1411,"steps":[{"id":1413,"inputs":{},"position":"0,0","purpose":"start","title":"For Each","transitions":[{"id":1428,"inputs":{},"position":"90,60 90,100 100,100 100,120","target":{"id":1415}}]},{"action":"gcx:wf:core::If","id":1415,"inputs":{"condition":{"accessors":["$forEachReportsForEstimateTime1","$forEachReportsForEstimateTime1"],"annotations":[{"count":31,"index":0,"kind":"idref"},{"count":31,"index":73,"kind":"idref"}],"code":"$forEachReportsForEstimateTime1.item.maxProcessingTimeInMins !== null && $forEachReportsForEstimateTime1.item.maxProcessingTimeInMins !== undefined","source":"$forEachReportsForEstimateTime1.item.maxProcessingTimeInMins !== null && $forEachReportsForEstimateTime1.item.maxProcessingTimeInMins !== undefined"}},"position":"40,120","title":"If","transitions":[{"branch":"true","id":1430,"inputs":{},"position":"40,150 10,150 10,280","sourceConnector":"left","target":{"id":1423}}]},{"action":"gcx:wf:core::SetProperty","id":1423,"inputs":{"object":{"accessors":["$estimatedProcessingTime"],"annotations":[{"count":24,"index":0,"kind":"idref"}],"code":"$estimatedProcessingTime","source":"$estimatedProcessingTime"},"propertyName":"result","propertyValue":{"accessors":["$estimatedProcessingTime","$forEachReportsForEstimateTime1"],"annotations":[{"count":24,"index":0,"kind":"idref"},{"count":31,"index":34,"kind":"idref"}],"code":"$estimatedProcessingTime.result + $forEachReportsForEstimateTime1.item.maxProcessingTimeInMins","source":"$estimatedProcessingTime.result + $forEachReportsForEstimateTime1.item.maxProcessingTimeInMins"}},"position":"-110,280","title":"Set Property"}]},{"id":1437,"steps":[{"id":1441,"inputs":{},"position":"0,-200","purpose":"start","title":"For Each","transitions":[{"id":1497,"inputs":{},"position":"90,-140 90,-60","target":{"id":1445}}]},{"action":"gcx:wf:core::CreateValue","id":1445,"inputs":{"expression":{"accessors":["$forEachReportToCheckGPTimeOut"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$forEachReportToCheckGPTimeOut.item","source":"$forEachReportToCheckGPTimeOut.item"}},"name":"currentReportToCheckGPTimeOut","position":"-30,-60","title":"Create Value","transitions":[{"id":1501,"inputs":{},"position":"210,-25 290,-25 290,-40 370,-40 370,-20","sourceConnector":"right","target":{"id":1449},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1449,"inputs":{"condition":{"accessors":["$currentReportToCheckGPTimeOut","$currentReportToCheckGPTimeOut"],"annotations":[{"count":30,"index":0,"kind":"idref"},{"count":30,"index":58,"kind":"idref"}],"code":"$currentReportToCheckGPTimeOut.result.dataUrl !== null && $currentReportToCheckGPTimeOut.result.dataUrl !== undefined","source":"$currentReportToCheckGPTimeOut.result.dataUrl !== null && $currentReportToCheckGPTimeOut.result.dataUrl !== undefined"}},"position":"310,-20","title":"If","transitions":[{"branch":"true","id":1527,"inputs":{},"position":"310,10 230,10 230,70 80,70 80,90","sourceConnector":"left","target":{"id":1453},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1453,"inputs":{"condition":{"accessors":["$currentReportToCheckGPTimeOut"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$currentReportToCheckGPTimeOut.result.error == null","source":"$currentReportToCheckGPTimeOut.result.error == null "}},"position":"20,90","title":"If","transitions":[{"branch":"true","id":1314,"inputs":{},"position":"20,120 0,120 0,210 70,210 70,230","sourceConnector":"left","target":{"id":1471},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1471,"inputs":{"condition":{"accessors":["$currentReportToCheckGPTimeOut"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$currentReportToCheckGPTimeOut.result.gpJob.jobStatus == \"esriJobSucceeded\"","source":"$currentReportToCheckGPTimeOut.result.gpJob.jobStatus == \"esriJobSucceeded\""}},"position":"10,230","title":"If","transitions":[{"branch":"false","id":1311,"inputs":{},"position":"130,260 370,260 370,350","sourceConnector":"right","target":{"id":1475},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1475,"inputs":{"object":{"accessors":["$currentReportToCheckGPTimeOut"],"annotations":[{"count":30,"index":0,"kind":"idref"}],"code":"$currentReportToCheckGPTimeOut.result","source":"$currentReportToCheckGPTimeOut.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Timed out executing GP task\"\n}","source":"{\n  \"error\": \"Timed out executing GP task\"\n}"}},"position":"250,350","title":"Set Property"}]},{"id":1466,"steps":[{"id":1468,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1480,"inputs":{},"position":"90,60 90,110 100,110 100,130","target":{"id":1470}}]},{"action":"gcx:wf:core::CreateValue","id":1470,"inputs":{"expression":{"accessors":["$tryCatchSendConfirmationEmail"],"annotations":[{"count":30,"index":83,"kind":"idref"}],"code":"\"Can not send report comnfirmation email to user, report not generated. Error: \" + $tryCatchSendConfirmationEmail.error.message","source":"\"Can not send report comnfirmation email to user, report not generated. Error: \" + $tryCatchSendConfirmationEmail.error.message"}},"name":"errorMessage5","position":"-20,130","title":"Create Value","transitions":[{"id":1482,"inputs":{},"position":"100,200 100,260","sourceConnector":"bottom","target":{"id":1472},"targetConnector":"top"}]},{"action":"gcx:wf:core::FormatDate","id":1472,"inputs":{"date":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"},"format":"LLL"},"name":"currentDate8","position":"-20,260","title":"Format Date","transitions":[{"id":1484,"inputs":{},"position":"100,330 100,390","sourceConnector":"bottom","target":{"id":1474},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":1474,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate8","$errorMessage5","$reportConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"}],"code":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate8.formatted).replace(\"{errorMessage}\", $errorMessage5.result).replace(\"{userEmail}\", $reportConfig.result.email)","source":"$AdminEmailConfig.result.subjectTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate8.formatted).replace(\"{errorMessage}\", $errorMessage5.result).replace(\"{userEmail}\", $reportConfig.result.email)"}},"name":"errorEmailSubject5","position":"-20,390","title":"Create Value","transitions":[{"id":1486,"inputs":{},"position":"100,460 100,530","sourceConnector":"bottom","target":{"id":1478}}]},{"action":"gcx:wf:server::SendEmail","id":1476,"inputs":{"body":{"accessors":["$errorEmailBody5"],"annotations":[{"count":16,"index":0,"kind":"idref"}],"code":"$errorEmailBody5.result","source":"$errorEmailBody5.result"},"from":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.fromEmail","source":"$AdminEmailConfig.result.fromEmail"},"isBodyHtml":true,"subject":{"accessors":["$errorEmailSubject5"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$errorEmailSubject5.result","source":"$errorEmailSubject5.result"},"to":{"accessors":["$AdminEmailConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"}],"code":"$AdminEmailConfig.result.adminEmail","source":"$AdminEmailConfig.result.adminEmail"}},"position":"-20,650","title":"Send Email"},{"action":"gcx:wf:core::CreateValue","id":1478,"inputs":{"expression":{"accessors":["$AdminEmailConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$currentDate8","$errorMessage5","$reportConfig"],"annotations":[{"count":17,"index":0,"kind":"idref"},{"count":13,"index":64,"kind":"idref"},{"count":13,"index":121,"kind":"idref"},{"count":13,"index":180,"kind":"idref"},{"count":13,"index":239,"kind":"idref"},{"count":13,"index":295,"kind":"idref"},{"count":13,"index":351,"kind":"idref"},{"count":14,"index":402,"kind":"idref"},{"count":13,"index":448,"kind":"idref"}],"code":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\", $reportConfig.result.reportName).replace(\"{projectName}\", $reportConfig.result.projectName).replace(\"{jurisdiction}\", $reportConfig.result.jurisdiction).replace(\"{projectType}\", $reportConfig.result.projectType).replace(\"{viewerUrl}\", $reportConfig.result.viewerUrl).replace(\"{currentTime}\", $currentDate8.formatted).replace(\"{errorMessage}\", $errorMessage5.result).replace(\"{userEmail}\", $reportConfig.result.email)","source":"$AdminEmailConfig.result.messageTemplate.replace(\"{reportName}\",$reportConfig.result.reportName).replace(\"{projectName}\",$reportConfig.result.projectName).replace(\"{jurisdiction}\",$reportConfig.result.jurisdiction).replace(\"{projectType}\",$reportConfig.result.projectType).replace(\"{viewerUrl}\",$reportConfig.result.viewerUrl).replace(\"{currentTime}\",$currentDate8.formatted).replace(\"{errorMessage}\", $errorMessage5.result).replace(\"{userEmail}\", $reportConfig.result.email)"}},"name":"errorEmailBody5","position":"-20,530","title":"Create Value","transitions":[{"id":1488,"inputs":{},"position":"100,600 100,650","sourceConnector":"bottom","target":{"id":1476}}]}]},{"id":1821,"steps":[{"id":1822,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":2258,"inputs":{},"position":"90,60 90,320 110,320 110,340","sourceConnector":"bottom","target":{"id":2213},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Collect Data from GP task","id":2213,"inputs":{},"position":"-10,340","title":"Container"}]},{"id":1827,"steps":[{"action":"gcx:wf:core::If","id":1249,"inputs":{"condition":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.data !== null","source":"$currentTitleReport.data !== null"}},"position":"50,840","title":"If","transitions":[{"branch":"true","id":1255,"inputs":{},"position":"50,870 30,870 30,960 110,960 110,980","sourceConnector":"left","target":{"id":1251}}]},{"action":"gcx:wf:core::Container","description":"Populate \"project_length_centerline_miles\", \"project_community_type\", and \"title image url\" for the title report","id":1251,"inputs":{},"position":"-10,980","title":"Container"},{"id":1829,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":2406,"inputs":{},"position":"90,60 90,140 110,140 110,160","sourceConnector":"bottom","target":{"id":2393},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Check and Collect report data from GP task","id":1833,"inputs":{},"position":"-10,620","title":"Container","transitions":[{"id":1250,"inputs":{},"position":"110,760 110,840","sourceConnector":"bottom","target":{"id":1249},"targetConnector":"top"}]},{"action":"gcx:wf:core::CreateValue","id":2393,"inputs":{"expression":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.titleReport","source":"$reportConfig.result.titleReport"}},"name":"currentTitleReport","position":"-10,160","title":"Create Value","transitions":[{"id":2403,"inputs":{},"position":"110,230 110,300","sourceConnector":"bottom","target":{"id":2395},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":2395,"inputs":{"message":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":39,"kind":"idref"}],"code":"\"Start gp processing title report: \" + $currentTitleReport.result.name","source":"\"Start gp processing title report: \" + $currentTitleReport.result.name"}},"position":"-10,300","title":"Log","transitions":[{"id":2405,"inputs":{},"position":"110,330 110,400","sourceConnector":"bottom","target":{"id":2397}}]},{"action":"gcx:wf:core::TryCatch","id":2397,"inputs":{},"name":"tryCatchStartTitleReportGPTask","position":"-10,400","title":"Try Catch","transitions":[{"id":1105,"inputs":{},"position":"110,520 110,620","sourceConnector":"bottom","target":{"id":1833}}]}]},{"id":1945,"steps":[{"action":"gcx:wf:core::CreateValue","id":1947,"inputs":{"expression":{"accessors":[],"code":"false","source":"false"}},"name":"endGPCheckingLoop1","position":"-20,150","title":"Create Value","transitions":[{"id":1955,"inputs":{},"position":"100,220 100,290","sourceConnector":"bottom","target":{"id":1949}}]},{"action":"gcx:wf:core::CreateValue","id":1949,"inputs":{"expression":{"accessors":["Date"],"annotations":[{"count":4,"index":0,"kind":"idref"}],"code":"Date.now()","source":"Date.now()"}},"name":"GPCheckingLoopStartTime1","position":"-20,290","title":"Create Value","transitions":[{"id":1959,"inputs":{},"position":"100,360 100,440","sourceConnector":"bottom","target":{"id":1953}}]},{"id":1951,"inputs":{},"position":"0,0","purpose":"start","title":"Container","transitions":[{"id":1957,"inputs":{},"position":"90,60 90,130 100,130 100,150","target":{"id":1947}}]},{"action":"gcx:wf:core:loop:Loop","id":1953,"inputs":{"exit":{"accessors":["$endGPCheckingLoop1"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$endGPCheckingLoop1.result","source":"$endGPCheckingLoop1.result"},"limit":{"accessors":["$reportTimeoutMinutes","$millisecondsDelay"],"annotations":[{"count":21,"index":1,"kind":"idref"},{"count":18,"index":40,"kind":"idref"}],"code":"$reportTimeoutMinutes.result * 60 * 1000 / $millisecondsDelay.result","source":" $reportTimeoutMinutes.result*60*1000 / $millisecondsDelay.result"}},"name":"GPCheckingLoop1","position":"-20,440","title":"Loop"}]},{"id":1961,"steps":[{"action":"gcx:wf:core::CreateValue","id":1187,"inputs":{"expression":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"}},"name":"currentCheckingGPReport1","position":"-20,150","title":"Create Value","transitions":[{"id":1195,"inputs":{},"position":"100,220 100,270 90,270 90,290","sourceConnector":"bottom","target":{"id":1189}}]},{"action":"gcx:wf:core::TryCatch","id":1189,"inputs":{},"name":"tryCatchCheckGPTask1","position":"-30,290","title":"Try Catch","transitions":[{"id":1197,"inputs":{},"position":"90,410 90,490","sourceConnector":"bottom","target":{"id":1969},"targetConnector":"top"}]},{"id":1963,"inputs":{},"position":"10,-110","purpose":"start","title":"Loop","transitions":[{"id":1971,"inputs":{},"position":"100,-50 100,40","sourceConnector":"bottom","target":{"id":1965},"targetConnector":"top"}]},{"action":"gcx:wf:core::Delay","id":1965,"inputs":{"duration":{"accessors":["$millisecondsDelay"],"annotations":[{"count":18,"index":0,"kind":"idref"}],"code":"$millisecondsDelay.result","source":"$millisecondsDelay.result"}},"position":"-20,40","title":"Delay","transitions":[{"id":1196,"inputs":{},"position":"100,70 100,150","sourceConnector":"bottom","target":{"id":1187},"targetConnector":"top"}]},{"action":"gcx:wf:core::Container","description":"Check if loop can be finished","id":1969,"inputs":{},"position":"-30,490","title":"Container"}]},{"id":1977,"steps":[{"action":"gcx:wf:core::CreateValue","id":1133,"inputs":{"expression":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"}},"name":"currentReportToCheckFinish1","position":"70,230","title":"Create Value","transitions":[{"id":1207,"inputs":{},"position":"310,265 390,265 390,250 470,250 470,270","sourceConnector":"right","target":{"id":1141},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1141,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish1","$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"},{"count":28,"index":56,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.dataUrl !== null && $currentReportToCheckFinish1.result.dataUrl !== undefined","source":"$currentReportToCheckFinish1.result.dataUrl !== null && $currentReportToCheckFinish1.result.dataUrl !== undefined"}},"position":"410,270","title":"If","transitions":[{"branch":"true","id":1235,"inputs":{},"position":"410,300 330,300 330,360 180,360 180,380","sourceConnector":"left","target":{"id":1149},"targetConnector":"top"},{"branch":"false","id":1248,"inputs":{},"position":"530,300 920,300 920,665 940,665","sourceConnector":"right","target":{"id":1989}}]},{"action":"gcx:wf:core::If","id":1149,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish1","$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"},{"count":28,"index":54,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.error !== null && $currentReportToCheckFinish1.result.error !== undefined","source":"$currentReportToCheckFinish1.result.error !== null && $currentReportToCheckFinish1.result.error !== undefined"}},"position":"120,380","title":"If","transitions":[{"branch":"false","id":1211,"inputs":{},"position":"240,410 280,410 280,800","sourceConnector":"right","target":{"id":1165},"targetConnector":"top"},{"branch":"true","id":1242,"inputs":{},"position":"120,410 100,410 100,700 1060,700 1060,680","sourceConnector":"left","target":{"id":1989},"targetConnector":"bottom"}]},{"action":"gcx:wf:core::If","id":1165,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.gpJob.jobStatus == \"esriJobFailed\"","source":"$currentReportToCheckFinish1.result.gpJob.jobStatus == \"esriJobFailed\""}},"position":"220,800","title":"If","transitions":[{"branch":"false","id":1215,"inputs":{},"position":"340,830 530,830 530,1020","sourceConnector":"right","target":{"id":1173},"targetConnector":"top"},{"branch":"true","id":1243,"inputs":{},"position":"220,830 170,830 170,930","sourceConnector":"left","target":{"id":1177},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":1173,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.gpJob.jobStatus == \"esriJobSucceeded\"","source":"$currentReportToCheckFinish1.result.gpJob.jobStatus == \"esriJobSucceeded\""}},"position":"470,1020","title":"If","transitions":[{"branch":"true","id":1245,"inputs":{},"position":"470,1050 440,1050 440,1150","sourceConnector":"left","target":{"id":1186},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1177,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result","source":"$currentReportToCheckFinish1.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"esriJobFailed\"\n}","source":"{\n  \"error\": \"esriJobFailed\"\n}"}},"position":"50,930","title":"Set Property","transitions":[{"id":1244,"inputs":{},"position":"290,945 1060,945 1060,680","sourceConnector":"right","target":{"id":1989},"targetConnector":"bottom"}]},{"action":"gcx:wf:core::If","id":1186,"inputs":{"condition":{"accessors":["$currentReportToCheckFinish1","$currentReportToCheckFinish1","$currentReportToCheckFinish1","$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"},{"count":28,"index":61,"kind":"idref"},{"count":28,"index":134,"kind":"idref"},{"count":28,"index":217,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result.gpJob.results != null && $currentReportToCheckFinish1.result.gpJob.results.Output_JSON != null && $currentReportToCheckFinish1.result.gpJob.results.Output_JSON.paramUrl !== null && $currentReportToCheckFinish1.result.gpJob.results.Output_JSON.paramUrl !== undefined","source":"$currentReportToCheckFinish1.result.gpJob.results != null && $currentReportToCheckFinish1.result.gpJob.results.Output_JSON != null && $currentReportToCheckFinish1.result.gpJob.results.Output_JSON.paramUrl !== null && $currentReportToCheckFinish1.result.gpJob.results.Output_JSON.paramUrl !== undefined"}},"position":"380,1150","title":"If","transitions":[{"branch":"false","id":1229,"inputs":{},"position":"500,1180 590,1180 590,1385 610,1385","sourceConnector":"right","target":{"id":1190}},{"branch":"true","id":1231,"inputs":{},"position":"380,1180 360,1180 360,1300 370,1300 370,1390 350,1390","sourceConnector":"left","target":{"id":1194}}]},{"action":"gcx:wf:core::SetProperty","id":1190,"inputs":{"object":{"accessors":["$currentReportToCheckFinish1"],"annotations":[{"count":28,"index":0,"kind":"idref"}],"code":"$currentReportToCheckFinish1.result","source":"$currentReportToCheckFinish1.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"GP job finished without json output\"\n}","source":"{\n  \"error\": \"GP job finished without json output\"\n}"}},"position":"610,1370","title":"Set Property","transitions":[{"id":1246,"inputs":{},"position":"850,1385 1060,1385 1060,680","sourceConnector":"right","target":{"id":1989},"targetConnector":"bottom"}]},{"action":"gcx:wf:core::Container","description":"Collect gp result data json for report","id":1194,"inputs":{},"position":"110,1320","title":"Container","transitions":[{"id":1247,"inputs":{},"position":"230,1460 230,1480 1060,1480 1060,680","sourceConnector":"bottom","target":{"id":1989},"targetConnector":"bottom"}]},{"id":1979,"inputs":{},"position":"0,-30","purpose":"start","title":"Container","transitions":[{"id":1240,"inputs":{},"position":"90,30 90,210 190,210 190,230","sourceConnector":"bottom","target":{"id":1133},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":1989,"inputs":{"object":{"accessors":["$endGPCheckingLoop1"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$endGPCheckingLoop1","source":"$endGPCheckingLoop1"},"propertyName":"result","propertyValue":{"accessors":[],"code":"true","source":"true"}},"position":"940,650","title":"Set Property"}]},{"id":2301,"steps":[{"id":2303,"inputs":{},"position":"0,0","purpose":"start","title":"Catch","transitions":[{"id":2309,"inputs":{},"position":"90,60 90,130 80,130 80,150","sourceConnector":"bottom","target":{"id":2305}}]},{"action":"gcx:wf:core::SetProperty","id":2305,"inputs":{"object":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"},"propertyName":"error","propertyValue":{"accessors":["$tryCatchStartTitleReportGPTask"],"annotations":[{"count":31,"index":0,"kind":"idref"}],"code":"$tryCatchStartTitleReportGPTask.error","source":"$tryCatchStartTitleReportGPTask.error"}},"position":"-40,150","title":"Set Property","transitions":[{"id":2311,"inputs":{},"position":"80,180 80,220","sourceConnector":"bottom","target":{"id":2307}}]},{"action":"gcx:wf:core::Log","id":2307,"inputs":{"message":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":50,"kind":"idref"}],"code":"\"Error caught when tried to start gp task for \" + $currentTitleReport.result.name","source":"\"Error caught when tried to start gp task for \" + $currentTitleReport.result.name"}},"position":"-40,220","title":"Log"}]},{"id":2313,"steps":[{"id":2315,"inputs":{},"position":"-20,-290","purpose":"start","title":"Try","transitions":[{"id":2355,"inputs":{},"position":"70,-230 70,-170 80,-170 80,-150","sourceConnector":"bottom","target":{"id":2317},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2317,"inputs":{"condition":{"accessors":["$currentTitleReport","$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":47,"kind":"idref"}],"code":"$currentTitleReport.result.dataUrl !== null && $currentTitleReport.result.dataUrl !== undefined","source":"$currentTitleReport.result.dataUrl !== null && $currentTitleReport.result.dataUrl !== undefined"}},"position":"20,-150","title":"If","transitions":[{"branch":"true","id":2389,"inputs":{},"position":"20,-120 0,-120 0,-20 90,-20 90,0","sourceConnector":"left","target":{"id":2319},"targetConnector":"top"},{"branch":"false","id":2391,"inputs":{},"position":"140,-120 220,-120 220,-115 240,-115","sourceConnector":"right","target":{"id":2353}}]},{"action":"gcx:wf:core::CreateValue","id":2319,"inputs":{"expression":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.dataUrl + \"/submitJob\"","source":"$currentTitleReport.result.dataUrl + \"/submitJob\""}},"name":"currentGPUrl1","position":"-30,0","title":"Create Value","transitions":[{"id":2357,"inputs":{},"position":"90,70 90,130","sourceConnector":"bottom","target":{"id":2321}}]},{"action":"gcx:wf:core::ConvertToJson","id":2321,"inputs":{"object":{"accessors":["$reportConfig"],"annotations":[{"count":13,"index":0,"kind":"idref"}],"code":"$reportConfig.result.projectLine","source":"$reportConfig.result.projectLine"}},"name":"projectLineJsonString1","position":"-30,130","title":"Convert To JSON","transitions":[{"id":2371,"inputs":{},"position":"90,200 90,250","sourceConnector":"bottom","target":{"id":2343}}]},{"action":"gcx:wf:core:request:WebRequest","id":2323,"inputs":{"form":{"accessors":["$projectLineJsonString","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig","$reportConfig"],"annotations":[{"count":22,"index":19,"kind":"idref"},{"count":13,"index":66,"kind":"idref"},{"count":13,"index":117,"kind":"idref"},{"count":13,"index":168,"kind":"idref"},{"count":13,"index":204,"kind":"idref"},{"count":13,"index":253,"kind":"idref"},{"count":13,"index":300,"kind":"idref"}],"code":"{\n    \"Project_Line\": $projectLineJsonString.json,\n    \"Project_Name\": $reportConfig.result.projectName,\n    \"Jurisdiction\": $reportConfig.result.jurisdiction,\n    \"Project_ADT\": $reportConfig.result.ADT,\n    \"AADT\": $reportConfig.result.ADT,\n    \"Posted_Speed_Limit\": $reportConfig.result.postedSpeedLimit,\n    \"PCI\": $reportConfig.result.PCI,\n    \"f\": \"json\"\n}","source":"{\n  \"Project_Line\":$projectLineJsonString.json,\n  \"Project_Name\": $reportConfig.result.projectName,\n  \"Jurisdiction\":$reportConfig.result.jurisdiction,\n  \"Project_ADT\":$reportConfig.result.ADT,\n  \"AADT\": $reportConfig.result.ADT,\n  \"Posted_Speed_Limit\":$reportConfig.result.postedSpeedLimit,\n  \"PCI\":$reportConfig.result.PCI,\n  \"f\":\"json\"\n}"},"headers":{"accessors":[],"annotations":[],"code":"{\n    \"content-type\": \"application/x-www-form-urlencoded\"\n}","source":"{\n  \"content-type\": \"application/x-www-form-urlencoded\"\n}"},"method":"POST","url":{"accessors":["$currentGPUrl1"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$currentGPUrl1.result","source":"$currentGPUrl1.result"}},"name":"webRequestStartGPTask1","position":"-30,320","title":"Send Web Request","transitions":[{"id":2359,"inputs":{},"position":"90,390 90,430","sourceConnector":"bottom","target":{"id":2325}}]},{"action":"gcx:wf:core::Log","id":2325,"inputs":{"message":{"accessors":["$webRequestStartGPTask1"],"annotations":[{"count":23,"index":38,"kind":"idref"}],"code":"\"Response collected from GP task: \" + $webRequestStartGPTask1.text","source":"\"Response collected from GP task: \" + $webRequestStartGPTask1.text "}},"position":"-30,430","title":"Log","transitions":[{"id":2375,"inputs":{},"position":"90,460 90,520","sourceConnector":"bottom","target":{"id":2331}}]},{"action":"gcx:wf:core::SetProperty","id":2327,"inputs":{"object":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"},"propertyName":"gpJob","propertyValue":{"accessors":["$parseJobJson4"],"annotations":[{"count":14,"index":0,"kind":"idref"}],"code":"$parseJobJson4.result","source":"$parseJobJson4.result"}},"position":"-340,810","title":"Set Property","transitions":[{"id":1104,"inputs":{},"position":"-220,840 -220,930 140,930 140,950","sourceConnector":"bottom","target":{"id":2345},"targetConnector":"top"}]},{"action":"gcx:wf:core::If","id":2331,"inputs":{"condition":{"accessors":["$webRequestStartGPTask1","$webRequestStartGPTask1"],"annotations":[{"count":23,"index":0,"kind":"idref"},{"count":23,"index":41,"kind":"idref"}],"code":"$webRequestStartGPTask1.text !== null && $webRequestStartGPTask1.text !== undefined","source":"$webRequestStartGPTask1.text !== null && $webRequestStartGPTask1.text !== undefined"}},"position":"30,520","title":"If","transitions":[{"branch":"true","id":1102,"inputs":{},"position":"30,550 10,550 10,620 100,620 100,640","sourceConnector":"left","target":{"id":2337},"targetConnector":"top"},{"branch":"false","id":2365,"inputs":{},"position":"150,550 240,550 240,555 260,555","sourceConnector":"right","target":{"id":2335},"targetConnector":"left"}]},{"action":"gcx:wf:core::SetProperty","id":2335,"inputs":{"object":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"},"propertyName":"error","propertyValue":{"accessors":[],"annotations":[],"code":"{\n    \"error\": \"Can not start geoprocessing task.\"\n}","source":"{\n  \"error\": \"Can not start geoprocessing task.\"\n}"}},"position":"260,540","title":"Set Property","transitions":[{"id":2369,"inputs":{},"position":"380,570 380,600 390,600 390,620","sourceConnector":"bottom","target":{"id":2341}}]},{"action":"gcx:wf:core::ParseJson","id":2337,"inputs":{"json":{"accessors":["$webRequestStartGPTask1"],"annotations":[{"count":23,"index":0,"kind":"idref"}],"code":"$webRequestStartGPTask1.text","source":"$webRequestStartGPTask1.text"}},"name":"parseJobJson4","position":"-20,640","title":"Parse JSON","transitions":[{"id":1103,"inputs":{},"position":"-20,675 -220,675 -220,810","sourceConnector":"left","target":{"id":2327},"targetConnector":"top"}]},{"action":"gcx:wf:core::Log","id":2341,"inputs":{"message":{"accessors":["$currentGPUrl1"],"annotations":[{"count":14,"index":53,"kind":"idref"}],"code":"\"error:  Can not start geoprocessing task from \" + $currentGPUrl1.result","source":" \"error:  Can not start geoprocessing task from \" +  $currentGPUrl1.result"}},"position":"270,620","title":"Log"},{"action":"gcx:wf:core::Log","id":2343,"inputs":{"message":{"accessors":["$currentGPUrl1"],"annotations":[{"count":14,"index":25,"kind":"idref"}],"code":"\"Start GP task from: \" + $currentGPUrl1.result","source":"\"Start GP task from: \" + $currentGPUrl1.result"}},"position":"-30,250","title":"Log","transitions":[{"id":2373,"inputs":{},"position":"90,280 90,320","sourceConnector":"bottom","target":{"id":2323}}]},{"action":"gcx:wf:core::If","id":2345,"inputs":{"condition":{"accessors":["$currentTitleReport","$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"},{"count":19,"index":51,"kind":"idref"}],"code":"$currentTitleReport.result.gpJob.jobId === null || $currentTitleReport.result.gpJob.jobId === undefined","source":"$currentTitleReport.result.gpJob.jobId === null || $currentTitleReport.result.gpJob.jobId === undefined"}},"position":"80,950","title":"If","transitions":[{"branch":"true","id":2383,"inputs":{},"position":"80,980 60,980 60,1030 150,1030 150,1050","sourceConnector":"left","target":{"id":2347}}]},{"action":"gcx:wf:core::If","id":2347,"inputs":{"condition":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.gpJob.error != null","source":"$currentTitleReport.result.gpJob.error != null"}},"position":"90,1050","title":"If","transitions":[{"branch":"true","id":2385,"inputs":{},"position":"90,1080 -20,1080 -20,1170","sourceConnector":"left","target":{"id":2349},"targetConnector":"top"},{"branch":"false","id":2387,"inputs":{},"position":"210,1080 280,1080 280,1170","sourceConnector":"right","target":{"id":2351},"targetConnector":"top"}]},{"action":"gcx:wf:core::SetProperty","id":2349,"inputs":{"object":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"},"propertyName":"error","propertyValue":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result.gpJob.error","source":"$currentTitleReport.result.gpJob.error"}},"position":"-140,1170","title":"Set Property"},{"action":"gcx:wf:core::SetProperty","id":2351,"inputs":{"object":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":0,"kind":"idref"}],"code":"$currentTitleReport.result","source":"$currentTitleReport.result"},"propertyName":"error","propertyValue":{"accessors":[],"code":"\"Could not start gp task\"","source":"\"Could not start gp task\""}},"position":"160,1170","title":"Set Property"},{"action":"gcx:wf:core::Log","id":2353,"inputs":{"message":{"accessors":["$currentTitleReport"],"annotations":[{"count":19,"index":13,"kind":"idref"}],"code":"\"Report: \" + $currentTitleReport.result.name + \" does not have GP data url\"","source":"\"Report: \" + $currentTitleReport.result.name  + \" does not have GP data url\""}},"position":"240,-130","title":"Log"}]}],"designerVersion":"5.26.0+15","licenseInfo":{"licenseUrl":"https://mapping.sacog.org/vertigisstudio/workflow/service/auth/license"},"start":{"id":3},"transitions":[{"branch":"content","id":130,"inputs":{},"source":{"id":126},"target":{"id":76}},{"branch":"try","id":132,"inputs":{},"source":{"id":128},"target":{"id":20}},{"branch":"catch","id":134,"inputs":{},"source":{"id":128},"target":{"id":8}},{"branch":"content","id":138,"inputs":{},"source":{"id":10},"target":{"id":16}},{"branch":"content","id":140,"inputs":{},"source":{"id":24},"target":{"id":32}},{"branch":"loop","id":142,"inputs":{},"source":{"id":34},"target":{"id":40}},{"branch":"try","id":144,"inputs":{},"source":{"id":44},"target":{"id":64}},{"branch":"catch","id":146,"inputs":{},"source":{"id":44},"target":{"id":52}},{"branch":"content","id":155,"inputs":{},"source":{"id":152},"target":{"id":154}},{"branch":"content","id":160,"inputs":{},"source":{"id":157},"target":{"id":159}},{"branch":"loop","id":167,"inputs":{},"source":{"id":164},"target":{"id":166}},{"branch":"content","id":200,"inputs":{},"source":{"id":196},"target":{"id":180}},{"branch":"loop","id":262,"inputs":{},"source":{"id":260},"target":{"id":179}},{"branch":"try","id":264,"inputs":{},"source":{"id":187},"target":{"id":219}},{"branch":"catch","id":266,"inputs":{},"source":{"id":187},"target":{"id":205}},{"branch":"content","id":279,"inputs":{},"source":{"id":276},"target":{"id":278}},{"branch":"content","id":340,"inputs":{},"source":{"id":337},"target":{"id":339}},{"branch":"loop","id":348,"inputs":{},"source":{"id":346},"target":{"id":292}},{"branch":"content","id":398,"inputs":{},"source":{"id":395},"target":{"id":397}},{"branch":"content","id":453,"inputs":{},"source":{"id":450},"target":{"id":452}},{"branch":"content","id":482,"inputs":{},"source":{"id":479},"target":{"id":481}},{"branch":"content","id":543,"inputs":{},"source":{"id":534},"target":{"id":540}},{"branch":"loop","id":560,"inputs":{},"source":{"id":558},"target":{"id":495}},{"branch":"try","id":562,"inputs":{},"source":{"id":503},"target":{"id":524}},{"branch":"catch","id":564,"inputs":{},"source":{"id":503},"target":{"id":516}},{"branch":"content","id":581,"inputs":{},"source":{"id":576},"target":{"id":578}},{"branch":"content","id":838,"inputs":{},"source":{"id":836},"target":{"id":814}},{"branch":"content","id":845,"inputs":{},"source":{"id":842},"target":{"id":844}},{"branch":"loop","id":862,"inputs":{},"source":{"id":859},"target":{"id":861}},{"branch":"content","id":892,"inputs":{},"source":{"id":890},"target":{"id":874}},{"branch":"content","id":932,"inputs":{},"source":{"id":930},"target":{"id":908}},{"branch":"content","id":936,"inputs":{},"source":{"id":934},"target":{"id":873}},{"branch":"content","id":959,"inputs":{},"source":{"id":953},"target":{"id":957}},{"branch":"content","id":982,"inputs":{},"source":{"id":980},"target":{"id":950}},{"branch":"content","id":1014,"inputs":{},"source":{"id":1011},"target":{"id":1013}},{"branch":"content","id":1092,"inputs":{},"source":{"id":1090},"target":{"id":1056}},{"branch":"try","id":1191,"inputs":{},"source":{"id":1189},"target":{"id":1131}},{"branch":"catch","id":1193,"inputs":{},"source":{"id":1189},"target":{"id":1110}},{"branch":"content","id":1200,"inputs":{},"source":{"id":1198},"target":{"id":1128}},{"branch":"try","id":1202,"inputs":{},"source":{"id":1134},"target":{"id":1164}},{"branch":"catch","id":1204,"inputs":{},"source":{"id":1134},"target":{"id":1148}},{"branch":"content","id":1205,"inputs":{},"source":{"id":1194},"target":{"id":927}},{"branch":"content","id":1237,"inputs":{},"source":{"id":935},"target":{"id":1065}},{"branch":"content","id":1239,"inputs":{},"source":{"id":945},"target":{"id":1006}},{"branch":"content","id":1254,"inputs":{},"source":{"id":1251},"target":{"id":1253}},{"branch":"content","id":1281,"inputs":{},"source":{"id":1278},"target":{"id":1280}},{"branch":"try","id":1405,"inputs":{},"source":{"id":1402},"target":{"id":1404}},{"branch":"catch","id":1408,"inputs":{},"source":{"id":1402},"target":{"id":1407}},{"branch":"loop","id":1446,"inputs":{},"source":{"id":1444},"target":{"id":1413}},{"branch":"content","id":1492,"inputs":{},"source":{"id":1490},"target":{"id":1468}},{"branch":"loop","id":1603,"inputs":{},"source":{"id":1601},"target":{"id":1441}},{"branch":"content","id":1823,"inputs":{},"source":{"id":1820},"target":{"id":1822}},{"branch":"content","id":2215,"inputs":{},"source":{"id":2213},"target":{"id":1829}},{"branch":"content","id":2233,"inputs":{},"source":{"id":1833},"target":{"id":1951}},{"branch":"loop","id":2241,"inputs":{},"source":{"id":1953},"target":{"id":1963}},{"branch":"content","id":2245,"inputs":{},"source":{"id":1969},"target":{"id":1979}},{"branch":"try","id":2399,"inputs":{},"source":{"id":2397},"target":{"id":2315}},{"branch":"catch","id":2401,"inputs":{},"source":{"id":2397},"target":{"id":2303}}]}